(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["catalog"],{103:function(e,t,n){},1039:function(e,t,n){"use strict";n.r(t);var a=n(13),r=n(10),o=n(6),i=n(31),c=n(72),l=n(4),s=n.n(l),u=n(12),m=n(17),p=n(9),d=n(20),g=n(16),f=n(37),h=n(91),v=n(189),C=n(2751),b=n(118),E=n(59),_=Object(d.a)({resolved:{},chunkName:function(){return"base"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.resolve().then(n.bind(null,33))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var a=this.resolve(t);return n(a)},resolve:function e(){return 33}}),k={openCategory:h.a.openCategory,search:h.a.search,openGroup:v.a.openGroup,cancelFetch:v.a.cancelFetch,back:f.a.close,close:f.a.reset},y=Object(m.a)(u.b(function(e){return{stackItem:g.h(e,"catalog")}},k),p.b),N=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onGroupClick=function(e){t.props.search({searchType:"TEXT",text:e,origin:"category"},{stackAction:"push"})},t._onRubricClick=function(e){t.props.openCategory(e,{stackAction:"push"},{origin:"category"})},t._renderCollapsedCard=function(){var e,n=t.props,a=n.stackItem;if(!a)return null;if(a.data)if("id"in a.data){var o;e=(function(params){return params.group+" "+params.preposition+" "+params.prepositional;})(Object(r.a)(Object(r.a)({},null===(o=a.region)||void 0===o?void 0:o.names),{},{group:a.data.name}))}else{var s,u=a.data.companyCount;e=(function(params){return params.amountFormatted+" "+(params.amount % 10 === 1 && params.amount % 100 !== 11 ? "организация" :(params.amount % 10 > 1 && params.amount % 10 < 5 && (params.amount % 100 < 10 || params.amount % 100 > 20) ? "организации" : "организаций"))+" "+params.genitive;})(Object(r.a)(Object(r.a)({},null===(s=a.region)||void 0===s?void 0:s.names),{},{amountFormatted:E.b(u,n.config.lang),amount:u}))}else e="Организации";return l.createElement(l.Fragment,null,l.createElement(c.a,{view:"tall",title:e}),l.createElement(i.a,{onClick:function(){return n.close()},offset:"large",circle:!0}))},t}Object(o.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){e.stackItem&&!this.props.stackItem&&this.props.cancelFetch()},n.componentWillUnmount=function(){this.props.cancelFetch()},n.render=function(){var e=this.props,t=e.config,n=e.stackItem;return n?l.createElement(l.Fragment,null,l.createElement(_,{name:"catalog",analyticsName:"catalog",view:"full",isLoading:n.isLoading,miniCardOnly:!0,renderMiniCard:this._renderCollapsedCard,onClose:function(){return e.back()},hideCloseButton:Boolean(n.data)},l.createElement(C.a,Object(a.a)({},n,{onGroupClick:e.openGroup,onRubricClick:this._onRubricClick,onGroupSearch:this._onGroupClick,onBackClick:function(){return e.back()},onCloseClick:function(){return e.close()}}))),t.catalogData?l.createElement(b.a,{type:"catalog_page"}):null):null},t}(l.Component);N.displayName="CatalogComponent",t.default=y(N)},1040:function(e,t){},105:function(e,t,n){},118:function(e,t,n){"use strict";var a=n(6),r=n(4),o=n(141),i=n(9),c=n(160),l=n(16),s=n(218),u=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={},n}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){if(!t.isTimingLogged){var e=this.props,n=e.config.pageMode;"search-result"===e.config.pageMode&&(n="search"),"metro_page"===e.type&&(n="metro"),function(e){switch(e){case"routes_page":return"routes";case"org_page":return"orgpage";case"discovery_page":return"discovery";case"home_page":return"home";case"panorama_page":case"panorama_page_new":return"panoramas";case"photos_page":return"photos";case"search_card_page":case"search_list_page":return"search";case"traffic_page":return"traffic";case"masstransit_stop_page":case"masstransit_route_page":return"masstransit";case"catalog_page":return"catalog";case"metro_page":return"metro"}}(e.type)===n&&(t.isTimingLogged=!0,l.n(Object(s.a)(e.config))||this.setState({ready:o.a.getTimeToNow()}))}},n.render=function(){var e=this.props.type;return"undefined"==typeof window?null:r.createElement(c.a,{type:e,ready:this.state.ready,extraState:{show:window.timingsMarks&&e in window.timingsMarks?window.timingsMarks[e]:this.state.ready}})},t}(r.PureComponent);u.isTimingLogged=!1,t.a=Object(i.b)(u)},131:function(e,t,n){"use strict";var a=n(13),r=n(41),o=n(71),i=n(6),c=n(4),l=n(2779),s=n(9),u=!0,m=new Map,p=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._ref=c.createRef(),t._getTitleFromChildren=function(){var e=t.props.children;if("string"==typeof e)return e},t._getDefaultTitle=function(){return "Яндекс.Карты"},t._updateTitle=function(){var e=t._ref.current,n=t._getTitleFromChildren()||e.innerText||e.textContent,a=n&&n.replace(/\s/g," ").trim();a&&(m.set(Object(o.a)(t),a),t._setDocumentTitle(a))},t._setDocumentTitle=function(e){u?u=!1:window.document.title=e?Object(l.a)(e)+" — "+t._getDefaultTitle():t._getDefaultTitle()},t}Object(i.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateTitle()},n.getSnapshotBeforeUpdate=function(){return this._ref.current.textContent},n.componentDidUpdate=function(e,t,n){n!==this._ref.current.textContent&&this._updateTitle()},n.componentWillUnmount=function(){m.delete(this);var e=m.values().next().value;this._setDocumentTitle(e)},n.render=function(){var e=this.props,t=e.children,n=(e.config,Object(r.a)(e,["children","config"]));return c.createElement("h1",Object(a.a)({},n,{ref:this._ref}),t)},t}(c.PureComponent);t.a=Object(s.b)(p)},134:function(e,t,n){"use strict";n(148);var a=n(4),r=n(7),o=n(8),i=Object(r.a)("something-wrong-view");t.a=function(e){return a.createElement(o.a,{name:"error"},a.createElement("div",{className:i()},a.createElement("div",{className:i("image")}),a.createElement("div",{className:i("text")},e.children)))}},148:function(e,t,n){},1779:function(e,t,n){},1781:function(e,t,n){},1783:function(e,t,n){},1785:function(e,t,n){},1787:function(e,t,n){e.exports=n.p+"_/38e4ede5dc3c3f6dd8fe53f08ff0f73f.svg"},1788:function(e,t,n){},1790:function(e,t,n){},1792:function(e,t,n){e.exports=n.p+"_/1a8f9314cb21766e5d04b30ea4e5e9b9.svg"},189:function(e,t,n){"use strict";var a=n(26);t.a=Object(a.a)(function(){return n.e("catalog").then(n.bind(null,407))},{openCatalog:!0,openGroup:!0,cancelFetch:!0})},2751:function(e,t,n){"use strict";var a=n(6),r=(n(1779),n(4)),o=n(7),i=n(9),c=n(596),l=n(10),s=(n(1781),n(1783),n(59)),u=n(8),m=n(131),p=(n(1040),n(1785),n(21)),d=n(36),g=n(11),f=n(38),h=n(1787),v=n.n(h),C=Object(o.a)("catalog-rubrics-view"),b=function(e){function t(t){var n;return(n=e.call(this,t)||this)._renderItem=function(e,t){var a=e.color||"rgb(171,174,178)",o=a.replace("rgb","rgba").replace(/\)$/,", 0.5)"),i=d.d({type:"rubrics",name:e.icon,size:"normal"},n.props.config)||v.a,c=n.props.region?p.d(n.props.region,Number(e.id),n.props.config):void 0;return r.createElement(u.a,{key:e.id,name:"item",nodeState:{name:e.name},logClick:!0},r.createElement("div",{className:C("item"),onClick:function(){return n.props.onItemClick(e)},onMouseEnter:function(){return n.setState({hoveredIndex:t})},onMouseLeave:function(){return n.setState({hoveredIndex:void 0})}},r.createElement(f.a,{className:C("item-wrapper"),href:c,title:e.name},r.createElement("div",{className:C("icon"),style:{backgroundColor:a,boxShadow:n.state.hoveredIndex===t?"0 1px 8px 0 "+o:void 0}},r.createElement(g.a,{className:C("icon-inner"),url:i})),r.createElement("h3",{className:C("text")},e.name))))},n.state={},n}return Object(a.a)(t,e),t.prototype.render=function(){return r.createElement(u.a,{name:"rubrics"},r.createElement("div",{className:C()},this.props.items.map(this._renderItem),new Array(6).fill(0).map(function(e,t){return r.createElement("div",{className:C("item"),key:t})})))},t}(r.PureComponent),E=Object(i.b)(b),_=Object(o.a)("catalog-main-view"),k=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._renderHeader=function(){var e=t.props,n=e.region.names,a=(function(params){return params.amountFormatted+" "+(params.amount % 10 === 1 && params.amount % 100 !== 11 ? "организация" :(params.amount % 10 > 1 && params.amount % 10 < 5 && (params.amount % 100 < 10 || params.amount % 100 > 20) ? "организации" : "организаций"))+" "+params.genitive;})(Object(l.a)(Object(l.a)({},n),{},{amountFormatted:s.b(e.data.companyCount,e.config.lang),amount:e.data.companyCount}));return r.createElement("div",{className:_("header")},r.createElement(m.a,{className:_("title")},a))},t}return Object(a.a)(t,e),t.prototype.render=function(){var e=this.props;return r.createElement(u.a,{name:"catalog",nodeState:{id:e.region.id}},r.createElement("div",{className:_()},this._renderHeader(),r.createElement("div",{className:_("catalog")},r.createElement(E,{items:e.data.groups,onItemClick:this.props.onGroupClick,region:e.region}))))},t}(r.PureComponent),y=Object(i.b)(k),N=(n(1788),n(1790),n(101)),w=n(1792),O=n.n(w),j=Object(o.a)("catalog-group-view"),T=[18],S=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onLookupChange=function(e){n.setState({lookup:e})},n._renderNothingFound=function(){return r.createElement("div",{className:j("not-found")},r.createElement("div",{className:j("not-found-title")},"Ничего не найдено"),"Попробуйте изменить запрос")},n._renderRubric=function(e){var t=n.props,a={id:e.categoryId,seoname:e.seoname,name:e.name};return r.createElement(u.a,{name:"rubric",key:e.categoryId,nodeState:{name:e.name},logClick:!0},r.createElement(f.a,{className:j("rubric"),onLeftClick:function(){return t.onRubricClick(a)},title:e.name,href:p.e(a,t.region,t.config)},r.createElement("div",{className:j("rubric-content")},r.createElement("h3",{className:j("rubric-title")},e.name),r.createElement("div",{className:j("rubric-amount")},(function(params){return params.amountFormatted+" "+(params.amount % 10 === 1 && params.amount % 100 !== 11 ? "организация" :(params.amount % 10 > 1 && params.amount % 10 < 5 && (params.amount % 100 < 10 || params.amount % 100 > 20) ? "организации" : "организаций"));})({amountFormatted:s.b(e.companyCount,t.config.lang),amount:e.companyCount})))))},n._renderTitle=function(){var e=n.props,t=(function(params){return params.group+" "+params.preposition+" "+params.prepositional;})(Object(l.a)(Object(l.a)({},e.region.names),{},{group:e.data.name}));return r.createElement(m.a,{className:j("title")},t)},n._renderHeader=function(){var e=n.props,t=e.data,a=n._renderTitle(),o=!T.includes(t.id);return r.createElement(r.Fragment,null,null,r.createElement("div",{className:j("header")},a,r.createElement("h2",{className:j("description")},(function(){return "Выбирайте места и организации на карте: с рейтингом, отзывами посетителей и фотографиями. Смотрите, как туда добраться на автомобиле, общественном транспорте, велосипеде или пешком.";})(Object(l.a)(Object(l.a)({},e.region.names),{},{group:t.name}))),o?r.createElement(u.a,{name:"show_all",logClick:!0},r.createElement("div",{className:j("show-all"),onClick:function(){return e.onGroupSearch(t.name)}},"Показать все организации")):null))},n._renderFilter=function(){var e=n.state.lookup;return r.createElement(u.a,{name:"filter"},r.createElement("div",{className:j("filter")},r.createElement(N.a,{view:"stroke",value:e,onChange:n._onLookupChange,placeholder:"Введите тип организации",rightIcons:""===e?[r.createElement(g.a,{key:"",className:j("filter-icon"),url:O.a})]:void 0,showClear:!0})))},n.state={lookup:""},n}return Object(a.a)(t,e),t.prototype.render=function(){var e=this.state,t=this.props.data,n=[].concat(t.rubrics).sort(function(e,t){return e.name.localeCompare(t.name)});if(e.lookup){var a=e.lookup.toLowerCase();n=n.filter(function(e){return e.name.toLowerCase().includes(a)})}return r.createElement(u.a,{name:"group",nodeState:{name:t.name}},r.createElement("div",{className:j()},this._renderHeader(),r.createElement("div",{className:j("rubrics")},this._renderFilter(),0!==n.length?n.map(this._renderRubric):this._renderNothingFound())))},t}(r.PureComponent),I=Object(i.b)(S),R=n(39),L=n(134),x=n(597),F=n(72),D=Object(o.a)("catalog-content-view"),G=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onCatalogItemClick=function(e){t.props.onRubricClick(e.category)},t._renderMainView=function(e){var n=t.props;return r.createElement(y,{data:e,region:n.region,onGroupClick:n.onGroupClick,onBackClick:n.onBackClick,onCloseClick:n.onCloseClick})},t._renderGroupView=function(e){var n=t.props;return r.createElement(I,{data:e,region:n.region,onRubricClick:n.onRubricClick,onGroupSearch:n.onGroupSearch,onBackClick:n.onBackClick,onCloseClick:n.onCloseClick})},t}return Object(a.a)(t,e),t.prototype.render=function(){var e=this.props;if(e.data)return"id"in e.data?this._renderGroupView(e.data):this._renderMainView(e.data);if(null===e.data){var t=c.a(void 0,{limit:12,config:e.config});return r.createElement(r.Fragment,null,r.createElement(F.a,{showBorder:!0,title:"Организации"}),r.createElement(x.a,{items:t,onClick:this._onCatalogItemClick,theme:"color",size:"large"}))}return e.isLoading?r.createElement("div",{className:D("spinner")},r.createElement(R.a,{view:"xlarge"})):e.error?r.createElement(L.a,null,"Что-то пошло не так.\nПопробуйте обновить страницу\nили зайти позднее."):null},t}(r.PureComponent);t.a=Object(i.b)(G)},407:function(e,t,n){"use strict";n.r(t);var a,r=n(10),o=n(16),i=n(25),c={fetchCatalog:function(e,t){return Object(i.a)("catalog/by-id",{query:{regionId:e,locale:t.locale}},t)}},l=n(37),s=n(18),u={openCatalog:function(e,t){return function(n,r,i){var u=i.config,m=function(e){var t=o.h(r(),"catalog");t&&n(l.a.update(t,e))};e?(n(l.a.push({type:t?"group":"main",isLoading:!1,region:e,data:void 0,mode:"catalog",mobileViewState:"expanded"})),s.a.cancel(a),m({isLoading:!0,error:void 0}),a=s.a.create(c.fetchCatalog(e.id,u),{success:function(e){if(t){var n=null==e?void 0:e.groups.find(function(e){return e.id===t});m(n?{data:n}:{type:"main",data:e})}else m({data:e})},fail:function(){return m({error:"network"})},always:function(){return m({isLoading:!1})}})):n(l.a.push({mode:"catalog",type:"main",isLoading:!1,data:null,mobileViewState:"expanded"}))}},openGroup:function(e){return function(t,n){var a=o.h(n(),"catalog");a&&t(l.a.push(Object(r.a)(Object(r.a)({},a),{},{type:"group",data:e,mobileViewState:"expanded"})))}},cancelFetch:function(){return function(e,t){s.a.cancel(a);var n=o.h(t(),"catalog");n&&e(l.a.update(n,{isLoading:!1}))}}};t.default=u},72:function(e,t,n){"use strict";n(103),n(105);var a=n(4),r=n(7),o=n(31),i=n(46),c=Object(r.a)("sidebar-panel-header-view"),l=a.memo(function(e){return a.createElement("div",{className:[c({bordered:e.showBorder,view:e.view}),e.className].filter(Boolean).join(" ")},a.createElement("div",{className:c("title",{big:e.big})},e.title||e.children),a.createElement(i.a,{onChange:e.onChangeVisibiltyTitle},null),a.createElement("div",{className:c("controls")},e.onClose?a.createElement(o.a,{onClick:function(t){t.stopPropagation(),e.onClose()},relative:!0,circle:!0}):null))});l.displayName="SidebarPanelHeaderView",t.a=l}}]);