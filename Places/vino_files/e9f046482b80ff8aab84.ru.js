(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["panoramas","dialog"],{107:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return i});var a=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function r(e,t){return{sunday:"Воскресенье",monday:"Понедельник",tuesday:"Вторник",wednesday:"Среда",thursday:"Четверг",friday:"Пятница",saturday:"Суббота"}[t]}function o(e,t){return{sunday:"Вс",monday:"Пн",tuesday:"Вт",wednesday:"Ср",thursday:"Чт",friday:"Пт",saturday:"Сб"}[t]}function i(e,t){return{sunday:"В воскресенье",monday:"В понедельник",tuesday:"Во вторник",wednesday:"В среду",thursday:"В четверг",friday:"В пятницу",saturday:"В субботу"}[t]}},1072:function(e,t,n){"use strict";n.r(t);var a=n(13),r=n(6),o=n(10),i=n(4),s=n(12),c=n(9),l=n(8),u=n(147),m=n(336),d=n(456),p=n(28),f=n(18),h=n(220),y=n(17),v=n(2185),b=n(55),_=n(16),g=n(37),E=n(69),C={close:g.a.close,setLoadingPanorama:h.a.setLoadingPanorama,setCurrentPanorama:h.a.setCurrentPanorama,updateLayers:h.a.updateLayers},k=Object(y.a)(s.b(function(e){var t=E.F(e)||E.p(e),n=_.h(e,"panoramas");return Object(o.a)(Object(o.a)({mapType:e.map.type,mapLocation:e.map.location,isPhotosLayerEnabled:e.photos.isLayerEnabled,routerResponse:t.routerResponse&&"type"in t.routerResponse?t.routerResponse:null,activeRouteIndex:t.activeRouteIndex,routePoints:t.routePoints,isHotspotsEnabled:!E.T(e)&&!e.map.isEditing,travelMode:t.travelMode},e.panoramas),n)},C),c.b),P=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._streetAnalyticsRef=i.createRef(),t._onMapClick=function(e,n){(!e||"sta"!==e.source&&"feature"!==e.type&&"marker"!==e.type)&&(t._streetAnalyticsRef.current.logEvent("click"),t.props.setLoadingPanorama({point:n.coordinates}))},t._updateLayersAvailability=function(e){var n=e.isStreetLayerAvailable,a=e.isAirLayerAvailable;t.props.isStreetLayerAvailable===n&&t.props.isAirLayerAvailable===a||t.props.updateLayers(n,a)},t._checkLayersAvailability=function(){var e=t.props;(e.isPhotosLayerEnabled||e.isLayerEnabled)&&(f.a.cancel(t._checkLayersAvailabilityAction),t._checkLayersAvailabilityAction=f.a.create(Promise.all([d.a.getLayer(Object(o.a)({layer:"stv"},e.mapLocation),e.config),d.a.getLayer(Object(o.a)({layer:"sta"},e.mapLocation),e.config)]),{success:function(e){var n=e[0],a=e[1];return t._updateLayersAvailability({isStreetLayerAvailable:Boolean(n),isAirLayerAvailable:Boolean(a)})}}))},t._onAirHotspotClick=function(e){t.props.setLoadingPanorama({id:e.id,isAir:!0})},t._renderContent=function(){var e=t.props;return e.loadingPanorama||e.currentPanorama?i.createElement(p.a,{selector:".body"},i.createElement(v.a,Object(a.a)({},e,{close:function(){return e.close()}}))):null},t._renderStreetLayer=function(){var e=t.props;return e.isStreetLayerAvailable||e.isAirLayerAvailable?i.createElement(l.a,{name:"street",nodeRef:t._streetAnalyticsRef},i.createElement(m.a,{layer:"stv"}),e.isHotspotsEnabled&&e.isStreetLayerAvailable?i.createElement(b.b,{layer:"any",onFastClick:t._onMapClick}):null):null},t._renderAirLayer=function(){return t.props.isAirLayerAvailable&&t.props.isHotspotsEnabled?i.createElement(l.a,{name:"air",logClick:!0},i.createElement(m.a,{layer:"sta",onClick:t._onAirHotspotClick})):null},t._renderLayers=function(){return t.props.isLayerEnabled?i.createElement(u.a,{name:"panorama_layer"},t._renderStreetLayer(),t._renderAirLayer()):null},t}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._checkLayersAvailability()},n.componentDidUpdate=function(e){e.mapLocation!==this.props.mapLocation&&this._checkLayersAvailability()},n.componentWillUnmount=function(){f.a.cancel(this._checkLayersAvailabilityAction)},n.render=function(){return i.createElement(i.Fragment,null,this._renderContent(),this._renderLayers())},t}(i.Component);P.displayName="PanoramasComponent",t.default=k(P)},1073:function(e,t,n){"use strict";var a,r=n(25),o=n(344),i={loadYMaps:function(e){var t="ymaps-panorama";if(!a){var n=e.ymapsUrlTemplate.replace("PACKAGES","package.panoramas")+"&ns="+t;a=Object(o.a)(n).then(function(){var e=window[t];if(!e)throw new Error("window."+t+" is not found");return new Promise(function(t){e.ready(function(){return t(e)})})})}return a},getPanoramaPOV:function(e,t){var n=e.id,a=e.point;return(n||a?Object(r.a)("panorama/getPOV",{query:{ll:null==a?void 0:a.join(),oid:n,lang:t.locale}},t):Promise.resolve(null)).then(function(e){if(!e)throw new Error("Empty panoramaPOV response");return e})}};t.a=i},118:function(e,t,n){"use strict";var a=n(6),r=n(4),o=n(141),i=n(9),s=n(160),c=n(16),l=n(218),u=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={},n}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){if(!t.isTimingLogged){var e=this.props,n=e.config.pageMode;"search-result"===e.config.pageMode&&(n="search"),"metro_page"===e.type&&(n="metro"),function(e){switch(e){case"routes_page":return"routes";case"org_page":return"orgpage";case"discovery_page":return"discovery";case"home_page":return"home";case"panorama_page":case"panorama_page_new":return"panoramas";case"photos_page":return"photos";case"search_card_page":case"search_list_page":return"search";case"traffic_page":return"traffic";case"masstransit_stop_page":case"masstransit_route_page":return"masstransit";case"catalog_page":return"catalog";case"metro_page":return"metro"}}(e.type)===n&&(t.isTimingLogged=!0,c.n(Object(l.a)(e.config))||this.setState({ready:o.a.getTimeToNow()}))}},n.render=function(){var e=this.props.type;return"undefined"==typeof window?null:r.createElement(s.a,{type:e,ready:this.state.ready,extraState:{show:window.timingsMarks&&e in window.timingsMarks?window.timingsMarks[e]:this.state.ready}})},t}(r.PureComponent);u.isTimingLogged=!1,t.a=Object(i.b)(u)},156:function(e,t,n){"use strict";var a=n(13),r=n(6),o=(n(186),n(4)),i=n(7),s=n(53),c=n(41),l=o.useLayoutEffect,u=function(e){var t=Object(o.useRef)(e);return l(function(){t.current=e}),t},m=function(e,t){"function"!=typeof e?e.current=t:e(t)},d=function(e,t){var n=Object(o.useRef)();return Object(o.useCallback)(function(a){e.current=a,n.current&&m(n.current,null),n.current=t,t&&m(t,a)},[t])},p={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},f=function(e){Object.keys(p).forEach(function(t){e.style.setProperty(t,p[t],"important")})},h=null,y=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize};var v=function(){},b=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width"],_=!!document.documentElement.currentStyle,g=function(e,t){var n=e.cacheMeasurements,r=e.maxRows,i=e.minRows,s=e.onChange,l=void 0===s?v:s,m=e.onHeightChange,p=void 0===m?v:m,g=Object(c.a)(e,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]);var E,C=void 0!==g.value,k=Object(o.useRef)(null),P=d(k,t),S=Object(o.useRef)(0),w=Object(o.useRef)(),O=function(){var e=k.current,t=n&&w.current?w.current:function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n,a=(n=t,b.reduce(function(e,t){return e[t]=n[t],e},{})),r=a.boxSizing;return""===r?null:(_&&"border-box"===r&&(a.width=parseFloat(a.width)+parseFloat(a.borderRightWidth)+parseFloat(a.borderLeftWidth)+parseFloat(a.paddingRight)+parseFloat(a.paddingLeft)+"px"),{sizingStyle:a,paddingSize:parseFloat(a.paddingBottom)+parseFloat(a.paddingTop),borderSize:parseFloat(a.borderBottomWidth)+parseFloat(a.borderTopWidth)})}(e);if(t){w.current=t;var a=function(e,t,n,a){void 0===n&&(n=1),void 0===a&&(a=1/0),h||((h=document.createElement("textarea")).setAttribute("tab-index","-1"),h.setAttribute("aria-hidden","true"),f(h)),null===h.parentNode&&document.body.appendChild(h);var r=e.paddingSize,o=e.borderSize,i=e.sizingStyle,s=i.boxSizing;Object.keys(i).forEach(function(e){var t=e;h.style[t]=i[t]}),f(h),h.value=t;var c=y(h,e);h.value="x";var l=h.scrollHeight-r,u=l*n;"border-box"===s&&(u=u+r+o),c=Math.max(u,c);var m=l*a;return"border-box"===s&&(m=m+r+o),[c=Math.min(m,c),l]}(t,e.value||e.placeholder||"x",i,r),o=a[0],s=a[1];S.current!==o&&(S.current=o,e.style.setProperty("height",o+"px","important"),p(o,{rowHeight:s}))}};return Object(o.useLayoutEffect)(O),E=u(O),Object(o.useLayoutEffect)(function(){var e=function(e){E.current(e)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[]),Object(o.createElement)("textarea",Object(a.a)({},g,{onChange:function(e){C||O(),l(e)},ref:P}))},E=Object(o.forwardRef)(g),C=Object(i.a)("textarea"),k=function(e){function t(t){var n;return(n=e.call(this,t)||this)._textarea=o.createRef(),n._onChange=function(e){n.props.onChange(e.currentTarget.value)},n._onClick=function(){n._textarea.current.focus()},n._onFocus=function(){var e=n.props;e.selectOnFocus&&n._textarea.current.select(),e.onFocus&&e.onFocus(),n.setState({focused:!0})},n._onBlur=function(){var e=n.props;e.onBlur&&e.onBlur(),n.setState({focused:!1})},n._onKeyDown=function(e){var t,a=n.props;null===(t=a.onKeyDown)||void 0===t||t.call(a,e),a.onEnterSubmit&&e.keyCode===s.a.ENTER&&!e.shiftKey&&(n._textarea.current.blur(),a.onEnterSubmit())},n.state={focused:!1},n}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=C({disabled:e.disabled,focused:this.state.focused,size:e.size,invalid:e.invalid,view:e.view,filled:e.value.length>0}),n={className:C("control"),value:e.value,id:e.id,name:e.name,tabIndex:e.tabIndex,disabled:e.disabled,maxLength:e.maxLength,placeholder:e.placeholder,autoComplete:"off",autoCorrect:"off",autoFocus:e.autoFocus,rows:e.rows,onKeyDown:this._onKeyDown,onChange:this._onChange,onFocus:this._onFocus,onBlur:this._onBlur};return o.createElement("span",{className:t,onClick:this._onClick},e.autoHeight?o.createElement(E,Object(a.a)({ref:this._textarea},n,{maxRows:e.maxRows,minRows:e.rows,translate:"off",style:{resize:"none",overflow:e.maxRows?"auto":"hidden"}})):o.createElement("textarea",Object(a.a)({ref:this._textarea},n,{style:{maxHeight:e.maxHeight+"px",resize:e.resizeable?"vertical":"none"}})))},t}(o.PureComponent);t.a=k},158:function(e,t,n){"use strict";var a=n(6),r=n(4),o=n(9),i=n(18),s=n(25),c={getUrl:function(e,t){return Object(s.a)("shortenPath",{query:{path:e}},t).then(function(e){return"/-/"+e})}},l={},u=function(e){function t(t){var n;return(n=e.call(this,t)||this)._updateShortUrl=function(e){i.a.cancel(n._shortenAction),l[e]||(l[e]=c.getUrl(e,n.props.config)),n.setState({url:e,isShort:!1}),n._shortenAction=i.a.create(l[e],{success:function(e){n.setState({url:e,isShort:!0})}})},n.state={url:t.url,isShort:!1},n}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateShortUrl(this.state.url)},n.componentDidUpdate=function(e){this.props.url!==e.url&&this._updateShortUrl(this.props.url)},n.componentWillUnmount=function(){i.a.cancel(this._shortenAction)},n.render=function(){return this.props.children(this.state.url,this.state.isShort)},t}(r.PureComponent);t.a=Object(o.b)(u)},169:function(e,t,n){"use strict";var a=n(10),r=n(108),o=n.n(r),i=n(25),s=n(21),c=n(275),l="[maps]",u={auto:"auto",mt:"masstransit",pd:"pedestrian",bc:"bicycle"},m={sendFeedback:function(e,t){var n;return f({subject:e.subject,email:e.email,name:e.name,comment:e.comment,fields:{rating:e.rating}},t,((n={})["X-OTRS-maps"]="service_is_not_working",n))},sendDesignFeedback:function(e,t){var n;return f({isDesign:!0,subject:e.subject,email:e.email,name:e.name,comment:e.comment},t,((n={})["X-OTRS-maps"]="design",n))},sendRouteFeedback:function(e,t){return Object(i.a)("feedback/edit-route",{body:Object(a.a)(Object(a.a)({},e),{},{metadata:Object(a.a)({client_id:"desktop-maps",test_ids:Object(c.a)(t.experiments)},e.metadata)})},t)},sendRouteMasstransitFeedback:function(e,t){var n,r;return f({subject:e.subject,email:e.email,name:e.name,comment:e.comment,fields:{link:d(Object(a.a)(Object(a.a)({},e.urlParams),{},{rl:e.route,pt:null===(n=e.obstacle)||void 0===n?void 0:n.join(",")}),t),attachedPhotos:e.attachedPhotos}},t,((r={})["X-OTRS-route"]="masstransit",r))},sendRouteManeuverFeedback:function(e,t){var n,r;return f({subject:e.subject,email:e.email,name:e.name,comment:e.comment,fields:{link:d(Object(a.a)(Object(a.a)({},e.urlParams),{},{pt:e.maneuver.coords.join(",")}),t)}},t,((n={})["X-OTRS-route"]=(r=e.urlParams.rtt,u[r]||u.auto),n))},sendPanoramaFeedback:function(e,t){return f({subject:e.subject,email:e.email,name:e.name,comment:e.comment},t)},sendPhotosFeedback:function(e,t){return Object(i.a)("feedback/sendToPhotos",{body:e},t)},sendStopFeedback:function(e,t){var n;return f({subject:e.subject,email:e.email,name:e.name,comment:e.comment},t,((n={})["X-OTRS-maps"]="stop",n))},sendStopIncorrectPlaceFeedback:function(e,t){var n,a=e.coords.join(",");return f({subject:e.subject,email:e.email,name:e.name,comment:e.comment,fields:{link:d({pt:a,ll:a,z:e.zoom},t),coords:a}},t,((n={})["X-OTRS-maps"]="stop",n))},sendMrcFeedback:function(e,t){var n;return f({subject:e.subject,email:e.email,name:e.name,comment:e.comment,fields:{link:d({mrc:{id:e.id}},t),photo_id:e.id,mrc_link:p(e,t)}},t,((n={})["X-OTRS-maps"]="service_is_not_working",n))},updateCard:function(e,t){return Object(i.a)("feedback/edit-org",{body:Object(a.a)(Object(a.a)({},e),{},{metadata:Object(a.a)({client_id:"desktop-maps",test_ids:Object(c.a)(t.experiments)},e.metadata)})},t)},sendToponymFeedback:function(e,t){return Object(i.a)("feedback/toponym",{body:Object(a.a)(Object(a.a)({},e),{},{metadata:Object(a.a)({client_id:"desktop-maps",test_ids:Object(c.a)(t.experiments)},e.metadata)})},t)},sendToponymBatchFeedback:function(e,t,n){return Object(i.a)("feedback/toponym/batch",{body:Object(a.a)(Object(a.a)({},e),{},{customData:t,metadata:Object(a.a)({client_id:"desktop-maps",test_ids:Object(c.a)(n.experiments)},e.metadata)})},n)},getRubricSuggest:function(e,t){return Object(i.a)("feedback/rubrics-suggest",{query:{lang:t.lang,part:e.part,exclude:e.exclude}},t)},getFeatures:function(e,t){return Object(i.a)("feedback/features",{query:{lang:t.lang,rubricIds:e.rubricIds}},t)}};function d(e,t){return s.a("/?"+o.a.stringify(e),t)}function p(e,t){var n=e.id,a=e.uid,r=e.sourceId;return t.hosts.mrcPlanner+"publish-photo?photoId="+n+"&uid="+a+"&sourceId="+r}function f(e,t,n){return Object(i.a)("feedback/sendToMaps",{body:Object(a.a)(Object(a.a)({},e),{},{fields:Object(a.a)(Object(a.a)({},e.fields),{},{permalink:window.location.href}),additionalFields:{testBuckets:t.experiments.boxes},subject:l+" "+e.subject}),headers:n},t)}t.a=m},186:function(e,t,n){},200:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var a=n(77),r="[a-z0-9!#$%&'*\\.+/=?^_`{|}~-]+@([a-zёа-я0-9]([a-zёа-я0-9-]*[a-zёа-я0-9])?\\.)+[a-zёa-я]{2,}";function o(e){return new RegExp("^"+r+"$","i").test(e)}function i(e){var t=a.b(e);return Boolean(t&&e.length===t.countryCode.length+t.phoneFormat.length&&e.startsWith(t.countryCode))}},2185:function(e,t,n){"use strict";var a=n(71),r=n(6),o=n(2186),i=n.n(o),s=n(2188),c=n.n(s),l=n(4),u=n.n(l),m=n(20),d=n(7),p=n(9),f=n(0),h=n(581),y=n(2190),v=n(2768),b=n(39),_=n(1174),g=n(80),E=n(53),C=n(2767),k=Object(m.a)({resolved:{},chunkName:function(){return"panorama-player"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("panorama-player").then(n.bind(null,1156))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var a=this.resolve(t);return n(a)},resolve:function e(){return 1156}},{ssr:!1}),P=Object(d.a)("panorama-player-view"),S=null,w=function(e){function t(t){var n;return(n=e.call(this,t)||this)._setPlayerType=function(e){S=e,n.setState({playerType:S})},n._onMinimapAirHotspotClick=function(e){n.props.setLoadingPanorama({id:e,isAir:!0})},n._onMinimapClick=function(e){n.props.setLoadingPanorama({point:e})},n._onMinimapExpand=function(){n.setState({isMinimapExpanded:!0})},n._onMinimapCollapse=function(){n.setState({isMinimapExpanded:!1})},n._onMinimapMarkerDragEnd=function(e){var t;n.props.setLoadingPanorama({point:e,direction:null===(t=n.props.currentPanorama)||void 0===t?void 0:t.direction})},n._onPlayerPOVLoad=function(){n.props.setLoadingPanorama(null)},n._onPlayerChange=function(e){n.props.setCurrentPanorama(e)},n._onPlayerError=function(){n._setPlayerType("ymaps"),n.props.setLoadingPanorama(n.props.loadingPanorama||n.props.currentPanorama||null),n.setState({performanceInitStartTime:window.performance.now()})},n._onHistoryChange=function(e,t){var r=Object(a.a)(n).props,o=r.currentPanorama||r.loadingPanorama;o&&n.props.setLoadingPanorama({id:e,direction:o.direction,timestamp:t})},n._renderMinimap=function(){var e=n.props;var t=e.currentPanorama||e.loadingPanorama,a=t&&"point"in t?t.point:null;return t&&a?l.createElement(y.a,{expanded:n.state.isMinimapExpanded,point:a,mapLocation:e.mapLocation,type:e.mapType,travelMode:e.travelMode,markerDirection:t.direction?t.direction[0]:null,markerFieldOfView:"span"in t&&t.span?t.span[0]:null,onAirHotspotClick:n._onMinimapAirHotspotClick,onClick:n._onMinimapClick,onExpand:n._onMinimapExpand,onCollapse:n._onMinimapCollapse,onMarkerDragEnd:n._onMinimapMarkerDragEnd,routerResponse:e.routerResponse,activeRouteIndex:e.activeRouteIndex,routePoints:e.routePoints}):null},n._renderControls=function(){var e=n.props;return e.currentPanorama||e.loadingPanorama?l.createElement("div",{className:P("controls")},l.createElement(v.a,{currentPanorama:e.currentPanorama,onCloseClick:e.close,onHistoryChange:n._onHistoryChange})):null},n._renderZoomControl=function(e){n.props;return l.createElement("div",{className:P("zoom-control")},l.createElement(_.a,{onZoomIn:e.onZoomIn,onZoomOut:e.onZoomOut,disabledZoomIn:e.disabledZoomIn,disabledZoomOut:e.disabledZoomOut}))},n._renderPlayerContent=function(e){return l.createElement(l.Fragment,null,"isLoading"in e&&e.isLoading?l.createElement("div",{className:P("loading-indicator")},l.createElement(b.a,{view:"large"})):null,l.createElement("div",{className:P("logo")},l.createElement(h.a,{isNegative:!0,isPopupDisabled:!0})),l.createElement("div",{className:P("top-block")},l.createElement("div",{className:P("top-controls")},l.createElement("div",{className:P("name")},e.name),n._renderControls())),n._renderZoomControl(e),n._renderMinimap())},n._renderYmapsPlayer=function(){var e=n.props;return null===n.state.performanceInitStartTime?null:l.createElement(C.a,{currentPanorama:e.currentPanorama,loadingPanorama:e.loadingPanorama,setLoadingPanorama:e.setLoadingPanorama,setCurrentPanorama:e.setCurrentPanorama,performanceInitStartTime:n.state.performanceInitStartTime,isMinimapExpanded:n.state.isMinimapExpanded,close:e.close},function(e){return n._renderPlayerContent(e)})},n._renderPanoPlayer=function(){var e=n.props;return n.state.performanceInitStartTime?l.createElement(k,{currentPanorama:e.currentPanorama,loadingPanorama:e.loadingPanorama,isMinimapExpanded:n.state.isMinimapExpanded,onPOVLoad:n._onPlayerPOVLoad,onChange:n._onPlayerChange,onError:n._onPlayerError,performanceInitStartTime:n.state.performanceInitStartTime},function(e){return n._renderPlayerContent(e)}):null},n.state={isMinimapExpanded:!0,playerType:S,performanceInitStartTime:null},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.state.playerType||this._setPlayerType(this.props.config.experiments.ui.panoPlayer?"pano":"ymaps"),this.setState({isMinimapExpanded:!1!==f.a.get("is_panorama_minimap_expanded"),performanceInitStartTime:window.performance.now()})},n.componentDidUpdate=function(e,t){t.isMinimapExpanded!==this.state.isMinimapExpanded&&f.a.set("is_panorama_minimap_expanded",this.state.isMinimapExpanded)},n.render=function(){var e=this.state;return null===e.playerType?null:l.createElement("div",{className:P()},l.createElement("div",{className:P("player-holder",{collapsed:e.isMinimapExpanded})},"pano"===e.playerType?this._renderPanoPlayer():this._renderYmapsPlayer()),l.createElement(g.a,{handlers:[{key:E.a.ESC,callback:this.props.close}],stopPropagation:!0}))},t}(l.Component);t.a=Object(p.b)(w)},2186:function(e,t,n){},2188:function(e,t,n){},2190:function(e,t,n){"use strict";var a=n(6),r=n(2191),o=n.n(r),i=n(4),s=n.n(i),c=n(2792),l=n(7),u=n(15),m=n(8),d=n(2762),p=n(950),f=n(594),h=n(670),y=n(55),v=n(336),b=n(54),_=n(671),g=n(20),E=n(11),C=n(2197),k=n.n(C),P=n(2198),S=n.n(P),w=Object(g.a)({resolved:{},chunkName:function(){return"routes"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("routes").then(n.bind(null,948))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var a=this.resolve(t);return n(a)},resolve:function e(){return 948}}),O=14,j=50,x=Object(l.a)("panorama-minimap-view"),T=function(e){function t(t){var n;return(n=e.call(this,t)||this)._analyticsRef=i.createRef(),n._onMapLocationChange=function(e){n._mapLocation&&n._mapLocation.zoom===e.zoom||(n.setState({isFieldOfViewHidden:e.zoom<O}),n._analyticsRef.current&&n._analyticsRef.current.logEvent("zoom")),n._mapLocation=e},n._onAirHotspotClick=function(e){n.props.onAirHotspotClick(e.id),n._analyticsRef.current&&n._analyticsRef.current.logEvent("click")},n._onMapClick=function(e,t){e&&"sta"===e.source||(n.props.onClick(t.coordinates),n._analyticsRef.current&&n._analyticsRef.current.logEvent("click"))},n._onSplitViewControlClick=function(){n.props.expanded?n.props.onCollapse():n.props.onExpand()},n._onMarkerDragEnd=function(e){n.props.onMarkerDragEnd(e.coordinates)},n._renderPlacemark=function(){var e=n.props;return null===e.markerDirection||null===e.markerFieldOfView?null:i.createElement(b.a,{coordinates:e.point,onDragEnd:n._onMarkerDragEnd,draggable:!0},i.createElement(d.a,{direction:e.markerDirection,fieldOfViewAngle:e.markerFieldOfView,isFieldOfViewHidden:n.state.isFieldOfViewHidden}))},n._renderRoutesView=function(){var e=n.props,t=n._mapLocation||e.mapLocation;return e.routerResponse&&t?i.createElement(w,{routePoints:e.routePoints,routerResponse:e.routerResponse,viaIndexes:e.routerResponse.viaIndexes||[],activeRouteIndex:e.activeRouteIndex,feedback:null,mapLocation:t,travelMode:e.travelMode,isLoading:!1,isMapEditing:!0}):null},n.state={showZoom:!1,isFieldOfViewHidden:t.mapLocation.zoom<O},n}Object(a.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props.point;Object(c.a)(e.point,t)||this.setState({locationRequest:{center:t,duration:200}})},n.render=function(){var e=this,t=this.props;return i.createElement(m.a,{name:"minimap",nodeRef:this._analyticsRef},i.createElement("div",{className:x({expanded:t.expanded}),onMouseEnter:function(){return e.setState({showZoom:!0})},onMouseLeave:function(){return e.setState({showZoom:!1})}},i.createElement(p.a,{className:x("map"),type:t.type,margin:[j,j,j,j],initialLocation:{center:t.point,zoom:t.mapLocation.zoom},locationRequest:this.state.locationRequest,onLocationChange:this._onMapLocationChange,vector:!0},i.createElement(h.a,null),i.createElement(_.a,{copyrightOnly:!0,right:70}),i.createElement(v.a,{layer:"stv"}),i.createElement(y.b,{layer:"any",onClick:this._onMapClick}),i.createElement(v.a,{layer:"sta",onClick:this._onAirHotspotClick}),this._renderPlacemark(),this._renderRoutesView(),i.createElement("div",{className:x("split-view-control")},i.createElement(m.a,{name:"split_control",logClick:!0},i.createElement(u.a,{view:"air",size:"medium",icon:i.createElement(E.a,{url:t.expanded?S.a:k.a}),onClick:this._onSplitViewControlClick}))),i.createElement("div",{className:x("zoom-control")},this.state.showZoom?i.createElement(f.a,null):null))))},t}(i.Component);t.a=T},2191:function(e,t,n){},2193:function(e,t,n){},2195:function(e,t,n){},2197:function(e,t,n){e.exports=n.p+"_/8f803553185e7b4e6467b954944f20eb.svg"},2198:function(e,t,n){e.exports=n.p+"_/3b42279746d491b6fa4103fe9536c916.svg"},2199:function(e,t,n){},2201:function(e,t,n){"use strict";var a=n(13),r=n(6),o=n(2202),i=n.n(o),s=n(4),c=n.n(s),l=n(12),u=n(7),m=n(20),d=n(15),p=n(8),f=n(22),h=n(11),y=n(79),v=n(158),b=n(626),_=n(2204),g=n.n(_),E=Object(m.a)({resolved:{},chunkName:function(){return"share"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("share").then(n.bind(null,893))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var a=this.resolve(t);return n(a)},resolve:function e(){return 893}}),C=Object(m.a)({resolved:{},chunkName:function(){return"share"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("share").then(n.bind(null,894))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var a=this.resolve(t);return n(a)},resolve:function e(){return 894}}),k=Object(m.a)({resolved:{},chunkName:function(){return"share"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("share").then(n.bind(null,892))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var a=this.resolve(t);return n(a)},resolve:function e(){return 892}}),P=Object(u.a)("panorama-share-control"),S=l.b(function(e){return{queryUrl:Object(y.a)(e,{format:"query"}),config:e.config}}),w=function(e){function t(t){var n;return(n=e.call(this,t)||this)._button=s.createRef(),n._renderBlock=function(e){return s.createElement("div",{className:P("block")},e)},n._renderMapPreview=function(){if(!n.state.isPreviewOpened)return s.createElement("div",{className:P("preview-info")},"Некоторые элементы карты не могут быть вставлены на сайт. Откройте предпросмотр и проверьте вид вашей будущей карты.");var e=n.props.queryUrl;return s.createElement("div",{className:P("frame")},s.createElement(v.a,{url:e},function(e){var t=b.b(e,n.props.config,{from:"maps"});return s.createElement(k,{url:t,text:{title:"Изменения в режиме предпросмотра не сохраняются.",description:"Например, чтобы изменить центр карты, закройте предпросмотр и передвиньте карту до копирования ссылки."}})}))},n._renderPreviewButton=function(){return s.createElement(p.a,{name:"preview_button",logClick:!0},s.createElement(d.a,{tick:"triangle",view:"secondary-blue",size:"medium",flippedTick:n.state.isPreviewOpened,onClick:function(){return n.setState({isPreviewOpened:!n.state.isPreviewOpened})}},"Предпросмотр"))},n._renderMapWidget=function(){return n.props.config.hosts.mapFrame?s.createElement(p.a,{name:"widget",subtreeState:{type:"map"}},s.createElement(C,null,n._renderPreviewButton()),n._renderMapPreview()):null},n._renderPopup=function(){var e=n.props;return s.createElement(f.a,Object(a.a)({},e.popupProps,{isShown:e.popupProps.isShown,position:"bottom-left",getTarget:function(){return n._button.current},type:"map-hint",offset:{main:12,side:-20},showArrow:!1,repositionOnContentResize:!0}),s.createElement("div",{className:P()},n._renderBlock(s.createElement(E,{label:"Ссылка на панораму"})),n._renderBlock(n._renderMapWidget())))},n.state={isPreviewOpened:!1},n}return Object(r.a)(t,e),t.prototype.render=function(){return s.createElement("div",null,s.createElement(p.a,{name:"panorama_share_control",logClick:!0},s.createElement(d.a,Object(a.a)({view:"air",size:"medium",icon:s.createElement(h.a,{url:g.a}),pinRight:!0,ref:this._button},this.props.buttonProps))),this._renderPopup())},t}(s.Component);t.a=S(w)},2202:function(e,t,n){},2204:function(e,t,n){e.exports=n.p+"_/68bd595d74a136f75d057c4706256540.svg"},2205:function(e,t,n){},2207:function(e,t,n){"use strict";var a=n(13),r=n(6),o=n(4),i=n.n(o),s=n(12),c=n(7),l=n(20),u=n(8),m=n(15),d=n(22),p=n(2208),f=n(556),h=n(21),y=n(79),v=n(11),b=n(2216),_=n.n(b),g=Object(l.a)({resolved:{},chunkName:function(){return"feedback"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("feedback").then(n.bind(null,556))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var a=this.resolve(t);return n(a)},resolve:function e(){return 556}}),E=Object(c.a)("panorama-feedback-control"),C=3500,k=s.b(function(e){return{queryUrl:Object(y.a)(e,{format:"query"}),config:e.config}}),P=function(e){function t(t){var n;return(n=e.call(this,t)||this)._target=o.createRef(),n._onComplaintClick=function(){n.props.popupProps.onClose(),n.setState({dialog:"complaint"})},n._onConfidentialityClick=function(){n.props.popupProps.onClose(),n.setState({dialog:"break-confidentiality"})},n._getFeedbackItems=function(){var e=n.props.config,t=[{name:"feedback",analyticsName:"complaint",text:"Сообщить об ошибке",onClick:n._onComplaintClick}];return e.feedback.showConfidentialityComplaint&&t.unshift({name:"confidentiality",text:"Нарушение конфиденциальности",onClick:n._onConfidentialityClick}),e.panoramaLandingUrl&&t.push({name:"add-panorama",analyticsName:"add_panorama",text:"Добавить панораму",href:e.panoramaLandingUrl}),e.feedback.panoramaHelpUrl&&t.push({name:"help",text:"Справка",href:e.feedback.panoramaHelpUrl}),t},n._renderComponent=function(){var e=n.state.dialog;return e?o.createElement(g,{dialog:e,updateDialog:function(e){return n.setState({dialog:e})}}):null},n._renderPopup=function(){var e=n.props,t=[n._getFeedbackItems()];return e.config.uatraits.isTablet||t.unshift([{name:"print",text:"Печать",href:h.o(e.queryUrl,e.config)}]),o.createElement(d.a,Object(a.a)({position:"bottom-left",getTarget:function(){return n._target.current},type:"map-hint",offset:{main:12,side:-20},showArrow:!1,zIndex:C},e.popupProps),o.createElement("div",{className:E("selector")},o.createElement(u.a,{name:"panorama_feedback_selector"},o.createElement(p.a,{items:t}))))},n.state={dialog:null},n}return Object(r.a)(t,e),t.prototype.render=function(){return o.createElement("div",{className:E()},o.createElement(u.a,{name:"panorama_feedback_control",logClick:!0},o.createElement(m.a,Object(a.a)({view:"air",size:"medium",icon:o.createElement(v.a,{url:_.a}),pinLeft:!0,ref:this._target},this.props.buttonProps))),this._renderPopup(),this._renderComponent())},t}(o.Component);t.a=k(P)},2208:function(e,t,n){"use strict";var a=n(6),r=(n(2209),n(4)),o=n(7),i=n(11),s=n(8),c=n(2211),l=n.n(c),u=n(2212),m=n.n(u),d=n(2213),p=n.n(d),f=n(2214),h=n.n(f),y=n(2215),v=n.n(y),b=Object(o.a)("feedback-menu-view"),_={"add-organization":l.a,feedback:m.a,print:p.a,share:h.a,"add-panorama":v.a},g=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._renderInlineImage=function(e){return _[e]?r.createElement(i.a,{url:_[e],className:b("icon",{name:e})}):null},t._renderItem=function(e){var n=e.name,a=e.analyticsName,o=e.href,i=e.text,c=e.onClick,l=b("item",{name:n});return r.createElement(s.a,{key:n,name:a||n,logClick:!0},o?r.createElement("a",{href:o,target:"_blank",className:l,onClick:c},t._renderInlineImage(n),i):r.createElement("div",{className:l,onClick:c},t._renderInlineImage(n),i))},t._renderSection=function(e,n){return 0===e.length?null:r.createElement("div",{className:b("section"),key:n},e.map(t._renderItem))},t}return Object(a.a)(t,e),t.prototype.render=function(){return r.createElement("div",{className:b()},this.props.items.map(this._renderSection))},t}(r.PureComponent);t.a=g},2209:function(e,t,n){},2211:function(e,t,n){e.exports=n.p+"_/14943e392bab57d2734ee3611e3949e2.svg"},2212:function(e,t,n){e.exports=n.p+"_/267e0c9176f33f76e08e4fe90e4c182c.svg"},2213:function(e,t,n){e.exports=n.p+"_/9d8b47d71457beddf310c4a832577386.svg"},2214:function(e,t,n){e.exports=n.p+"_/fcd81bd52a1521c5ac4b475ac6a0edb7.svg"},2215:function(e,t,n){e.exports=n.p+"_/2a1ce51d64a325134e82002586d4c9d7.svg"},2216:function(e,t,n){e.exports=n.p+"_/b22eac9cee4e8162e3f56b5050ba2dcb.svg"},2217:function(e,t,n){e.exports=n.p+"_/d09e91cd57efdcffd5b06355d03e05eb.svg"},2218:function(e,t,n){e.exports=n.p+"_/11ec006445b36d08a5a77692e56d1b96.svg"},2219:function(e,t,n){},238:function(e,t,n){"use strict";n.d(t,"d",function(){return h}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return p}),n.d(t,"f",function(){return d}),n.d(t,"e",function(){return m}),n.d(t,"g",function(){return u}),n.d(t,"a",function(){return l}),n.d(t,"h",function(){return c});var a=n(32),r=n(200),o=n(107),i={hoursEmpty:function(e){return y(e).some(function(e){return""===e.startTime||""===e.endTime})},hoursBreaksEmpty:function(e){return y(e).some(function(e){return e.breaks.some(function(e){return Boolean(e.startTime&&!e.endTime||!e.startTime&&e.endTime)})})},hoursWrongFormat:s,hoursBreaksWrongFormat:function(e){return y(e).some(function(e){return e.breaks.some(function(e){return!(!e.startTime||!e.endTime)&&(null===a.j(e.startTime)||null===a.j(e.endTime))})})},hoursWrongFormatFilled:s};function s(e){return y(e).some(function(e){return!(!e.startTime||!e.endTime)&&(null===a.j(e.startTime)||null===a.j(e.endTime))})}function c(e){return""!==e.trim()}function l(e){return Boolean(e&&r.a(e))}function u(e,t){var n=/^\d{1,2}:\d{2}$/;return n.test(e)&&!a.j(e)||n.test(t)&&!a.j(t)}function m(e){return e.every(function(e){return u(e.startTime,e.endTime)})}function d(e,t){var n=i[t];return!!n&&n(e)}function p(e){return Object.keys(i).find(function(t){return(0,i[t])(e)})}function f(e){return y(e).length}function h(e){var t=y(e).map(function(e){return e.dayOfWeek});return o.a.filter(function(e){return!t.includes(e)})}function y(e){return e.reduce(function(e,t){return e.concat(t)},[])}},2507:function(e,t,n){"use strict";n.r(t);var a=n(37),r=n(16),o={setLoadingPanorama:function(e){return{type:"DEEP_EXTEND",payload:{panoramas:{loadingPanorama:e}}}},setCurrentPanorama:function(e){return function(t,n){var o=n(),i=r.h(o,"panoramas");t(i?a.a.update(i,{currentPanorama:e}):a.a.push({mode:"panoramas",currentPanorama:e}))}},updateLayers:function(e,t){return{type:"DEEP_EXTEND",payload:{panoramas:{isAirLayerAvailable:t,isStreetLayerAvailable:e}}}},enableLayer:function(){return{type:"DEEP_EXTEND",payload:{panoramas:{isLayerEnabled:!0},photos:{isLayerEnabled:!1},parking:{isLayerShown:!1},masstransit:{isLayerShown:!1},traffic:{isLayerEnabled:!1},mrc:{isLayerEnabled:!1}}}},disableLayer:function(){return{type:"DEEP_EXTEND",payload:{panoramas:{isLayerEnabled:!1}}}},toggleLayer:function(){return function(e,t){if(t().panoramas.isLayerEnabled)return e(o.disableLayer());e(o.enableLayer())}}};t.default=o},275:function(e,t,n){"use strict";function a(e){var t;return null===(t=e.boxes)||void 0===t?void 0:t.split(";").map(function(e){return e.split(",")[0]})}n.d(t,"a",function(){return a})},2762:function(e,t,n){"use strict";var a=n(6),r=(n(2193),n(4)),o=n(7),i=n(13),s=(n(2195),n(84)),c=n.n(s),l=n(86),u=n(194);function m(e,t,n){var a=Object(u.a)(n);return[e[0]+t*Math.cos(a),e[1]+t*Math.sin(a)]}var d=Object(o.a)("field-of-view"),p={strokeWidth:.75,strokeOpacity:0,stroke:"#454A8A"},f=40;var h=function(e){var t=c.a.v4();return r.createElement(l.a,null,function(n){var a,o,s,c,l;return r.createElement("div",{className:d({"fov-hidden":e.isHidden,"no-animation":e.noAnimation}),style:(a={},a[n.styles.transform]="rotate("+e.rotationAngle+"deg)",a)},e.isHidden?null:r.createElement("svg",{className:d("fov"),xmlns:"http://www.w3.org/2000/svg"},r.createElement("defs",null,r.createElement("linearGradient",{id:t,x1:"50%",x2:"50%",y1:"0%",y2:"100%"},r.createElement("stop",{stopColor:e.color,stopOpacity:".2",offset:"0%"}),r.createElement("stop",{stopColor:e.color,stopOpacity:"1",offset:"100%"}))),r.createElement("path",Object(i.a)({fill:"url(#"+t+")"},p,{d:(o=e.size,s=[f,f+p.strokeWidth],c=m(s,f,o/2-90),l=m(s,f,-o/2-90),["M",c[0],c[1],"A",f,f,0,0,0,l[0],l[1],"L",s[0],s[1],"Z"].join(" "))}))),e.children)})},y=Object(o.a)("panorama-minimap-marker-view"),v=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={rotationAngle:0},n}return Object(a.a)(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.rotationAngle,a=n%360+(n<0?360:0),r=e.direction-a,o=360-Math.abs(r);return(n+=Math.abs(r)<o?r:r>0?-o:o)!==t.rotationAngle?{rotationAngle:n}:null},t.prototype.render=function(){var e=this.props;return r.createElement(h,{rotationAngle:this.state.rotationAngle,size:e.fieldOfViewAngle,isHidden:e.isFieldOfViewHidden,color:"#555FCA"},r.createElement("div",{className:y("marker")}))},t}(r.Component);t.a=v},2767:function(e,t,n){"use strict";var a=n(6),r=(n(2219),n(4)),o=n(2795),i=n(2802),s=n(2792),c=n(2765),l=n(2800),u=n(7),m=n(9),d=n(18),p=n(273),f=n(165),h=n(1073),y=n(8),v=n(118);var b=function(e,t,n,a){function r(){}function o(){return performance.now()}function i(e){return function(){try{return e.apply(this,arguments)}catch(t){a(t)}}}function s(e,t,n,a){var r=e[t];e[t]=function(){var t=arguments;i(function(){n.call(null,t)})();var o=r.apply(e,arguments);return i(function(){a.call(null,t,o)})(),o}}a=a||r;var c=e,l=0,u=2,m=!1,d=!1,p={},f=0,h=t._engine;function y(){c=o(),l=0,u=2,m=!1,p={},d=!1}s(h,"_onThoroughfareClick",y,r),s(h,"_onJump",y,r),s(h,"_onHotkeyStep",y,r),s(h,"_setPanoramaToRenderer",function(e){var t=h._renderer._panorama;d=!0,t.__pmp_patched||(s(t,"setPanorama",r,function(e){s(t._tileLoader,"loadTile",function(e){var t=e[0]+"_"+e[1]+" "+e[2];m||!d||p[t]||(u++,p[t]=!0)},r)}),s(t,"_onTileLoad",function(e){!m&&d&&u===++l&&(m=!0,f++,n({time:o()-c,isFirst:1===f}))},r),t.__pmp_patched=!0)},r)},_=n(117),g=30,E=p.a.getLogger("panorama"),C=Object(u.a)("ymaps-panorama-player"),k=function(e){function t(t){var n;return(n=e.call(this,t)||this)._playerContainer=r.createRef(),n._playerAnalyticsRef=r.createRef(),n._player=null,n._fitToViewport=function(){n._player&&n._player.fitToViewport()},n._showPanorama=function(e){d.a.cancel(n._panoramaDataLoadAction);var t="isAir"in e&&e.isAir?"yandex#airPanorama":"yandex#panorama",a=h.a.loadYMaps(n.props.config).then(function(n){["Chrome/79","Chrome/80"].some(function(e){return navigator.userAgent.includes(e)})&&(document.createElement("canvas").getContext("webgl")||(n.modules.__modules._sandbox.supports.graphics.hasWebGl=function(){return null}));return"id"in e?n.panorama.locateById(e.id,{layer:t,connectionsTimestamp:e.timestamp}):n.panorama.locate(e.point,{layer:t})});n._panoramaDataLoadAction=d.a.create(a.then(function(e){return e[0]||Promise.reject()}),{success:function(t){if(n._player){var a=e.direction||n._calculateDirection(t);n._player.setPanorama(t),a&&n._player.setDirection(a),n._checkZoomRange(),n._setPanoramaName()}else window.document.activeElement&&window.document.activeElement.blur(),n.setState({isShown:!0},function(){n._createPlayer(t)})},fail:function(){!n.state.isShown&&n.props.loadingPanorama?n.props.setLoadingPanorama(null):n._player&&n._setCurrentPanoramaState()}})},n._setCurrentPanoramaState=function(){n._setCurrentPanoramaStateThrottled.cancel();var e=n._getPanoramaState();e&&(n.props.setCurrentPanorama(e),n.props.setLoadingPanorama(null))},n._logPatchedMetrics=function(e){var t;null===(t=n._playerAnalyticsRef.current)||void 0===t||t.logEvent("patch_metrics",e)},n._patchedMetricsError=function(e){var t;null===(t=n._playerAnalyticsRef.current)||void 0===t||t.logEvent("patch_metrics_error",{message:e.message})},n._createPlayer=function(e){var t=n.props,a=t.loadingPanorama,r=t.currentPanorama,o=t.performanceInitStartTime,i=a||r,s=i&&i.direction||n._calculateDirection(e)||"auto",c=i&&i.span||"auto";n._createPlayerAction=d.a.create(e.createPlayer(n._playerContainer.current,{direction:s,span:c,controls:[],hotkeysEnabled:!0,copyrightVisible:!1,copyrightLogoVisible:!1,suppressMapOpenBlock:!0,autoFitToViewport:"none"}),{success:function(e){b(o,e,n._logPatchedMetrics,n._patchedMetricsError),n._setupPlayer(e),n.setState({isLoaded:!0}),n._setCurrentPanoramaState(),n._reachMetrikaGoal(),n._checkZoomRange(),n._setPanoramaName()},fail:function(e){E(JSON.stringify(e)),n._playerAnalyticsRef.current&&n._playerAnalyticsRef.current.logEvent("error",{message:e.message}),n._destructPlayerView()}})},n._calculateDirection=function(e){var t=n.props;if(!(t.loadingPanorama&&"point"in t.loadingPanorama))return null;var a=e.getPosition().slice(0,2),r=Object(o.a)(t.loadingPanorama.point,a),s=n._player&&n._player.getPanorama().getPosition().slice(0,2);return[Object(i.a)(r>g||!s?a:s,t.loadingPanorama.point),0]},n._setupPlayer=function(e){n._player=e,n._player&&(n._eventsGroup=n._player.events.group().add("destroy",n._onPlayerDestroy).add("error",n._onPlayerError).add("directionchange",n._onPlayerDirectionChange).add("spanchange",n._onPlayerSpanChange).add("panoramachange",n._onPlayerPanoramaChange))},n._destructPlayer=function(){n._player&&(n._eventsGroup.removeAll(),n._player.destroy(),n._player=null)},n._destructPlayerView=function(){n.props.close()},n._onPlayerDestroy=function(){n._playerAnalyticsRef.current&&n._playerAnalyticsRef.current.logEvent("click"),n._changeAnalyticsStateDebounced.cancel(),n._setCurrentPanoramaStateThrottled.cancel(),n._player=null,n._destructPlayerView()},n._onPlayerError=function(e){n._playerAnalyticsRef.current&&n._playerAnalyticsRef.current.logEvent("error",{message:e.get("error").message}),n._destructPlayer(),n._destructPlayerView()},n._onPlayerDirectionChange=function(){n._closeLoading(),n._changeAnalyticsStateDebounced(),n._setCurrentPanoramaStateThrottled()},n._onPlayerSpanChange=function(){n._closeLoading(),n._changeAnalyticsStateDebounced(),n._setCurrentPanoramaStateThrottled(),n._checkZoomRange()},n._onPlayerPanoramaChange=function(){n._closeLoading(),n._changeAnalyticsState(),n._setCurrentPanoramaState(),n._reachMetrikaGoal(),n._setPanoramaName()},n._getPanoramaState=function(){if(n._player){var e=n._player.getPanorama(),t=e.metadata;return{isAir:!!e.getLayer&&"yandex#airPanorama"===e.getLayer(),point:e.getPosition().slice(0,2),direction:n._player.getDirection(),span:n._player.getSpan(),timestamp:t&&t.get("Data").timestamp,historicalPanoramas:t&&t.get("Annotation").HistoricalPanoramas}}return null},n._reachMetrikaGoal=function(){if(n._player){var e=n._player.getPanorama();e.getLayer&&("yandex#airPanorama"===e.getLayer()?f.a.reachGoal("pano_sta"):f.a.reachGoal("pano_stv"))}},n._changeAnalyticsState=function(){if(n._changeAnalyticsStateDebounced.cancel(),n._playerAnalyticsRef.current){var e=n._getPanoramaState();e&&n._playerAnalyticsRef.current.changeState(e)}},n._closeLoading=function(){n.state.isLoading&&n.setState({isLoading:!1})},n._checkZoomRange=function(){if(n._player){var e=n._player.getSpan(),t=n._player.getMinSpan(),a=n._player.getMaxSpan(),r=s.a;n.setState({disabledZoomIn:r(e,t),disabledZoomOut:r(e,a)})}},n._setPanoramaName=function(){if(n._player){var e=n._player.getPanorama();n.setState({name:e.getName()})}},n._onZoomIn=function(){n._player&&n._player.zoomIn()},n._onZoomOut=function(){n._player&&n._player.zoomOut()},n.state={isShown:!1,isLoading:!0,disabledZoomIn:!1,disabledZoomOut:!1,name:"",isLoaded:!1},n._fitToViewportDebounced=Object(c.a)(n._fitToViewport,200),n._setCurrentPanoramaStateThrottled=Object(l.a)(n._setCurrentPanoramaState,700),n._changeAnalyticsStateDebounced=Object(c.a)(n._changeAnalyticsState,200),n}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.loadingPanorama,n=e.currentPanorama,a=t||n;a&&this._showPanorama(a)},n.componentDidUpdate=function(e){var t=this.props;t.loadingPanorama&&!e.loadingPanorama&&this._showPanorama(t.loadingPanorama),t.isMinimapExpanded!==e.isMinimapExpanded&&this._fitToViewport()},n.componentWillUnmount=function(){d.a.cancel(this._panoramaDataLoadAction),d.a.cancel(this._createPlayerAction),this._fitToViewportDebounced.cancel(),this._setCurrentPanoramaStateThrottled.cancel(),this._changeAnalyticsStateDebounced.cancel(),this._destructPlayer()},n.render=function(){var e=this.state;if(!e.isShown)return null;var t=this.props,n=!1;return t.loadingPanorama?n=Boolean("isAir"in t.loadingPanorama&&t.loadingPanorama.isAir):t.currentPanorama&&(n=Boolean("isAir"in t.currentPanorama&&t.currentPanorama.isAir)),r.createElement(y.a,{name:"panorama_player",nodeState:{type:n?"air":"street"},nodeRef:this._playerAnalyticsRef},t.children({isLoading:e.isLoading,disabledZoomIn:e.disabledZoomIn,disabledZoomOut:e.disabledZoomOut,name:e.name,onZoomIn:this._onZoomIn,onZoomOut:this._onZoomOut}),r.createElement("div",{className:C(),ref:this._playerContainer}),r.createElement(_.a,{type:"resize",listener:this._fitToViewportDebounced}),this.state.isLoaded?r.createElement(v.a,{type:"panorama_page"}):null)},t}(r.Component);t.a=Object(m.b)(k)},2768:function(e,t,n){"use strict";var a=n(13),r=(n(2199),n(4)),o=n(9),i=n(7),s=n(15),c=n(255),l=n(43),u=n(8),m=n(2201),d=n(6),p=(n(2205),n(22)),f=Object(i.a)("panorama-history-control"),h=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._target=r.createRef(),t._getItems=function(){var e=t.props.currentPanorama;return e.historicalPanoramas?e.historicalPanoramas.map(function(e){return{id:e.Connection.oid,text:e.Connection.name,timestamp:e.timestamp}}).sort(function(e,t){return t.timestamp-e.timestamp}):[]},t._onItemClick=function(e,n){t.props.popupProps.onClose(),t.props.onChange(e,n)},t._isCurrentItem=function(e){return e.timestamp===t.props.currentPanorama.timestamp},t._renderPopup=function(e){var n=t.props.popupProps;return r.createElement(p.a,Object(a.a)({type:"map-hint",offset:{main:12,side:-34},showArrow:!1,getTarget:function(){return t._target.current},position:"bottom-left"},n),r.createElement(u.a,{name:"panorama_history_selector"},r.createElement("div",{className:f("selector")},e.map(function(e,n){return r.createElement(u.a,{key:e.id,name:"item",nodeState:{year:e.text},logClick:!0},r.createElement("div",{className:f("item",{selected:t._isCurrentItem(e)}),onClick:function(){return t._onItemClick(e.id,0===n?void 0:e.timestamp)}},t._isCurrentItem(e)?r.createElement("div",{className:f("item-icon")}):null,e.text))}))))},t}return Object(d.a)(t,e),t.prototype.render=function(){var e=this.props;if(!e.currentPanorama.timestamp)return null;var t=this._getItems(),n=t.find(this._isCurrentItem),o=t.length<=1;return r.createElement("div",null,r.createElement(u.a,{name:"panorama_history_control",logClick:!0},r.createElement(s.a,Object(a.a)({view:"air",size:"medium",tick:"triangle",flippedTick:e.popupProps.isShown,disabled:o,ref:this._target},o?void 0:e.buttonProps),n?n.text:null)),this._renderPopup(t))},t}(r.Component),y=n(2207),v=n(991),b=n(11),_=n(2217),g=n.n(_),E=(n(2218),Object(i.a)("panorama-controls-view"));t.a=Object(o.b)(function(e){var t=e.currentPanorama,n=e.onHistoryChange,o=e.onCloseClick;e.config;return r.createElement(c.a,null,function(e){return r.createElement("div",{className:E()},t?r.createElement("div",{className:E("history")},r.createElement(h,Object(a.a)({currentPanorama:t,onChange:n},e("history")))):null,r.createElement("div",{className:E("group")},r.createElement(v.a,null,r.createElement(m.a,e("share")),r.createElement(y.a,e("feedback")))),r.createElement("div",{className:E("close")},r.createElement(l.a,{text:"Закрыть",position:"bottom-left",isAir:!0},r.createElement(u.a,{name:"close_control",logClick:!0},r.createElement(s.a,{view:"air",size:"medium",icon:r.createElement(b.a,{url:g.a}),onClick:o})))))})})},2802:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(194),r=n(232);function o(e,t){var n=Object(a.a)(t[0]-e[0]),o=Object(a.a)(e[1]),i=Object(a.a)(t[1]);return Object(r.a)(Math.atan2(Math.sin(n)*Math.cos(i),Math.cos(o)*Math.sin(i)-Math.sin(o)*Math.cos(i)*Math.cos(n))%(2*Math.PI))}},357:function(e,t,n){"use strict";n(467);var a=n(4),r=n(7),o=n(40),i=Object(r.a)("feedback-dialog");t.a=function(e){var t=e.isOpen,n=e.onClose,r=e.title,s=e.notification,c=e.children;return a.createElement(o.default,{isOpen:t,onClose:n,showCloseButton:!0},a.createElement("div",{className:i()},r?a.createElement("div",{className:i("title")},r):null,s?a.createElement("div",{className:i("notification"),dangerouslySetInnerHTML:{__html:s}}):null,c))}},358:function(e,t,n){"use strict";n(469);var a=n(4),r=n(7),o=n(15),i=n(8),s=n(471),c=n.n(s),l=n(472),u=n.n(l),m={cat:c.a,"master-cat":u.a},d=Object(r.a)("feedback-message-view");t.a=function(e){var t=e.view,n=void 0===t?"cat":t,r=e.submitStatus,s=e.message,c=e.title,l=e.buttonText,u=e.onClose;return a.createElement(i.a,{name:"feedback_final_message"},a.createElement("div",{className:d()},r?a.createElement(i.a,{name:"submit_status",nodeState:{submitStatus:r}}):null,a.createElement("img",{className:d("logo",{view:n}),src:m[n]}),a.createElement("div",{className:d("title")},c),a.createElement("div",{className:d("message")},s),a.createElement("div",{className:d("button")},a.createElement(i.a,{name:"ok",logClick:!0},a.createElement(o.a,{view:"primary",size:"medium",onClick:u},l||"Продолжить")))))}},40:function(e,t,n){"use strict";n.r(t);var a=n(6),r=(n(56),n(4)),o=n(7),i=n(28),s=n(80),c=n(9),l=n(53),u=n(31),m=n(52),d=n(8),p=Object(o.a)("dialog"),f=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._container=r.createRef(),t._ref=r.createRef(),t._focusContainer=function(){if(t._container.current&&(!window.document.activeElement||!t._container.current.contains(window.document.activeElement))){var e=t._ref.current.scrollTop;t._container.current.focus(),t._ref.current.scrollTop=e}},t._onClose=function(){t.props.onClose()},t._onMouseDown=function(e){var n=e.currentTarget,a=!!(n.scrollHeight>n.offsetHeight)&&n.offsetWidth===n.clientWidth?15:0;e.target===e.currentTarget&&e.clientX+a<e.currentTarget.clientWidth&&t._onClose()},t._onScroll=function(){var e=t._ref.current,n=e.clientHeight+e.scrollTop>=e.scrollHeight;t.props.onScrollToEnd&&n&&t.props.onScrollToEnd()},t._renderClose=function(){if(!t.props.showCloseButton)return null;var e=Boolean(!1);return r.createElement(d.a,{name:"close",useParentState:!0,logClick:!0},r.createElement(u.a,{onClick:t._onClose,offset:e?"small":"large",circle:!0,usePortal:!1}))},t._renderContainer=function(){var e=t.props,n=Boolean(!1);return r.createElement("div",{className:p("container"),ref:t._container,tabIndex:1},r.createElement(s.a,{handlers:{key:l.a.ESC,callback:t._onClose,allowInEditable:!0},stopPropagation:!0}),r.createElement("div",{className:p("content",{"with-title":n})},n?r.createElement(i.a,{selector:".body"},r.createElement("div",{className:p("title")},e.mobileTitle)):null,t._renderClose(),e.children))},t._renderDialog=function(){var e=t.props;return r.createElement(d.a,{name:"dialog",useParentState:!0,logClick:!0},r.createElement(r.Fragment,null,r.createElement("div",{className:p({transparent:e.transparent,fullscreen:e.fullscreen,"fit-mobile-content":e.fitMobileContent}),style:e.zIndex?{zIndex:e.zIndex}:void 0,ref:t._ref,onMouseDown:t._onMouseDown,onTouchMove:function(e){return e.preventDefault()},onScroll:t.props.onScrollToEnd?t._onScroll:void 0},t._renderContainer()),r.createElement("div",{className:p("paranja"),style:e.zIndex?{zIndex:e.zIndex-1}:void 0})))},t}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.isOpen&&this._focusContainer()},n.componentDidUpdate=function(e){!e.isOpen&&this.props.isOpen&&this._focusContainer()},n.render=function(){var e=this.props,t=e.isOpen?this._renderDialog():null;return e.inline?r.createElement(m.a,null,t):r.createElement(i.a,{selector:".body"},r.createElement(m.a,null,t))},t}(r.Component);t.default=Object(c.b)(f)},405:function(e,t,n){"use strict";var a=n(6),r=n(4),o=n(9),i=n(238),s=(n(461),n(7)),c=n(8),l=n(15),u=Object(s.a)("feedback-form"),m=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onSubmit=function(e){e.preventDefault();var n=t.props,a=n.isValid,r=n.onSubmit;a&&r(e)},t}return Object(a.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.label,n=e.children,a=e.isValid,o=e.onCancel;return r.createElement("form",{className:u(),onSubmit:this._onSubmit},t?r.createElement("div",{className:u("label")},t):null,n,r.createElement("div",{className:u("buttons")},r.createElement("div",{className:u("submit")},r.createElement(c.a,{name:"submit",logClick:!0},r.createElement(l.a,{disabled:!a,type:"submit",view:"primary",size:"small"},"Отправить"))),r.createElement("div",{className:u("cancel")},r.createElement(c.a,{name:"cancel",logClick:!0},r.createElement(l.a,{view:"secondary-blue",size:"small",onClick:o},"Отменить")))))},t}(r.Component),d=(n(463),n(156)),p=Object(s.a)("feedback-textarea-field"),f=function(e){var t=e.stateName,n=e.label,a=e.onChange,o=e.value,i=void 0===o?"":o,s=e.autoFocus,c=e.placeholder,l=e.labelPostfix,u=void 0===l?":":l,m=e.resizeable;return r.createElement("div",{className:p({name:t})},r.createElement("label",{className:p("label")},n,u),r.createElement(d.a,{size:"l",rows:3,onChange:a,value:i,autoFocus:s,placeholder:c,resizeable:m}))},h=(n(465),n(101)),y=Object(s.a)("feedback-input-field"),v=function(e){var t=e.label,n=e.stateName,a=e.value,o=void 0===a?"":a,i=e.onChange,s=e.autoFocus,c=e.placeholder,l=e.showClear,u=e.labelPostfix,m=void 0===u?":":u,d=e.type,p=e.autoComplete;return r.createElement("div",{className:y({name:n})},r.createElement("label",{className:y("label")},t,m),r.createElement(h.a,{view:"stroke",onChange:i,value:o,autoFocus:s,placeholder:c,showClear:l,type:d,autoComplete:p}))},b=function(e){function t(t){var n;(n=e.call(this,t)||this)._onSubmit=function(e){var t=n.props,a=t.hideContactFields,r=t.onSubmit;e.preventDefault(),r(a?{comment:n.state.comment}:n.state)},n._isFormValid=function(){var e=n.state,t=e.comment,a=e.email;return i.h(t)&&(n.props.hideContactFields||i.a(a))};var a=t.config.authorization||{},r=a.fullName,o=void 0===r?"":r,s=a.email,c=void 0===s?"":s;return n.state={comment:"",name:o,email:c},n}return Object(a.a)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.formLabel,a=void 0===n?"":n,o=t.commentLabel,i=t.autoFocus,s=t.onCancel,c=t.hideContactFields,l=this.state,u=l.comment,d=l.name,p=l.email;return r.createElement(m,{label:a,isValid:this._isFormValid(),onCancel:s,onSubmit:this._onSubmit},r.createElement(f,{onChange:function(t){return e.setState({comment:t})},label:o,value:u,autoFocus:i,stateName:"comment",resizeable:!0}),c?null:r.createElement(r.Fragment,null,r.createElement(v,{onChange:function(t){return e.setState({name:t})},label:"Ваше имя",value:d,stateName:"username"}),r.createElement(v,{onChange:function(t){return e.setState({email:t})},label:"Ваш e-mail (обязательно)",value:p,stateName:"email"})))},t}(r.Component);t.a=Object(o.b)(b)},461:function(e,t,n){},463:function(e,t,n){},465:function(e,t,n){},467:function(e,t,n){},469:function(e,t,n){},471:function(e,t,n){e.exports=n.p+"_/3ba951336906edc2a90ef2894bac5e7a.svg"},472:function(e,t,n){e.exports=n.p+"_/22c1e477f40c183875e46adc6e379e76.svg"},556:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(6),o=n(4),i=n(169),s=n(18),c=n(9),l=n(357),u=n(405),m=n(358),d=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onClose=function(){n.props.updateDialog(null)},n._onComplaintSubmit=function(e){var t=n.props,r=t.config,o=t.updateDialog,c=Object(a.a)({subject:"[panorama] "+"Сервис не работает"},e);n._sendAction=s.a.create(i.a.sendFeedback(c,r),{success:function(){return n.setState({submitStatus:"sent"})},fail:function(){return n.setState({submitStatus:"fail"})}}),o("submitted-complaint")},n.state={},n}Object(r.a)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){s.a.cancel(this._sendAction)},n.render=function(){var e=this.props,t=e.config,n=e.dialog,a=this.state.submitStatus,r=t.bunker.feedbackInfo;return o.createElement(o.Fragment,null,o.createElement(l.a,{title:"Сообщить об ошибке",isOpen:"complaint"===n,onClose:this._onClose,notification:r&&r.panorama},o.createElement(u.a,{commentLabel:"Опишите ситуацию",autoFocus:!t.uatraits.isMobile,onSubmit:this._onComplaintSubmit,onCancel:this._onClose})),o.createElement(l.a,{title:"Нарушение конфиденциальности",isOpen:"break-confidentiality"===n,onClose:this._onClose},o.createElement(u.a,{commentLabel:"Опишите ситуацию",autoFocus:!t.uatraits.isMobile,onSubmit:this._onComplaintSubmit,onCancel:this._onClose})),o.createElement(l.a,{isOpen:"submitted-complaint"===n,onClose:this._onClose},o.createElement(m.a,{view:"master-cat",title:"Спасибо за сообщение!",message:"Оно поможет сделать Яндекс.Карты лучше.",onClose:this._onClose,submitStatus:a})))},t}(o.Component);t.default=Object(c.b)(d)},56:function(e,t,n){},626:function(e,t,n){"use strict";n.d(t,"c",function(){return d}),n.d(t,"a",function(){return p}),n.d(t,"b",function(){return f}),n.d(t,"d",function(){return h}),n.d(t,"e",function(){return y});var a=n(10),r=n(108),o=n.n(r),i=n(2779),s=n(21),c=n(16),l=n(30),u=n(79),m={utm_medium:"mapframe",utm_source:"maps"};function d(e){var t,n=e.config,r=c.h(e,"orgpage"),d=c.h(e,"search-result"),p=c.h(e,"search"),f=(null==r?void 0:r.result)||(null==d?void 0:null===(t=d.response)||void 0===t?void 0:t.items[0]),h="business"===(null==f?void 0:f.type)?f:void 0;return(function(e,t){if(t){var n={title:t.title,url:s.c(t,{},e)},r=t.region;if(t.categories&&r&&r.names){var o=t.categories.slice(0,2).map(function(t){return{title:(function(params){return params.category+" "+params.preposition+" "+params.prepositional;})(Object(a.a)(Object(a.a)({},r.names),{},{category:Object(i.a)(t.name)})),url:s.e(t,r,e)}});return[n].concat(o)}return[n]}}(n,h)||function(e,t){var n="TEXT"===(null==t?void 0:t.request.searchType)&&l.F(t)&&t.results.items.length>1&&"business"===t.results.items[0].type?t.results.items[0]:void 0,r=null==n?void 0:n.region;if(r&&r.names.nominative){var o={title:r.names.nominative,url:s.r(r,e)},i=l.F(t)?t.request.displayText||t.results.requestCorrectedQuery:void 0;return i?[{title:(function(params){return params.category+" "+params.preposition+" "+params.prepositional;})(Object(a.a)(Object(a.a)({},r.names),{},{category:i})),url:s.u(i,r,e)},o]:[o]}}(n,p)||function(e){var t=e.mapRegion,n=e.config,a=t?{title:t.names.nominative,url:s.r(t,n)}:{title:"Яндекс.Карты",url:n.baseUrl},r=n.baseUrl+Object(u.a)(e,{format:"seo"});return r!==a.url?[a,{title:document.title,url:r}]:[a]}(e)).map(function(e){return function(e,t){var n=e.url.split("?"),r=n[0],i=n[1],c=o.a.parse(i||"");return Object(a.a)(Object(a.a)({},e),{},{url:s.x(t.origin+r,Object(a.a)(Object(a.a)({},c),m))})}(e,n)})}function p(e,t,n){var a='<iframe src="'+f(e,t)+'" width="560" height="400" frameborder="1" allowfullscreen="true" style="position:relative;"></iframe>';return 0===n.length?a:'<div style="position:relative;overflow:hidden;">'+n.map(function(e,t){return'<a href="'+e.url+'" style="color:#eee;font-size:12px;position:absolute;top:'+14*t+'px;">'+e.title+"</a>"}).join("")+(a||"")+"</div>"}function f(e,t,n){return e.includes("/covid19")?s.a("/covid19?embed=covid-map",t):s.x(t.hosts.mapFrame+"v1"+e,n||{})}function h(e,t){var n;return('\n        <div style="width:560px;height:800px;overflow:hidden;position:relative;">\n            <iframe style="\n                width:100%;\n                height:100%;\n                border:1px solid #e6e6e6;\n                border-radius:8px;\n                box-sizing:border-box\n            " src="'+y(e.id)+'"></iframe>\n            <a href="'+s.a("/"+s.c(e),t)+'" target="_blank" style="\n                box-sizing:border-box;\n                text-decoration:none;\n                color:#b3b3b3;\n                font-size:10px;\n                font-family:YS Text,sans-serif;\n                padding:0 20px;\n                position:absolute;\n                bottom:8px;\n                width:100%;\n                text-align:center;\n                left:0\n            ">\n                '+(function(params){return params.name+(params.genitive?" на карте "+params.genitive:"")+" — Яндекс.Карты";})(Object(a.a)({name:e.title},null===(n=e.region)||void 0===n?void 0:n.names))+"\n            </a>\n        </div>\n    ").replace(/\n/g,"").replace(/ {4}/g,"")}function y(e){return"https://yandex.ru/maps-reviews-widget/"+e+"?comments"}},77:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"f",function(){return l}),n.d(t,"e",function(){return c}),n.d(t,"g",function(){return m}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return d});var a=n(2779),r={fax:"факс",phone:"тел.","phone-fax":"тел./факс"},o={ru:{countryCode:"+7 ",phonePlaceholder:"+7 XXX XXX XX XX",phoneFormat:"923 456 78 90",phoneMask:"123 *** ** 00"},kz:{countryCode:"+7 ",phonePlaceholder:"+7 XXX XXX XX XX",phoneFormat:"923 456 78 90",phoneMask:"123 *** ** 00"},ua:{countryCode:"+380 ",phonePlaceholder:"+380 XX XXX XX XX",phoneFormat:"44 123 45 67",phoneMask:"12 *** ** 00"},tr:{countryCode:"+90 ",phonePlaceholder:"+90 XXX XXX XXXX",phoneFormat:"123 456 7890",phoneMask:"123 *** ** 00"},by:{countryCode:"+375 ",phonePlaceholder:"+375 XX XXX XXXX",phoneFormat:"29 456 7890",phoneMask:"123 *** ** 00"},uz:{countryCode:"+998 ",phonePlaceholder:"+998 XX XXX XXXX",phoneFormat:"35 111 2233",phoneMask:"35 *** ** 00"}};function i(e){return Object.values(o).find(function(t){return t&&e.startsWith(t.countryCode.replace(/\s/,""))})}function s(e){return o[e]}function c(e,t,n){var a=(void 0===n?{}:n).useRealty,r=void 0===a||a,o=e.phones||[],i=e.realty;return i&&i.company.phone&&r&&!e.advert&&(o=[{number:i.company.phone,counter:i.company.phoneCounter+"&source=map&crc="+t.xscriptCsrfToken,type:"phone",info:"Офис продаж"}]),o}function l(e){return r[e]||e}function u(e,t,n){void 0===n&&(n="");var a=e.slice(n.trim().length).replace(/\D/g,"").match(/\d/g)||[],r=t.split(/\d/);return n&&r.pop(),n+r.map(function(e,t){return a[t]&&e+a[t]}).join("")}function m(e,t,n){return void 0===n&&(n=""),n+e.slice(n.length).replace(/./g,function(e,n){return"*"===t[n]?"*":e})}function d(e,t){var n=e.info,r=e.type,o="fax"===r?"факс":"phone-fax"===r?"факс":void 0;return Object(a.a)(n?o?n+" ("+o+")":n:o)}}}]);