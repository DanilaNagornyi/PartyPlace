(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["map-features"],{1004:function(e,t,n){"use strict";n.r(t);var o=n(13),r=n(6),a=n(4),i=n(12),s=n(2797),c=n(252),l=n(17),u=n(9),d=n(23),p=n(121),m=n(115),h=n(147),f=n(55),v=n(959),b=n(16),E=n(457),k=n(86),_=n(61),g=4,y=300,C=800,w=2,S=[{id:"what-is-here",icon:"about",text:"Что здесь?"},{id:"route-to-here",icon:"route-to",text:"Маршрут сюда"},{id:"route-from-here",icon:"route-from",text:"Маршрут отсюда"},{id:"add-object",icon:"add-place",text:"Добавить объект"}],L={id:"enable-ruler",icon:"ruler",text:"Линейка"},R={id:"map-edit",icon:"nmap",text:"Редактировать карту"},T={openCard:p.a.openCard,buildRouteTo:m.a.buildRouteTo,buildRouteFrom:m.a.buildRouteFrom,switchRuler:d.a.switchRuler,updateRuler:d.a.updateRuler,openAddObjectFeedback:_.a.openAddObjectFeedback,openMapEditFeedback:_.a.openMapEditFeedback},M=Object(l.a)(i.b(function(e){b.h(e,"routes");return{isPhone:!1,canShow:!e.config.query.embed&&!0,mapLocation:e.map.location,ruler:e.ruler,isRulerBlocked:Object(E.a)(e),isMapEditing:e.map.isEditing}},T),u.b),N=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onDocumentMousedown=function(){n._canBeShown=n.props.canShow},n._onMouseUp=function(e,t,o){o.button===w&&!n._longTapTimer&&n._canBeShown&&(n._rightClickTimer?(clearTimeout(n._rightClickTimer),n._rightClickTimer=void 0):n._rightClickTimer=window.setTimeout(function(){n._open(t.coordinates,t.screenCoordinates),n._rightClickTimer=void 0},y))},n._onTouchStart=function(e,t){n._canBeShown&&(n._touchFrom=t.screenCoordinates,n._touchTo=n._touchFrom,window.clearTimeout(n._longTapTimer),n._longTapTimer=window.setTimeout(function(){n._longTapTimer=void 0,Object(s.a)(n._touchTo,n._touchFrom)<=g&&n._open(t.coordinates,t.screenCoordinates)},C))},n._onContainerTouchMove=function(e){n._touchTo=e},n._onTouchEnd=function(e,t,o){n.state.isShown&&o.preventDefault(),window.clearTimeout(n._longTapTimer),n._longTapTimer=void 0},n._onUpdate=function(){window.clearTimeout(n._longTapTimer),n._longTapTimer=void 0},n._open=function(e,t){n.props.canShow&&n.setState({isShown:!0,coordinates:e,screenCoordinates:t})},n._close=function(){n.setState({isShown:!1})},n._onItemClick=function(e){n._close();var t=n.state.coordinates,o=n.props,r=o.mapLocation.zoom;switch(e.id){case"what-is-here":o.openCard({coordinates:t,from:"whatshere",zoom:r},{mobileViewState:"mini"});break;case"route-to-here":o.buildRouteTo({coords:t,value:""});break;case"route-from-here":o.buildRouteFrom({coords:t,value:""});break;case"map-edit":o.openMapEditFeedback({coordinates:t,context:{formContextId:"map_context"}});break;case"enable-ruler":o.switchRuler(),0===o.ruler.points.length&&o.updateRuler([{coordinates:t,distance:0,showBalloon:!1}]);break;case"add-object":o.openAddObjectFeedback({coordinates:t,type:"object/add",context:{formContextId:"toponym.add_object_to_map"}})}},n._getEventHandlers=function(e){var t={onMouseUp:n._onMouseUp};if(n.props.config.uatraits.isMobile){var o=e.has.touch;t[o?"onTouchStart":"onPointerDown"]=n._onTouchStart,t[o?"onContainerTouchMove":"onContainerPointerMove"]=n._onContainerTouchMove,t[o?"onTouchEnd":"onPointerUp"]=n._onTouchEnd,t[o?"onTouchCancel":"onPointerCancel"]=n._onTouchEnd}return t},n._renderMenu=function(){var e=n.props,t=n.state;if(!t.screenCoordinates)return null;var o=[].concat(S);return e.config.hosts.nmaps&&o.push(R),e.isPhone||e.ruler.isEnabled||e.isRulerBlocked||o.push(L),a.createElement(h.a,{name:"context_menu"},a.createElement(v.a,{key:t.coordinates.join(","),isPhone:!1,isShown:t.isShown,coordinates:t.screenCoordinates,items:o,onItemClick:n._onItemClick,onClose:n._close,onScroll:"reposition"}))},n.state={isShown:!1,coordinates:null,screenCoordinates:null},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.document.addEventListener("mousedown",this._onDocumentMousedown,!0),window.document.addEventListener("touchstart",this._onDocumentMousedown,!0)},n.componentDidUpdate=function(e){if(this.props.mapLocation!==e.mapLocation){if(!this.state.coordinates)return this._close();var t=Object(c.a)(this.props.mapLocation.center,this.props.mapLocation.zoom),n=Object(c.a)(e.mapLocation.center,e.mapLocation.zoom);Object(s.a)(t,n)>=g&&this._close()}},n.componentWillUnmount=function(){window.clearTimeout(this._rightClickTimer),window.clearTimeout(this._longTapTimer),window.document.removeEventListener("mousedown",this._onDocumentMousedown,!0),window.document.removeEventListener("touchstart",this._onDocumentMousedown,!0)},n.render=function(){var e=this;return this.props.isMapEditing?null:a.createElement(a.Fragment,null,this._renderMenu(),a.createElement(k.a,null,function(t){return a.createElement(f.b,Object(o.a)({layer:"any"},e._getEventHandlers(t),{onUpdate:e._onUpdate}))}))},t}(a.Component);t.default=M(N)},1005:function(e,t,n){"use strict";n.r(t);var o=n(10),r=n(6),a=n(4),i=n(12),s=n(23),c=n(17),l=n(9),u=n(18),d=n(456),p=n(2809),m=n(2794),h={setRegion:s.a.setRegion,setEmergencyNotifications:s.a.setEmergencyNotifications},f=Object(c.a)(i.b(function(e){return{region:e.mapRegion,mapLocation:e.map.location}},h),l.b),v=10,b=[.05,.05],E=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onLocationChange=function(){var e=n.props;if(e.mapLocation.zoom>=v){var t=n.state.knownBounds;if(t&&Object(p.a)(t,e.mapLocation.center))return;u.a.cancel(n._regionAction),n._regionAction=u.a.create(d.a.getLayer(Object(o.a)({layer:"geoalias"},e.mapLocation),e.config),{success:n._onLayerLoaded})}else n._updateRegion(void 0),e.setEmergencyNotifications(void 0),n.setState({knownBounds:void 0})},n._onLayerLoaded=function(e){var t=n.props,o=e&&e.region,r=o&&o.bounds||Object(m.a)({center:t.mapLocation.center,span:b});n.setState({knownBounds:r}),n._updateRegion(o),t.setEmergencyNotifications(null==e?void 0:e.notifications)},n._updateRegion=function(e){var t=n.props,o=e?e.id:null;(t.region?t.region.id:null)!==o&&t.setRegion(e)},n.state={knownBounds:t.region&&t.region.bounds},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.region||this._onLocationChange()},n.componentDidUpdate=function(e){e.mapLocation!==this.props.mapLocation&&this._onLocationChange()},n.componentWillUnmount=function(){u.a.cancel(this._regionAction)},n.render=function(){return null},t}(a.Component);E.displayName="GeoAliasesComponent",t.default=f(E)},1006:function(e,t,n){"use strict";n.r(t);var o=n(6),r=n(4),a=n.n(r),i=n(12),s=n(16),c=n(49),l=n(17),u=n(9),d=n(20),p=n(55),m=Object(d.a)({resolved:{},chunkName:function(){return"org-preview"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("org-preview").then(n.bind(null,1110))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var o=this.resolve(t);return n(o)},resolve:function e(){return 1110}}),h=Object(d.a)({resolved:{},chunkName:function(){return"stop-preview"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("stop-preview").then(n.bind(null,1179))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var o=this.resolve(t);return n(o)},resolve:function e(){return 1179}}),f=16,v=200,b=Object(l.a)(i.b(function(e){var t=s.h(e,"routes");return{mapType:e.map.type,openedStopUri:k(e),bookmarksHighlightedStopId:e.map.location.zoom>=f?e.masstransitBookmarks.highlightedStopId:null,shouldIgnoreRender:e.ruler.isEnabled||e.panoramas.isLayerEnabled||e.photos.isLayerEnabled||e.mrc.isLayerEnabled||e.map.isEditing||Boolean(t&&t.routePoints.some(function(e){return!e.coords}))}}),u.b),E=function(e){function t(t){var n;return(n=e.call(this,t)||this)._hidePreview=function(e){e?n._hidePreviewTimeout=window.setTimeout(function(){return n.setState({uri:void 0})},e):n.setState({uri:void 0})},n._cancelHidePreview=function(){window.clearTimeout(n._hidePreviewTimeout)},n._onDocumentClick=function(){n._hidePreview()},n._onMouseLeave=function(){n.setState({poiCoordinates:void 0});var e=c.o(n.state.uri),t=c.p(n.state.uri);if(e&&e!==n.state.hoveredPreviewUri){var o=n.props.config.experiments.ui.orgPoiHintsHoverable?v:0;n._hidePreview(o)}t&&!n.props.bookmarksHighlightedStopId&&n._hidePreview()},n._onMouseEnter=function(e){var t,o=n.props.config.experiments.ui.orgPoiHints||n.props.config.experiments.ui.orgPoiHintsHoverable;if(e&&"hotspot"===e.type){var r=o?c.o(e.feature.properties.uri):void 0,a=c.p(e.feature.properties.uri)||r;a&&e.feature.geometry&&"Point"===e.feature.geometry.type&&(n._cancelHidePreview(),n.setState({uri:a,poiCoordinates:null===(t=e.feature.geometry)||void 0===t?void 0:t.coordinates}))}},n._onOrgPreviewMouseEnter=function(){n._cancelHidePreview(),n.setState({hoveredPreviewUri:n.state.uri})},n._onOrgPreviewMouseLeave=function(){n.setState({hoveredPreviewUri:void 0}),n._hidePreview()},n.state={uri:t.config.query.mockPoiHoverPreviewUri},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props;t.bookmarksHighlightedStopId!==e.bookmarksHighlightedStopId&&this.setState({uri:t.bookmarksHighlightedStopId?c.c(t.bookmarksHighlightedStopId):void 0})},n.componentDidMount=function(){window.document.addEventListener("click",this._onDocumentClick)},n.componentWillUnmount=function(){window.document.removeEventListener("click",this._onDocumentClick),this._cancelHidePreview()},n.render=function(){var e=this.props,t=e.config;if(e.shouldIgnoreRender||t.uatraits.isMobile)return null;var n=this.state.uri;return r.createElement(r.Fragment,null,n&&c.m(n)&&n!==e.openedStopUri?r.createElement(h,{uri:n,key:n}):null,n&&c.j(n)?r.createElement(m,{uri:n,key:n,poiCoordinates:this.state.poiCoordinates,onMouseEnter:this._onOrgPreviewMouseEnter,onMouseLeave:this._onOrgPreviewMouseLeave}):null,r.createElement(p.b,{layer:"any",onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave}))},t}(r.Component);function k(e){var t=s.h(e,"masstransit");return t&&t.stops&&t.stops.data&&t.stops.data.id?c.c(t.stops.data.id):void 0}t.default=b(E)},1007:function(e,t,n){"use strict";n.r(t);var o=n(6),r=n(4),a=n(12),i=n(17),s=n(9),c=n(258),l=n(456),u=n(60),d=n(336),p=n(8),m=n(121),h=n(49),f={updateLayerAvailability:c.a.updateLayerAvailability,openCard:m.a.openCard},v=Object(i.a)(a.b(function(e){var t=e.parking,n=e.map;return{isLayerShown:t.isLayerShown,isLayerEnabled:t.isLayerEnabled,zoom:n.location.zoom,center:t.center}},f),Object(u.b)({shouldWait:!0}),s.b),b=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._analyticsRef=r.createRef(),t._checkLayer=function(){var e=t.props,n=l.a.checkStaticZoomRange("carparks",e.zoom,e.config);n!==e.isLayerEnabled&&e.updateLayerAvailability({isLayerEnabled:n,isLayerShown:!!n&&e.isLayerShown})},t._onHotspotClick=function(e,n){var o=t.props,r=e.properties.uri;if(r&&h.j(r)){var a,i=e.geometry&&e.geometry.coordinates||n.coordinates;if(o.openCard({coordinates:i,from:"poi",hotspotProperties:e.properties,uri:r}),t._analyticsRef.current)t._analyticsRef.current.logEvent("click",{uri:r,coordinates:i,type:null===(a=e.properties.vectorMetadata)||void 0===a?void 0:a.get("type")})}},t._shouldHover=function(e){return t.props.isLayerShown&&Boolean(e.properties.uri)},t}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._checkLayer()},n.componentDidUpdate=function(e){e.zoom!==this.props.zoom&&this._checkLayer()},n.render=function(){var e=this.props;return e.isLayerEnabled&&e.isLayerShown?r.createElement(p.a,{name:"parking_layer",nodeRef:this._analyticsRef},r.createElement(d.a,{layer:"carparks",onClick:this._onHotspotClick,shouldHover:this._shouldHover})):null},t}(r.Component);b.displayName="ParkingComponent",t.default=v(b)},102:function(e,t){},1104:function(e,t,n){"use strict";n.r(t);var o=n(6),r=(n(2508),n(4)),a=n(12),i=n(2796),s=n(23),c=n(7),l=n(0),u=n(8),d=n(22),p=n(79),m=n(21),h=n(457),f=n(61),v=n(168),b={openShare:s.a.openShare,switchRuler:s.a.switchRuler,openCommonFeedback:f.a.openCommonFeedback,openMapEditFeedback:f.a.openMapEditFeedback},E=a.b(function(e){var t=e.config,n=Object(p.a)(e,{format:"query"}),o={ll:Object(i.a)(e.map.location.center),z:e.map.location.zoom};return{printUrl:t.uatraits.isTablet?void 0:m.o(n,t),metroUrl:m.x(t.hosts.metro,o),apiUrl:t.apiManual.mapsApiUrl?t.apiManual.mapsApiUrl+"/?utm_source=sidesection&utm_medium=referral&utm_campaign=b2bpromo":void 0,isRulerEnabled:e.ruler.isEnabled,isRulerBlocked:Object(h.a)(e)}},b),k=Object(c.a)("map-tools-list"),_=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onRulerClick=function(e){e.stopPropagation(),t.props.switchRuler()},t._onPrintClick=function(){l.a.set("print_url",t.props.printUrl)},t._renderList=function(){var e=t.props;return r.createElement(u.a,{name:"tools_list"},e.showRuler?r.createElement(u.a,{name:"ruler",logClick:!0},r.createElement(v.a,{icon:"ruler",onClick:t._onRulerClick,active:e.isRulerEnabled,disabled:e.isRulerBlocked},"Линейка")):null,e.printUrl?r.createElement(u.a,{name:"print",logClick:!0},r.createElement(v.a,{icon:"printer",link:{href:e.printUrl,target:"_blank"},onClick:t._onPrintClick},"Печать")):null,r.createElement(u.a,{name:"share",logClick:!0},r.createElement(v.a,{icon:"share",onClick:e.openShare},"Поделиться")),r.createElement(u.a,{name:"metro",logClick:!0},r.createElement(v.a,{icon:"subway-fallback",link:{href:e.metroUrl,target:"_blank"}},"Схема метро")),e.apiUrl?r.createElement(u.a,{name:"maps_api",logClick:!0},r.createElement(v.a,{icon:"api-logo",link:{href:e.apiUrl,target:"_blank"}},"Карты для вашего сайта")):null,r.createElement(u.a,{name:"map_edit",logClick:!0},r.createElement(v.a,{icon:"edit-nofill",onClick:function(){return e.openMapEditFeedback({context:{formContextId:"map_controls"}})}},"Редактировать карту")),r.createElement(u.a,{name:"feedback",logClick:!0},r.createElement(v.a,{icon:"org-info",onClick:e.openCommonFeedback},"Сообщить об ошибке")))},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props;return r.createElement(d.a,e.popupProps,r.createElement("div",{className:k(),onClick:e.onContentClick},this._renderList()))},t}(r.Component);t.default=E(_)},1161:function(e,t,n){"use strict";n.r(t);var o=n(6),r=(n(2500),n(4)),a=n(12),i=n(7),s=n(17),c=n(8),l=n(23),u=n(22),d=n(43),p=n(102),m=n.n(p),h=n(109),f=n(314),v=n(220),b=n(274),E=n(625),k=n(258),_=n(139),g=n(457),y=(n(2502),["map","satellite","hybrid"]),C={hybrid:"Гибрид",map:"Схема",satellite:"Спутник"},w=Object(i.a)("map-layers-selector"),S=function(e){function t(t){var n;return(n=e.call(this,t)||this)._ref=r.createRef(),n._renderLayer=function(e){var t=n.props,o=e===t.layer,a={layer:e,selected:o};return r.createElement(c.a,{key:e,name:"layer",nodeState:a,logClick:!0},r.createElement("div",{className:w("layer",a),onClick:function(){return t.onChange(e)}},C[e]))},n._renderPlate=function(){var e=n.state.layerControlWidth;if(!e)return null;var t=n.props.layer,o=e*y.indexOf(t);return r.createElement("div",{className:w("plate"),style:{transform:"translateX("+o+"px)"}})},n.state={},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e,t,n=null===(e=this._ref)||void 0===e?void 0:null===(t=e.current)||void 0===t?void 0:t.scrollWidth;n&&this.setState({layerControlWidth:n/y.length})},n.render=function(){var e=this.props;return r.createElement("div",{className:w({size:e.size}),ref:this._ref},this._renderPlate(),y.map(this._renderLayer))},t}(r.Component),L=n(345),R=(n(2504),n(197)),T=(n(31),n(11)),M=n(182),N=n(114),O=n(164),P=(n(42),n(2506)),j=n.n(P),I={updateFolderTags:_.a.updateFolderTags},F=a.b(function(e){var t;return{config:e.config,rootFolder:e.bookmarks.rootFolder,checkedFoldersCount:null===(t=e.bookmarks.rootFolder)||void 0===t?void 0:t.children.filter(function(e){var t=e.tags;return null==t?void 0:t.includes(M.a.FOLDER_TAGS.SHOW_ON_MAP)}).length}},I),A=Object(i.a)("bookmarks-layers-menu-view"),D=F(function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onChange=function(e,n){var o=t.props,r=o.checkedFoldersCount;if(e||1!==r){var a=n.tags||[];e?a.push(M.a.FOLDER_TAGS.SHOW_ON_MAP):a=a.filter(function(e){return e!==M.a.FOLDER_TAGS.SHOW_ON_MAP}),o.updateFolderTags({folderId:n.id,tags:a})}},t._renderItem=function(e){var n,o=Boolean(null==e?void 0:null===(n=e.tags)||void 0===n?void 0:n.includes(M.a.FOLDER_TAGS.SHOW_ON_MAP)),a=t.props.config,i=Object(N.k)(e,a);return r.createElement("label",{className:A("item"),key:e.id},r.createElement(R.a,{id:e.id,checked:o,onChange:function(n){return t._onChange(n,e)}}),r.createElement("span",{className:A("text"),title:i},i))},t._renderHeader=function(){var e=t.props;return r.createElement("div",{className:A("header")},r.createElement("button",{className:A("back"),type:"button",onClick:e.onClose},r.createElement(T.a,{url:j.a})),r.createElement("div",{className:A("title")},"Закладки"),null)},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props;if(!e.rootFolder)return null;var t=e.rootFolder.children;return r.createElement("div",{className:A()},r.createElement(r.Fragment,null,this._renderHeader(),r.createElement("div",{className:A("body")},r.createElement(O.a,{onScroll:e.onScroll,width:"dynamic",cacheKey:"bookmarks-layers-menu"},t.map(this._renderItem)))))},t}(r.Component)),B=n(168),z=n(92),x=.2,U={updateMap:l.a.updateMap,toggleTrafficLayer:f.a.toggle,toggleMasstransitLayer:h.a.toggleLayer,toggleParkingLayer:k.a.toggleLayer,toggleBookmarksLayer:_.a.toggleLayer,showBookmarksLayer:_.a.showLayer,initBookmarksManager:_.a.initBookmarksManager,switchRuler:l.a.switchRuler,togglePanoramasLayer:v.a.toggleLayer,enableMrcLayer:L.a.enableLayer,disableMrcLayer:L.a.disableLayer},H=Object(s.a)(a.b(function(e){var t,n;return{config:e.config,type:e.map.type,trafficLevel:e.traffic.level,isTrafficLayerEnabled:e.traffic.isLayerEnabled,isMasstransitLayerShown:e.masstransit.isLayerShown,isMasstransitLayerEnabled:e.masstransit.isLayerEnabled,isMasstransitLayerEnabledOnAnotherZoom:e.masstransit.isLayerEnabledOnAnotherZoom,isParkingLayerShown:e.parking.isLayerShown,isParkingLayerEnabled:e.parking.isLayerEnabled,isBookmarksLayerShown:e.bookmarks.isLayerEnabled,isRulerEnabled:e.ruler.isEnabled,isRulerBlocked:Object(g.a)(e),isPanoramasLayerShown:e.panoramas.isLayerEnabled,isPanoramasLayerEnabled:e.panoramas.isStreetLayerAvailable||e.panoramas.isAirLayerAvailable,isMrcLayerEnabled:e.map.location.zoom>=((null===(t=e.config.layers.mrc)||void 0===t?void 0:t.zoomRange)&&(null===(n=e.config.layers.mrc)||void 0===n?void 0:n.zoomRange[0])||0),isMrcLayerShown:e.mrc.isLayerEnabled,areAdditionalLayersAvailable:!e.config.query.webview}},U)),W=Object(i.a)("map-layers-view"),q=function(e){function t(t){var n;return(n=e.call(this,t)||this)._isScrollOnTop=!0,n.componentDidUpdate=function(){n.props.config.authorization&&n.props.isShown&&n.props.initBookmarksManager()},n._onLayerChange=function(e){n.props.updateMap({type:e})},n._setDefaultView=function(){n._isScrollOnTop=!0,n.setState({view:"layers"})},n._onCloseBookmarks=function(){n.props;n._setDefaultView()},n._onParanjaHideEnd=function(){var e=n.state,t=n.props;"layers"!==e.view&&(n._setDefaultView(),t.onOpen&&t.onOpen())},n._onBookmarksMoreClick=function(e){n.props.isBookmarksLayerShown&&e.stopPropagation(),n.setState({view:"bookmarks"})},n._onScrollBookmarks=function(e){n._isScrollOnTop=e<=0},n._isNodeWithinStickyElement=function(e,t){return"sticky"===window.getComputedStyle(e).position||!(e===t||!e.parentElement)&&n._isNodeWithinStickyElement(e.parentElement,t)},n._isSwipeDisabled=function(e){var t=!n._isScrollOnTop;return t&&e.target?!n._isNodeWithinStickyElement(e.target,e.currentTarget):t},n._renderPopup=function(e){var t=n.props,o="bookmarks"===n.state.view;return r.createElement(u.a,{getTarget:t.getTarget,position:["bottom","bottom-left"],restrictPosition:!0,type:"transparent",offset:{main:12,side:0},showArrow:!1,isShown:t.isShown,onClose:t.onClose,onMouseEnter:t.onMouseEnter,onMouseLeave:o?void 0:t.onMouseLeave,onHideEnd:n._setDefaultView},r.createElement("div",{className:W("popup-wrapper")},e))},n._renderParanja=function(e){var t=n.props;return r.createElement(m.a,{isShown:t.isShown,onClose:t.onClose,onHideEnd:n._onParanjaHideEnd,swipeDisabled:n._isSwipeDisabled,swipeable:!0},e)},n._renderModeButtons=function(){var e=n.props,t=b.c(e.trafficLevel,x),o=e.isMasstransitLayerShown&&e.isMasstransitLayerEnabledOnAnotherZoom?"Увеличьте масштаб, чтобы увидеть движущийся транспорт":e.isMasstransitLayerShown&&!e.isMasstransitLayerEnabled?"Нет информации о движении автобусов в этой области карты":"Движущийся транспорт";return r.createElement("div",{className:W("modes")},r.createElement(c.a,{name:"traffic",nodeState:{checked:e.isTrafficLayerEnabled},logClick:!0},r.createElement(B.a,{icon:function(){return r.createElement(E.a,{enabled:e.isTrafficLayerEnabled,level:e.trafficLevel})},iconStyle:{backgroundColor:e.isTrafficLayerEnabled?t:void 0},active:e.isTrafficLayerEnabled,onClick:e.toggleTrafficLayer},"Пробки")),r.createElement(d.a,{text:o,position:"left",isDisabled:!e.isMasstransitLayerShown||e.isMasstransitLayerEnabled&&!e.isMasstransitLayerEnabledOnAnotherZoom,isAir:!0},r.createElement(c.a,{name:"masstransit",nodeState:{checked:e.isMasstransitLayerShown},logClick:!0},r.createElement(B.a,{icon:"bus",active:e.isMasstransitLayerShown,onClick:e.toggleMasstransitLayer},"Движущийся транспорт"))),r.createElement(d.a,{text:"Парковки можно включить только на крупных масштабах карты",position:"left",isDisabled:e.isParkingLayerEnabled||e.isParkingLayerShown,isAir:!0,hideOnClick:!1},r.createElement(c.a,{name:"parking",nodeState:{checked:e.isParkingLayerShown},logClick:!0},r.createElement(B.a,{icon:"parking",active:e.isParkingLayerShown,disabled:!e.isParkingLayerShown&&!e.isParkingLayerEnabled,onClick:e.toggleParkingLayer},"Парковки"))),r.createElement(c.a,{name:"mrc",nodeState:{checked:e.isMrcLayerEnabled},logClick:!0},r.createElement(B.a,{icon:"mirrors",active:e.isMrcLayerShown,disabled:!e.isMrcLayerShown&&!e.isMrcLayerEnabled,onClick:e.isMrcLayerShown?e.disableMrcLayer:e.enableMrcLayer},"Зеркала")),r.createElement(c.a,{name:"panoramas",nodeState:{checked:e.isPanoramasLayerShown},logClick:!0},r.createElement(B.a,{icon:"panorama",active:e.isPanoramasLayerShown,disabled:!e.isPanoramasLayerShown&&!e.isPanoramasLayerEnabled,onClick:e.togglePanoramasLayer},"Панорамы")))},n._renderBookmarkMore=function(){return n.props.config.authorization?r.createElement(c.a,{name:"bookmarks_more",logClick:!0},r.createElement("div",{className:W("bookmarks-more"),"aria-label":"Ещё",onClick:n._onBookmarksMoreClick},r.createElement(z.a,{name:"other",size:24,inline:!0}))):null},n._renderToolsButtons=function(){var e=n.props;return r.createElement("div",{className:W("tools")},r.createElement(c.a,{name:"bookmarks",nodeState:{checked:e.isBookmarksLayerShown},logClick:!0},r.createElement(B.a,{icon:"bookmark-filled",active:e.isBookmarksLayerShown,onClick:e.toggleBookmarksLayer,renderRightContent:n._renderBookmarkMore},"Закладки")),r.createElement(c.a,{name:"ruler",nodeState:{checked:e.isRulerEnabled},logClick:!0},r.createElement(B.a,{icon:"ruler",active:e.isRulerEnabled,disabled:e.isRulerBlocked,onClick:e.switchRuler},"Линейка")))},n._renderBookmarksMenu=function(){return r.createElement(c.a,{name:"bookmarks_layers_menu"},r.createElement(D,{onClose:n._onCloseBookmarks,onScroll:n._onScrollBookmarks}))},n._renderLayersMenu=function(){var e=n.props;return r.createElement(c.a,{name:"layers_panel"},r.createElement("div",{className:W()},r.createElement("div",{className:W("layers")},r.createElement(S,{layer:e.type,onChange:n._onLayerChange,size:"medium"})),e.areAdditionalLayersAvailable?r.createElement(r.Fragment,null,n._renderModeButtons(),n._renderToolsButtons()):null))},n.state={view:"layers"},n}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.state,t=(this.props,this._renderPopup);switch(e.view){case"bookmarks":return t(this._renderBookmarksMenu());case"layers":return t(this._renderLayersMenu())}},t}(r.Component);t.default=H(q)},1165:function(e,t,n){"use strict";n.r(t);var o=n(13),r=n(6),a=n(4),i=n(12),s=n(23),c=n(121),l=n(115),u=n(220),d=n(55),p=n(22),m=n(16),h=n(30),f=n(147),v=n(41),b=(n(1410),n(7)),E=n(664),k=n(124),_=n(413),g=n(117),y=n(8),C=n(11),w=n(54),S=n(259),L=n(1414),R=n.n(L),T=n(1415),M=n.n(T),N=Object(b.a)("whats-here-preview"),O={main:10,side:0},P=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._renderPanorama=function(){var e,n=null===(e=t.props.searchResults)||void 0===e?void 0:e.items[0],o=null==n?void 0:n.panorama;return n&&o?a.createElement("div",{className:N("panorama")},a.createElement(S.a,{panorama:o,view:"whatshere",onClick:t.props.onClose})):null},t._renderPopup=function(){var e=t.props,n=e.coordinates,o=e.zoom,r=e.searchResults,i=Object(v.a)(e,["coordinates","zoom","searchResults"]),s=null==r?void 0:r.items[0];if(!s)return a.createElement(_.a,{callback:i.onClose},a.createElement("div",null));var c=E.a.includes(s.kind)&&o>=16;return a.createElement(k.a,{coordinates:n,position:["top","bottom","left","right"],offset:O,onClose:i.onClose,showArrow:!1,isShown:!0},a.createElement(y.a,{name:"whatshere_preview"},a.createElement("div",{className:N()},a.createElement("div",{className:N("main")},a.createElement(y.a,{name:"title",logClick:!0},a.createElement("div",{className:N("info"),onClick:function(){return i.openWhatshere({coordinates:n,zoom:o,searchResults:r})}},a.createElement("div",{className:N("title")},s.title),a.createElement("div",{className:N("description")},s.description))),t._renderPanorama()),c?a.createElement("div",{className:N("links")},a.createElement(y.a,{name:"add_exact_address",logClick:!0},a.createElement("span",{className:N("add-object"),onClick:function(){return i.openAddObjectFeedback(n)}},"Добавить точный адрес"))):null,a.createElement("div",{className:N("line")}),a.createElement("div",{className:N("control")},a.createElement(y.a,{name:"route",logClick:!0},a.createElement("div",{className:N("control-route"),onClick:function(){return t.props.onRouteClick(s)}},a.createElement(C.a,{className:N("control-route-icon"),url:R.a}),"Маршрут")),a.createElement(y.a,{name:"nearby",logClick:!0},a.createElement("div",{className:N("control-search"),onClick:function(){return t.props.onSearchNearbyClick(s)}},a.createElement(C.a,{className:N("control-search-icon"),url:M.a}),"Искать рядом"))))))},t}return Object(r.a)(t,e),t.prototype.render=function(){var e,t=this.props,n=null===(e=t.searchResults)||void 0===e?void 0:e.items[0];return a.createElement(w.a,{coordinates:t.coordinates,nonInteractive:!0},this._renderPopup(),a.createElement("div",{className:N("placemark",{expanded:Boolean(n)})},a.createElement("div",{className:N("placemark-point")})),a.createElement(g.a,{type:"resize",listener:t.onClose}))},t}(a.Component),j=n(91),I=n(61),F={openCard:c.a.openCard,buildRouteTo:l.a.buildRouteTo,close:c.a.closeWhatsherePreview,updateWhatsherePreview:c.a.updateWhatsherePreview,setLoadingPanorama:u.a.setLoadingPanorama,setSearchFormType:s.a.setSearchFormType,searchNearby:j.a.searchNearby,openAddObjectFeedback:I.a.openAddObjectFeedback},A=i.b(function(e){var t=m.h(e,"routes");return{config:e.config,shouldIgnoreClick:e.ruler.isEnabled||e.panoramas.isLayerEnabled||e.photos.isLayerEnabled||e.map.isEditing||e.config.query.embed||Boolean(t&&t.routePoints.some(function(e){return!e.coords}))||e.mrc.isLayerEnabled||m.m(e.config),data:e.whatsherePreview,zoom:e.map.location.zoom}},F),D=function(e){function t(t){var n;return(n=e.call(this,t)||this)._mapAnalyticsRef=a.createRef(),n._canBeShown=!0,n._onDocumentMousedown=function(e){n.props.config.uatraits.isTouch&&"mousedown"===e.type||(n._canBeShown=!p.a.isShown())},n._onMapClick=function(e,t){var o=t.coordinates,r=n.props;if(!(r.shouldIgnoreClick||!n.state.handleMapClick||!n._canBeShown||p.a.isShown()||!1)){n._mapAnalyticsRef.current.logEvent("click");var a=r.zoom;0,n.setState({handleMapClick:!1}),r.updateWhatsherePreview({coordinates:o,from:"whatshere",zoom:a,origin:"whatshere"})}},n._onMapUpdate=function(){n.props.data&&n.props.close()},n._openWhatshere=function(e){var t,o=n.props;o.openCard({coordinates:e.coordinates,from:"whatshere",zoom:o.zoom},{response:null!==(t=e.searchResults)&&void 0!==t?t:void 0}),o.close()},n._onRouteClick=function(e){var t=n.props;t.buildRouteTo({value:e.title,coords:t.data.coordinates,searchResult:e}),t.close()},n._onSearchNearbyClick=function(e){n._openWhatshere(n.props.data);var t=h.l(e);n.props.searchNearby(t)},n._openAddObjectFeedback=function(e){var t=n.props;t.openAddObjectFeedback({type:"address/add",context:{formContextId:"toponym.building_without_address"},coordinates:e}),t.close()},n.state={handleMapClick:!0},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.document.addEventListener("mousedown",this._onDocumentMousedown,!0),window.document.addEventListener("touchstart",this._onDocumentMousedown,!0)},n.componentDidUpdate=function(e){var t=this;e.data&&!this.props.data&&setTimeout(function(){return t.setState({handleMapClick:!0})},500)},n.componentWillUnmount=function(){window.document.removeEventListener("mousedown",this._onDocumentMousedown,!0),window.document.removeEventListener("touchstart",this._onDocumentMousedown,!0)},n.render=function(){var e=this.props;return a.createElement(a.Fragment,null,e.data?a.createElement(P,Object(o.a)({},e.data,{zoom:e.zoom,onClose:e.close,openAddObjectFeedback:this._openAddObjectFeedback,openWhatshere:this._openWhatshere,onRouteClick:this._onRouteClick,onSearchNearbyClick:this._onSearchNearbyClick})):null,a.createElement(f.a,{name:"whatshere_preview_layer",nodeRef:this._mapAnalyticsRef}),a.createElement(d.b,{onUpdate:this._onMapUpdate,onClick:this._onMapClick}))},t}(a.Component);D.displayName="WhatsHerePreviewComponent";t.default=A(D)},1189:function(e,t,n){"use strict";n.r(t);var o=n(4),r=n(12),a=n(17),i=n(699),s={pmbl:"#177ee6",pmrd:"#f43",pmgn:"#3bb300"},c=s.pmbl,l=function(e){return e.points?o.createElement(o.Fragment,null,e.points.map(function(e,t){var n=e.coordinates,r=e.color;return o.createElement(i.a,{key:t+"_"+n.join(),coordinates:n,color:r&&r in s?s[r]:c,nonInteractive:!0,comma:!0})})):null},u=Object(a.a)(r.b(function(e){return e.placemarks}));t.default=u(function(e){return o.createElement(l,{points:e.points})})},124:function(e,t,n){"use strict";var o=n(13),r=n(41),a=n(6),i=n(4),s=n(54),c=n(55),l=n(22),u=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._ref=i.createRef(),t._onMapUpdate=function(){t.forceUpdate()},t}return Object(a.a)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.coordinates,a=Object(r.a)(t,["coordinates"]);return i.createElement(i.Fragment,null,i.createElement(s.a,{coordinates:n,nonInteractive:!0},i.createElement("div",{ref:this._ref}),i.createElement(l.a,Object(o.a)({type:"balloon"},a,{getTarget:function(){return e._ref.current}}),a.children)),i.createElement(c.b,{onUpdate:a.isShown?this._onMapUpdate:void 0}))},t}(i.PureComponent);t.a=u},133:function(e,t,n){"use strict";var o=n(6),r=n(4),a=n(9),i=n(93),s=function(e){function t(t){var n;return(n=e.call(this,t)||this)._setRef=function(e){if(e&&"MSIE"===n.props.config.uatraits.BrowserName){var t=e.parentElement,o=t.offsetHeight,r=t.offsetWidth;n.setState({paddingTop:o/r*100+"%",isFallback:!0})}},n._getStyle=function(){var e=n.props;return n.state.isFallback?{paddingTop:n.state.paddingTop,backgroundImage:"url('"+e.src+"')",backgroundSize:e.backgroundSize||"cover",backgroundRepeat:"no-repeat",height:0,backgroundPosition:"center"}:{objectFit:e.backgroundSize||"cover",backgroundColor:"contain"===e.backgroundSize?"#fff":void 0}},n.state={paddingTop:"0",isFallback:!1},n}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props;return r.createElement(i.a,{immediately:e.renderImmediately},r.createElement("img",{width:"100%",height:"100%",src:e.src,alt:e.alt,style:this._getStyle(),ref:this._setRef,loading:e.renderImmediately?void 0:"lazy"}))},t}(r.PureComponent);t.a=Object(a.b)(s)},1410:function(e,t,n){},1414:function(e,t,n){e.exports=n.p+"_/8d48e291dc0757f5017f05b1c6c24bc4.svg"},1415:function(e,t,n){e.exports=n.p+"_/645e798bb0a130dcf7aba57ec4f27e16.svg"},168:function(e,t,n){"use strict";var o=n(13),r=n(6),a=(n(353),n(4)),i=n(7),s=n(92),c=Object(i.a)("list-item-view"),l=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onClick=function(e){var n,o;null===(n=(o=t.props).onClick)||void 0===n||n.call(o,e)},t._renderIconContent=function(){var e=t.props.icon;if(!e)return null;var n=c("icon");return a.createElement("div",{className:c("icon-content"),style:t.props.iconStyle},"function"==typeof e?e(n):a.createElement(s.a,{name:e,size:24,inline:!0,className:n}))},t._renderContent=function(){var e=t.props;return a.createElement("div",{className:c("content")},t.props.children,e.subtitle?a.createElement("div",{className:c("subtitle")},e.subtitle):null)},t._renderRightContent=function(){var e=t.props.renderRightContent;return e?a.createElement("div",{className:c("right-content")},e()):null},t}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.link?"a":"div";return a.createElement(t,Object(o.a)({},e.link,{className:c({clickable:Boolean(e.onClick||e.link||e.clickable),active:e.active,disabled:e.disabled,theme:e.theme,size:e.size||"list",border:e.border}),onClick:this._onClick}),this._renderIconContent(),this._renderContent(),this._renderRightContent())},t}(a.PureComponent);t.a=l},2500:function(e,t,n){},2502:function(e,t,n){},2504:function(e,t,n){},2506:function(e,t,n){e.exports=n.p+"_/388cc4732f81d8963b2893ddad5b7c58.svg"},2508:function(e,t,n){},258:function(e,t,n){"use strict";var o={setLayer:function(e){return function(t,n){t({type:"DEEP_EXTEND",payload:e?{parking:{isLayerShown:n().parking.isLayerEnabled},traffic:{isLayerEnabled:!1},panoramas:{isLayerEnabled:!1},photos:{isLayerEnabled:!1},mrc:{isLayerEnabled:!1}}:{parking:{isLayerShown:!1}}})}},toggleLayer:function(){return function(e,t){if(t().parking.isLayerShown)return e(o.setLayer(!1));e(o.setLayer(!0))}},updateLayerAvailability:function(e){return{type:"DEEP_EXTEND",payload:{parking:e}}}};t.a=o},259:function(e,t,n){"use strict";var o=n(6),r=(n(355),n(4)),a=n(12),i=n(7),s=n(220),c=n(8),l=n(123),u=n(133),d={setLoadingPanorama:s.a.setLoadingPanorama},p=Object(i.a)("panorama-thumbnail-view"),m=a.b(function(e){return{config:e.config}},d),h=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onClick=function(){var e,n;!1!==t.props.isInteractive&&(t.props.setLoadingPanorama({id:t.props.panorama.id,direction:t.props.panorama.direction}),null===(e=(n=t.props).onClick)||void 0===e||e.call(n))},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props;return r.createElement(c.a,{name:"panorama",metrikaGoal:"goal_deepuse",logClick:!0},r.createElement("div",{className:p({view:e.view}),onClick:this._onClick},r.createElement(u.a,{src:e.panorama.preview,alt:e.panorama.alt,backgroundSize:"cover",renderImmediately:!0}),e.renderLabel?e.renderLabel():r.createElement("div",{className:p("label")},"preview"===e.view?"Панорама":""),r.createElement(l.a,{chunk:"panoramas"})))},t}(r.Component);t.a=m(h)},353:function(e,t,n){},355:function(e,t,n){},42:function(e,t,n){"use strict";var o=n(6),r=(n(81),n(4)),a=n(7),i=n(116),s=n(97),c=n(46),l=1,u=Object(a.a)("sticky-wrapper"),d=function(e){function t(t){var n;return(n=e.call(this,t)||this)._containerRef=r.createRef(),n._isDisabled=function(e){return void 0===e&&(e=n.props),e.disabled||!e.scrollId},n._registerContainer=function(){var e,t=n.props,o=null!==(e=t.order)&&void 0!==e?e:l;if(n._containerRef.current){var r=t.scrollId;if(!r)return;t.registerStickyElement(r,o,n._containerRef,n._onPositionUpdate),t.updateStickyElement(r,o,n._containerRef.current.offsetHeight),n._unregisterContainer=function(){t.unregisterStickyElement(r,o)}}},n._onIntersectionChange=function(e){n.setState({fixed:!e})},n._onPositionUpdate=function(e){var t,o;n.setState({position:e}),null===(t=(o=n.props).onOffsetChange)||void 0===t||t.call(o,e)},n._onIntersectionParentBoundaries=function(e){n.setState({reachedParentBoundaries:!e})},n.state={fixed:!1,reachedParentBoundaries:!1,position:0},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._isDisabled()||this._registerContainer()},n.componentDidUpdate=function(e,t){var n=this.props,o=this.state,r=n.children!==e.children;(n.children&&r||this._isDisabled(e)&&!this._isDisabled())&&this._registerContainer(),n.onFixedChange&&t.fixed!==o.fixed&&n.onFixedChange(o.fixed)},n.componentWillUnmount=function(){var e;null===(e=this._unregisterContainer)||void 0===e||e.call(this)},n.render=function(){var e,t=this.props,n=this.state;return t.children?this._isDisabled()?t.children:r.createElement(r.Fragment,null,"top"===t.position?r.createElement(c.a,{threshold:0,style:n.position?{transform:"translateY(-"+n.position+"px)"}:void 0,className:u("observer-target"),onChange:this._onIntersectionChange},null):null,r.createElement("div",{className:u({position:t.position,fixed:n.fixed,header:t.header,border:null!==(e=t.border)&&void 0!==e?e:"auto",wide:t.wide,"reached-boundaries":n.reachedParentBoundaries}),style:{top:this.state.position,zIndex:t.zIndex},ref:this._containerRef},r.createElement(c.a,{threshold:0,style:n.position?{transform:"translateY(-"+n.position+"px)"}:void 0,className:u("observer-target",{absolute:!0}),onChange:this._onIntersectionParentBoundaries},null),t.children)):null},t}(r.Component);t.a=Object(s.b)(Object(i.b)(d))},61:function(e,t,n){"use strict";var o=n(26);t.a=Object(o.a)(function(){return n.e("feedback").then(n.bind(null,249))},{openCommonFeedback:!0,closeCommonFeedback:!0,openFeedback:!0,closeFeedback:!0,openSelectObjectFeedback:!0,openBusinessFeedback:!0,openRouteFeedback:!0,openAddObjectFeedback:!0,openEditObjectFeedback:!0,openMapEditFeedback:!0,completeFeedback:!0,submitFeedback:!0})},625:function(e,t,n){"use strict";n(856);var o=n(4),r=n(7),a=n(274),i=Object(r.a)("traffic-icon");t.a=function(e){var t=e.size||"normal",n=e.enabled&&"number"==typeof e.level?a.b(e.level):null;return o.createElement("div",{className:i({color:n,size:t})},o.createElement("div",{className:i("text")},e.enabled?e.level:null))}},697:function(e,t,n){},699:function(e,t,n){"use strict";var o=n(41),r=(n(700),n(4)),a=n(7),i=n(54),s=n(11),c=n(702),l=n.n(c),u=n(703),d=n.n(u),p=Object(a.a)("map-circle-placemark");t.a=function(e){var t=e.color,n=e.size,a=void 0===n?"medium":n,c=e.comma,u=e.caption,m=e.outline,h=Object(o.a)(e,["color","size","comma","caption","outline"]);return r.createElement(i.a,h,r.createElement("div",{className:p({comma:c,size:a,outline:m}),style:{color:t}},r.createElement(s.a,{className:p("placemark"),url:c?d.a:l.a}),r.createElement("div",{className:p("content")},e.children),u?r.createElement("div",{className:p("caption")},u):null))}},700:function(e,t,n){},702:function(e,t,n){e.exports=n.p+"_/ebe60c9063e4a91162d1366e790ea391.svg"},703:function(e,t,n){e.exports=n.p+"_/fd161c881e6392111418a1036fe1188e.svg"},81:function(e,t,n){},856:function(e,t,n){},93:function(e,t,n){"use strict";var o=n(6),r=n(4),a=n(46),i=n(9),s=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={shouldRender:t.immediately||Boolean(t.config.uatraits.isRobot)},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){!e.immediately&&this.props.immediately&&this.setState({shouldRender:!0})},n.render=function(){var e=this,t=this.props;if(this.state.shouldRender)return this.props.children;var n=t.placeholder||null;return r.createElement(a.a,{style:{width:"100%",height:"100%"},rootMargin:"100px",onChange:function(t){return e.setState({shouldRender:t})}},n)},t}(r.PureComponent);t.a=Object(i.b)(s)},959:function(e,t,n){"use strict";var o=n(6),r=(n(697),n(4)),a=n(7),i=n(13),s=n(28),c=n(22),l=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._ref=null,t}Object(o.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=e.showAt,n=this.props.showAt;t.left===n.left&&t.top===n.top||this.forceUpdate()},n.render=function(){var e=this,t=this.props,n={position:"absolute",visibility:"hidden",top:t.showAt.top,left:t.showAt.left};return r.createElement(r.Fragment,null,r.createElement(s.a,null,r.createElement("div",{style:n,ref:function(t){return e._ref=t}})),r.createElement(c.a,Object(i.a)({getTarget:function(){return e._ref}},t)))},t}(r.Component),u=n(102),d=n.n(u),p=n(8),m=n(168),h=["bottom-right","right-bottom","bottom-left","left-bottom","right-top","top-right","left-top","top-left"],f=Object(a.a)("context-menu"),v=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._close=function(){t.props.onClose()},t._onItemClick=function(e){t._close(),t.props.onItemClick(e)},t._renderItem=function(e){return r.createElement(p.a,{key:e.id,name:"item",nodeState:{id:e.id},logClick:!0,metrikaGoal:t.props.metrikaGoal},r.createElement(m.a,{icon:e.icon,onClick:function(){return t._onItemClick(e)}},e.text))},t}return Object(o.a)(t,e),t.prototype.render=function(){var e,t=this.props,n=r.createElement("div",{className:f()},t.items.map(this._renderItem));return t.isPhone?r.createElement(d.a,{isShown:t.isShown,onClose:this._close,swipeable:!0,stopPropagation:!0},n):r.createElement(l,{isShown:t.isShown,showAt:{left:t.coordinates[0],top:t.coordinates[1]},position:h,offset:{main:4,side:4},showArrow:!1,onClose:this._close,onScroll:null!==(e=t.onScroll)&&void 0!==e?e:"close",type:"transparent"},n)},t}(r.Component);v.displayName="ContextMenu";t.a=v}}]);