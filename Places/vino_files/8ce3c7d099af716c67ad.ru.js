(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["photos","dialog"],{1009:function(e,t,n){"use strict";n.r(t);var o=n(6),i=n(10),r=n(4),a=n(12),s=n(17),c=n(9),u=n(23),l=n(37),d=n(132),p=n(91),h=n(147),f=n(336),m=n(161),v=n(16),g=n(69),b=n(459),_={show:d.a.show,close:l.a.close,openOrgpage:p.a.openOrgpage,setSelectedId:d.a.setSelectedId,onAddPhotosClick:d.a.showAddPhotosForm,checkAuthorization:u.a.checkAuthorization},y=Object(s.a)(a.b(function(e){var t=v.h(e,"photos");return Object(i.a)(Object(i.a)({isHotspotEnabled:!e.map.isEditing&&!g.T(e),searchText:e.form.text},e.photos),t)},_),c.b),E=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onChangeSelectedPhoto=function(e){var n=t.props,o=n.data,i=n.setSelectedId,r=o;null===e?i(null):r[e]&&r[e].id&&i(r[e].id)},t._onAddPhotosClick=function(){var e=t.props,n=e.meta;n&&"businessId"in n&&e.checkAuthorization("reviews",function(){e.onAddPhotosClick(n.businessId)})},t._onHotspotClick=function(e){t.props.show({id:e.id,skipAdvert:!1})},t._onClose=function(){var e=t.props;e.data&&(e.skipPreviewModeOnExit?e.close():null===m.d(e.data,{selectedId:e.selectedId,isPreviewMode:e.isPreviewMode}).selectedIndex||1===e.data.length?e.close():e.setSelectedId(null))},t._openOrgpage=function(e){t.props.openOrgpage({id:e})},t._renderLayer=function(){return t.props.isLayerEnabled?r.createElement(h.a,{name:"photos_layer",logClick:!0},r.createElement(f.a,{layer:"pht",onClick:t.props.isHotspotEnabled?t._onHotspotClick:void 0})):null},t._renderPlayer=function(){var e=t.props,n=e.data,o=e.meta;if(!n||!o)return null;var i=m.d(n,{selectedId:e.selectedId,isPreviewMode:e.isPreviewMode}),a=i.selectedIndex,s=i.isPreviewMode,c=e.isAddPhotosDisabled;return r.createElement(b.default,{data:n,selectedIndex:a,meta:o,isPreviewMode:s,isShareDisabled:e.isShareDisabled,onClose:t._onClose,openOrgpage:t._openOrgpage,onChangeSelectedPhoto:t._onChangeSelectedPhoto,onAddPhotosClick:c?void 0:t._onAddPhotosClick,searchText:e.searchText,businessLinks:e.businessLinks,bookingData:e.bookingData,checkAuthorization:e.checkAuthorization})},t}return Object(o.a)(t,e),t.prototype.render=function(){return r.createElement(r.Fragment,null,this._renderLayer(),this._renderPlayer())},t}(r.Component);E.displayName="PhotosComponent",t.default=y(E)},1010:function(e,t,n){"use strict";var o=n(13),i=n(6),r=n(1420),a=n.n(r),s=n(4),c=n.n(s),u=n(7),l=n(8),d=n(460),p=n(11),h=n(1422),f=n(958),m=n(43),v=n(255),g=n(9),b=n(20),_=n(1426),y=n.n(_),E=n(1427),w=n.n(E),C=n(1428),x=n.n(C),S=n(1429),k=n.n(S),P=n(1430),I=n.n(P),T=n(1431),O=n.n(T),R=Object(b.a)({resolved:{},chunkName:function(){return"booking"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("booking").then(n.bind(null,653))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var o=this.resolve(t);return n(o)},resolve:function e(){return 653}}),N=Object(b.a)({resolved:{},chunkName:function(){return"booking"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("booking").then(n.bind(null,1111))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var o=this.resolve(t);return n(o)},resolve:function e(){return 1111}}),j=Object(u.a)("photos-player-controls-view"),z=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onPopupUpdate=function(e){var n,o;null===(n=(o=t.props).onPopupVisibilityChange)||void 0===n||n.call(o,!e)},t._renderNavigationalControl=function(e){var n=t.props,o=n.config.uatraits.isTouch,i="forward"===e?n.onNextAreaClick:n.onPreviousAreaClick;if(o||!i)return null;var r="forward"===e?n.selectedIndex===n.totalPhotoCount-1:0===n.selectedIndex;return s.createElement(l.a,{name:e+"_button",useParentState:!0,logClick:!0},s.createElement("div",{className:j("button",{disabled:r,type:e}),onClick:i},s.createElement(p.a,{className:j("icon",{big:!0}),url:"forward"===e?w.a:y.a})))},t._renderNavigationalControls=function(){return s.createElement(s.Fragment,null,t._renderNavigationalControl("forward"),t._renderNavigationalControl("backward"))},t._renderFeedbackButton=function(e){var n=t.props;return n.businessId&&n.currentPhotoId&&n.checkAuthorization?s.createElement("div",{className:j("button",{type:"feedback"})},s.createElement(h.a,Object(o.a)({checkAuthorization:n.checkAuthorization,photoId:n.currentPhotoId,businessId:n.businessId},e))):null},t._renderShareButton=function(e){return t.props.isShareDisabled?null:s.createElement("div",{className:j("button",{type:"share"})},s.createElement(f.a,e))},t._renderAddPhotoButton=function(){return t.props.onAddPhotosClick&&t.props.businessId?s.createElement(l.a,{name:"add_photo",useParentState:!0,logClick:!0},s.createElement("div",{className:j("button",{type:"add-photo"}),onClick:t.props.onAddPhotosClick},s.createElement(p.a,{url:O.a}),s.createElement("span",{className:j("button-text")},"Добавить фото"))):null},t._renderBusinessLinks=function(){var e=t.props.businessLinks||[];return 0===e.length?null:s.createElement("div",{className:j("controls-section")},e.map(function(e){return s.createElement(d.a,{link:e,key:e.href},function(t){return s.createElement(l.a,{name:"business_link",useParentState:!0,logClick:!0},s.createElement("div",{className:j("button"),onClick:t},e.icon||e.altIcon?s.createElement(p.a,{className:j("icon"),url:e.altIcon||e.icon}):null,s.createElement("span",{className:j("button-text")},e.text)))})}))},t._renderBookingView=function(e){var n=t.props;return n.bookingData&&n.businessId&&!n.config.hideAdverts?s.createElement(R,{id:n.businessId,reqId:n.bookingData.requestId,searchQuery:n.bookingData.requestQuery},function(t){var n=t.data;return n&&"type"in n?null:s.createElement("div",{className:j("controls-section")},s.createElement("div",{className:j("button")},s.createElement(N,Object(o.a)({data:n},e))))}):null},t}return Object(i.a)(t,e),t.prototype.render=function(){var e=this,t=this.props;return s.createElement("div",{className:j({theme:t.theme})},t.totalPhotoCount>1&&!t.isPreviewMode?this._renderNavigationalControls():null,s.createElement("div",{className:j("controls"),ref:t.controlsContainerRef},t.renderAdditionalControls?s.createElement("div",{className:j("controls-section")},t.renderAdditionalControls()):void 0,this._renderBusinessLinks(),s.createElement(v.a,{onPopupUpdate:this._onPopupUpdate},function(t){return s.createElement(s.Fragment,null,e._renderBookingView(t("booking")),s.createElement("div",{className:j("controls-section")},e._renderAddPhotoButton(),e._renderShareButton(t("share")),e._renderFeedbackButton(t("feedback"))))}),t.onFullScreenEnter?s.createElement("div",{className:j("controls-section")},s.createElement(m.a,{text:"Развернуть",position:"bottom-left",offset:{main:10,side:0},isAir:!0},s.createElement(l.a,{name:"full_screen",useParentState:!0,logClick:!0},s.createElement("div",{className:j("button"),onClick:t.onFullScreenEnter},s.createElement(p.a,{url:x.a}))))):null,t.onClose?s.createElement("div",{className:j("controls-section")},s.createElement(m.a,{text:"Закрыть",position:"bottom-left",offset:{main:10,side:0},isAir:!0},s.createElement(l.a,{name:"close",useParentState:!0,logClick:!0},s.createElement("div",{className:j("button",{type:"close"}),onClick:t.onClose},s.createElement(p.a,{url:k.a}))))):null))},t}(s.PureComponent);t.a=Object(g.b)(z)},1011:function(e,t,n){"use strict";var o=n(6),i=n(1432),r=n.n(i),a=n(4),s=n.n(a),c=n(7),u=n(9),l=n(1434),d=n(2758),p=n(20),h=Object(p.a)({resolved:{},chunkName:function(){return"promo"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("promo").then(n.bind(null,144))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var o=this.resolve(t);return n(o)},resolve:function e(){return 144}}),f=Object(c.a)("photo-list"),m={transitionDuration:0,percentPosition:!0,horizontalOrder:!1},v=function(e){function t(t){var n;return(n=e.call(this,t)||this)._reloadMasonry=null,n._onPhotoLoad=function(e){var t=n.state.loadedIndexes;t.includes(e)||n.setState({loadedIndexes:[].concat(t,[e])})},n._renderPhoto=function(e,t,o){var i=n.props,r=i.selectedIndex,s=i.isPreviewMode,c=i.onPhotoClick,u=!s&&r===t,l=null!==r&&(r-1>t||t>r+1);return n._renderFrameWrapper(a.createElement(d.a,{photo:e.data,index:s?t:r||0,size:e.size,isRatioInversed:e.isRatioInversed,isPreviewMode:s,isLoaded:e.isLoaded,isSelected:u,isFrozen:l,onLoad:n._onPhotoLoad,onClick:function(){return c(t)},hasShare:n.props.hasShare}),e.key,e.size,1===o.length)},n._renderFrameWrapper=function(e,t,o,i){return a.createElement(a.Fragment,{key:t},a.createElement("div",{className:f("frame-wrapper",{single:i})},a.createElement("div",{className:f("frame",{size:o})},e)),n.props.isPreviewMode?null:a.createElement("div",{className:f("gap"),style:{width:n.props.itemGap+"px"}}))},n._renderAdvert=function(e){return n._renderFrameWrapper(a.createElement("div",{style:{height:600}},a.createElement(h,{id:e,skipFallback:!0})),"advert")},n.state={isMounted:!1,loadedIndexes:[],advertInjectIndex:t.columnsCount-1},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.setState({isMounted:!0})},n.componentDidUpdate=function(e,t){this.state.advertInjectIndex!==t.advertInjectIndex&&this._reloadMasonry&&this._reloadMasonry()},n.render=function(){var e=this;if(!this.state.isMounted)return null;var t=this.props,n=t.isPreviewMode,o=t.data,i=t.skipAdvert,r=t.config,s=t.columnsCount,c=this.state,u=c.loadedIndexes,d=c.advertInjectIndex,p=o.reduce(function(e,t,n){var o=e.photos,i=e.photoSizes,r=g(t,s,n,i,u.includes(n));return{photos:[].concat(o,[r]),photoSizes:r.size?[].concat(i,[r.size]):i}},{photos:[],photoSizes:[]}),h=p.photos.map(this._renderPhoto);return n&&!i&&p.photos.length>d&&r.banner&&r.banner.blockIds.photoList&&!r.hideAdverts&&h.splice(d,0,this._renderAdvert(r.banner.blockIds.photoList)),n?a.createElement(l.a,{className:f({mode:"preview",columns:s}),options:m,onLayoutComplete:function(t){return e.setState({advertInjectIndex:t.cols-1})},reloadRef:function(t){return e._reloadMasonry=t}},h):a.createElement("div",{className:f({mode:"tape"})},h)},t}(a.PureComponent);function g(e,t,n,o,i){var r=[o[n-1],o[n-t]],a={isLoaded:i,data:e,key:"videoUrl"in e?"video":e.id};if(!("videoUrl"in a.data)){var s=a.data,c=s.width,u=void 0===c?1:c,l=s.height,d=void 0===l?1:l,p=u===d,h=u/d;d>u?(a.size="l",a.isRatioInversed=h>.75):(0===n||n%2||p)&&!r.includes("m")?a.size="m":(a.size="s",a.isRatioInversed=h>1.5)}return a}t.a=Object(u.b)(v)},1012:function(e,t,n){var o,i,r;window,i=[n(1435),n(715)],void 0===(r="function"==typeof(o=function(e,t){"use strict";var n=e.create("masonry");n.compatOptions.fitWidth="isFitWidth";var o=n.prototype;return o._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var e=0;e<this.cols;e++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},o.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var e=this.items[0],n=e&&e.element;this.columnWidth=n&&t(n).outerWidth||this.containerWidth}var o=this.columnWidth+=this.gutter,i=this.containerWidth+this.gutter,r=i/o,a=o-i%o;r=Math[a&&a<1?"round":"floor"](r),this.cols=Math.max(r,1)},o.getContainerWidth=function(){var e=this._getOption("fitWidth")?this.element.parentNode:this.element,n=t(e);this.containerWidth=n&&n.innerWidth},o._getItemLayoutPosition=function(e){e.getSize();var t=e.size.outerWidth%this.columnWidth,n=Math[t&&t<1?"round":"ceil"](e.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var o=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](n,e),i={x:this.columnWidth*o.col,y:o.y},r=o.y+e.size.outerHeight,a=n+o.col,s=o.col;s<a;s++)this.colYs[s]=r;return i},o._getTopColPosition=function(e){var t=this._getTopColGroup(e),n=Math.min.apply(Math,t);return{col:t.indexOf(n),y:n}},o._getTopColGroup=function(e){if(e<2)return this.colYs;for(var t=[],n=this.cols+1-e,o=0;o<n;o++)t[o]=this._getColGroupY(o,e);return t},o._getColGroupY=function(e,t){if(t<2)return this.colYs[e];var n=this.colYs.slice(e,e+t);return Math.max.apply(Math,n)},o._getHorizontalColPosition=function(e,t){var n=this.horizontalColIndex%this.cols;n=e>1&&n+e>this.cols?0:n;var o=t.size.outerWidth&&t.size.outerHeight;return this.horizontalColIndex=o?n+e:this.horizontalColIndex,{col:n,y:this._getColGroupY(n,e)}},o._manageStamp=function(e){var n=t(e),o=this._getElementOffset(e),i=this._getOption("originLeft")?o.left:o.right,r=i+n.outerWidth,a=Math.floor(i/this.columnWidth);a=Math.max(0,a);var s=Math.floor(r/this.columnWidth);s-=r%this.columnWidth?0:1,s=Math.min(this.cols-1,s);for(var c=(this._getOption("originTop")?o.top:o.bottom)+n.outerHeight,u=a;u<=s;u++)this.colYs[u]=Math.max(c,this.colYs[u])},o._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this._getOption("fitWidth")&&(e.width=this._getContainerFitWidth()),e},o._getContainerFitWidth=function(){for(var e=0,t=this.cols;--t&&0===this.colYs[t];)e++;return(this.cols-e)*this.columnWidth-this.gutter},o.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!=this.containerWidth},n})?o.apply(t,i):o)||(e.exports=r)},1013:function(e,t,n){var o,i;"undefined"!=typeof window&&window,void 0===(i="function"==typeof(o=function(){"use strict";function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var n=this._events=this._events||{},o=n[e]=n[e]||[];return-1==o.indexOf(t)&&o.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{};return(n[e]=n[e]||{})[t]=!0,this}},t.off=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var o=n.indexOf(t);return-1!=o&&n.splice(o,1),this}},t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var o=this._onceEvents&&this._onceEvents[e],i=0;i<n.length;i++){var r=n[i];o&&o[r]&&(this.off(e,r),delete o[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e})?o.call(t,n,t,e):o)||(e.exports=i)},103:function(e,t,n){},105:function(e,t,n){},107:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return a});var o=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function i(e,t){return{sunday:"Воскресенье",monday:"Понедельник",tuesday:"Вторник",wednesday:"Среда",thursday:"Четверг",friday:"Пятница",saturday:"Суббота"}[t]}function r(e,t){return{sunday:"Вс",monday:"Пн",tuesday:"Вт",wednesday:"Ср",thursday:"Чт",friday:"Пт",saturday:"Сб"}[t]}function a(e,t){return{sunday:"В воскресенье",monday:"В понедельник",tuesday:"Во вторник",wednesday:"В среду",thursday:"В четверг",friday:"В пятницу",saturday:"В субботу"}[t]}},1125:function(e,t,n){"use strict";n.r(t);var o=n(6),i=(n(2657),n(4)),r=n(12),a=n(9),s=n(18),c=n(17),u=n(7),l=n(185),d=n(1011),p=n(1010),h=n(42),f=n(23),m=n(132),v=n(205),g=n(352),b={onAddPhotosClick:m.a.showAddPhotosForm,checkAuthorization:f.a.checkAuthorization},_=Object(u.a)("business-photo-list"),y=Object(c.a)(r.b(null,b),a.b),E=function(e){function t(t){var n;return(n=e.call(this,t)||this)._fetchPhotos=function(){var e=n.props.result,t=e.advert&&e.advert.photo;s.a.cancel(n._fetchAction),n._fetchAction=s.a.create(l.b.getByBusinessId(e.id,n.props.config),{success:function(e){return n.setState({photos:t?[{id:"advert",url:t}].concat(e):e})}})},n._onAddPhotosClick=function(){var e=n.props;e.checkAuthorization("reviews",function(){e.onAddPhotosClick(e.result.id)})},n.state={},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._fetchPhotos()},n.componentDidUpdate=function(e){this.props.result.id!==e.result.id&&this._fetchPhotos()},n.componentWillUnmount=function(){s.a.cancel(this._fetchAction)},n.render=function(){var e=this.props,t=this.props.result,n=this.state.photos;return n?i.createElement("div",{className:_()},i.createElement(h.a,{position:"top",order:3,border:"never",disabled:!1},i.createElement("div",{className:_("controls")},i.createElement(p.a,{selectedIndex:0,totalPhotoCount:n.length,businessId:t.id,isShareDisabled:!1,isPreviewMode:!0,businessLinks:g.b(t.businessLinks,e.config),bookingData:v.a(t)?{requestId:t.requestId}:void 0,checkAuthorization:e.checkAuthorization,onAddPhotosClick:this._onAddPhotosClick,onFullScreenEnter:e.onFullScreenEnter}))),i.createElement(d.a,{data:n,selectedIndex:null,isPreviewMode:!0,onPhotoClick:e.onPhotoClick,skipAdvert:!0,hasShare:!1,columnsCount:3,itemGap:6})):e.placeholder},t}(i.Component);t.default=y(E)},1162:function(e,t,n){"use strict";n.r(t);var o=n(6),i=n(4),r=n(12),a=n(132),s=n(298),c=n(8),u=n(17),l=n(9),d=n(18),p=n(23),h=n(215),f={openLoginDialog:p.a.openLoginDialog,checkAuthorization:p.a.checkAuthorization},m=Object(u.a)(l.b,r.b(null,f))(function(e){function t(t){var n;return(n=e.call(this,t)||this)._fetch=function(){n.props.config.authorization&&n._loadUserReview()},n._loadUserReview=function(){var e=n.props,t=e.businessId,o=e.config;n.setState({isUserReviewLoading:!0}),n._userReviewAction=d.a.create(h.a.fetchUserReview({businessId:t},o),{success:n._onUserReviewLoaded,fail:n._onUserReviewLoadingFail})},n._onUserReviewLoaded=function(e){n.setState({userReview:e,isUserReviewLoading:!1})},n._onUserReviewLoadingFail=function(){n.setState({isUserReviewLoading:!1})},n._updateReview=function(e,t,o){var i=n.props,r=i.businessId,a=i.config;n.setState({isUserReviewLoading:!0}),n._updateReviewAction=d.a.create(h.a.sendUserReview({businessId:r,rating:e,text:t,photoIds:o},a),{success:n._onUserReviewLoaded,fail:n._onUserReviewLoadingFail})},n.state={userReview:void 0,isUserReviewLoading:Boolean(t.config.authorization)},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._fetch()},n.componentDidUpdate=function(e){e.businessId!==this.props.businessId&&(d.a.cancel(this._userReviewAction),d.a.cancel(this._updateReviewAction),this._fetch())},n.componentWillUnmount=function(){d.a.cancel(this._userReviewAction),d.a.cancel(this._updateReviewAction)},n.render=function(){var e=this.props.children,t=this.state;return e({userReview:t.userReview,isUserReviewLoading:t.isUserReviewLoading,updateReview:this._updateReview,checkAuthorization:this.props.checkAuthorization})},t}(i.Component)),v=n(40),g=n(501),b=n(771),_=(n(1871),n(7)),y=n(502),E=n(509),w=n(15),C=n(39),x=Object(_.a)("review-popup-view"),S=function(e){function t(t){var n;(n=e.call(this,t)||this)._updateRate=function(e){n.setState({rating:e})},n._updateDescription=function(e){n.setState({text:e})},n._onSubmit=function(){var e=n.props.onSubmit,t=n.state,o=t.rating,i=t.text;o&&e(o,i)},n._renderSpinner=function(){return n.props.isLoading?i.createElement("div",{className:x("spinner")},i.createElement(C.a,{view:"medium"})):null};var o=t.userReview,r=o.text,a=o.rating,s=t.onClose;return n.state={text:r,rating:a},r&&a&&s({reason:"submitted-before"}),n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=e.isLoading,n=this.props,o=n.isLoading,i=n.userReview,r=i.text,a=i.rating,s=n.onClose;t&&!o&&(this.setState({text:r,rating:a}),r&&a&&s({reason:"submitted-before"}))},n.render=function(){var e=this.props,t=e.isLoading,n=e.userReview,o=e.onClose,r=this.state,a=r.rating,s=r.text,u=!(t||null===a||n&&n.text===s.trim()&&Number(n.rating)===Number(a)),l=Boolean(Text||a);return i.createElement("div",{className:x()},this._renderSpinner(),i.createElement("div",{className:x("title")},"Спасибо, что делаете Яндекс.Карты лучше"),i.createElement("div",{className:x("description")},"Поделитесь впечатлениями об этом месте, чтобы помочь с выбором другим пользователям."),i.createElement("div",{className:x("row")},i.createElement(y.a,{rating:a,onClick:this._updateRate})),i.createElement("div",{className:x("row"),style:{maxHeight:l?200:0}},i.createElement(E.a,{description:s,onChange:this._updateDescription})),i.createElement("div",{className:x("buttons")},i.createElement(c.a,{name:"send_review",nodeState:{rating:Number(a),review:Boolean(Text)},logClick:!0},i.createElement(w.a,{view:"primary",size:"medium",disabled:!u,onClick:this._onSubmit},"Отправить")),i.createElement(c.a,{name:"cancel_review",logClick:!0},i.createElement("div",{className:x("cancel"),onClick:function(){return o({reason:"cancel-button"})}},"Отменить"))))},t}(i.PureComponent),k={onClose:a.a.hideAddPhotosForm,addReviewedOrganization:a.a.addReviewedOrganization},P=r.b(function(e){return{isOpen:e.addPhotos.isOpen,businessId:e.addPhotos.businessId||"",needReview:e.addPhotos.reviewedOrganizations.every(function(t){return t!==e.addPhotos.businessId})}},k),I=function(e){function t(t){var n;return(n=e.call(this,t)||this)._addPhotosAnalyticsRef=i.createRef(),n._reviewAnalyticsRef=i.createRef(),n._setAlreadyHasReview=function(){var e=n.props,t=e.businessId,o=e.addReviewedOrganization,i=e.onClose;o(t),i()},n._renderReviewForm=function(){var e=n.props,t=e.businessId,o=e.needReview,r=n.state.reviewPopupShown;return i.createElement(m,{businessId:t},function(e){var a=e.userReview,u=e.isUserReviewLoading,l=e.updateReview,d=e.checkAuthorization;return r&&o?i.createElement(c.a,{name:"review_form",nodeRef:n._reviewAnalyticsRef},i.createElement(S,{businessId:t,onClose:n._setAlreadyHasReview,userReview:{text:a?a.text:"",rating:a?s.b(a.rating):null},isLoading:u,onSubmit:function(e,t){d("reviews",function(){l(e,t),n._reviewAnalyticsRef.current.logEvent("submitted",{rating:e,description:t}),n._setAlreadyHasReview()})}})):null})},n._renderPhotosForm=function(){return i.createElement(c.a,{name:"add_photos_form",nodeRef:n._addPhotosAnalyticsRef},i.createElement(b.a,{onClose:n.props.onClose,onSuccess:function(e){n._addPhotosAnalyticsRef.current.logEvent("success",{count:e}),n.setState({reviewPopupShown:!0})}},function(e){return i.createElement(g.a,{setPhotosLoader:e.setPhotosLoader,businessId:n.props.businessId,onChange:e.onChange,removeUploaded:!0})}))},n.state={reviewPopupShown:!1},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=e.isOpen,n=this.props,o=n.onClose,i=n.needReview,r=n.isOpen,a=this.state.reviewPopupShown;!t&&r?this.setState({reviewPopupShown:!1}):a&&!i&&this.setState({reviewPopupShown:!1},o)},n.render=function(){var e=this.props,t=e.isOpen,n=e.needReview,o=e.onClose,r=this.state.reviewPopupShown;return i.createElement(v.default,{isOpen:t,onClose:r?this._setAlreadyHasReview:o,showCloseButton:!0},i.createElement(c.a,{name:"add_photos"},i.createElement("div",{style:{display:r?"none":"initial"}},this._renderPhotosForm()),i.createElement("div",{style:{display:r&&n?"initial":"none"}},this._renderReviewForm())))},t}(i.Component);I.displayName="AddPhotosComponent";t.default=P(I)},118:function(e,t,n){"use strict";var o=n(6),i=n(4),r=n(141),a=n(9),s=n(160),c=n(16),u=n(218),l=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){if(!t.isTimingLogged){var e=this.props,n=e.config.pageMode;"search-result"===e.config.pageMode&&(n="search"),"metro_page"===e.type&&(n="metro"),function(e){switch(e){case"routes_page":return"routes";case"org_page":return"orgpage";case"discovery_page":return"discovery";case"home_page":return"home";case"panorama_page":case"panorama_page_new":return"panoramas";case"photos_page":return"photos";case"search_card_page":case"search_list_page":return"search";case"traffic_page":return"traffic";case"masstransit_stop_page":case"masstransit_route_page":return"masstransit";case"catalog_page":return"catalog";case"metro_page":return"metro"}}(e.type)===n&&(t.isTimingLogged=!0,c.n(Object(u.a)(e.config))||this.setState({ready:r.a.getTimeToNow()}))}},n.render=function(){var e=this.props.type;return"undefined"==typeof window?null:i.createElement(s.a,{type:e,ready:this.state.ready,extraState:{show:window.timingsMarks&&e in window.timingsMarks?window.timingsMarks[e]:this.state.ready}})},t}(i.PureComponent);l.isTimingLogged=!1,t.a=Object(a.b)(l)},1406:function(e,t,n){"use strict";n.r(t);var o,i,r=n(10),a=n(185),s=n(161),c=n(18),u=n(37),l=n(16),d=n(352),p={enableLayer:function(){return{type:"DEEP_EXTEND",payload:{panoramas:{isLayerEnabled:!1},parking:{isLayerShown:!1},masstransit:{isLayerShown:!1},photos:{isLayerEnabled:!0},traffic:{isLayerEnabled:!1},mrc:{isLayerEnabled:!1}}}},disableLayer:function(){return{type:"DEEP_EXTEND",payload:{photos:{isLayerEnabled:!1}}}},show:function(e,t){return void 0===t&&(t={}),function(n,p,h){var f=h.config;if("videoUrl"in e)return window.document.activeElement&&window.document.activeElement.blur(),void n(u.a.push({mode:"photos",meta:{id:"",origin:e.origin,name:e.name,description:e.description,textSize:e.textSize,skipAdvert:!0},data:[{videoUrl:e.videoUrl,share:e.share}]}));o=null;var m,v={name:e.name,description:e.description,origin:e.origin,skipAdvert:e.skipAdvert};"point"in e?(m=Object(r.a)(Object(r.a)({},v),{},{point:e.point}),o=a.b.getByPoint(e.point,f)):"postId"in e&&"businessId"in e?(m=Object(r.a)(Object(r.a)({},v),{},{businessId:e.businessId,postId:e.postId}),o=a.b.getByPostId(e.businessId,e.postId,f)):"businessId"in e?(m=Object(r.a)(Object(r.a)({},v),{},{businessId:e.businessId}),o=a.b.getByBusinessId(e.businessId,f).then(function(t){return[].concat(e.additionalPhotos||[],t)})):"id"in e&&(m=Object(r.a)(Object(r.a)({},v),{},{id:e.id}),o=a.b.getById(e.id,f)),o&&(c.a.cancel(i),i=c.a.create(o,{success:function(o){if(0!==o.length){window.document.activeElement&&window.document.activeElement.blur();var i=void 0===e.selectedIndex?s.d(o,{selectedId:e.selectedId}).selectedIndex:e.selectedIndex,a=null!==i?o[i].id:e.selectedId||void 0,c={meta:m,selectedId:a,businessLinks:e.businessLinks?d.b(e.businessLinks,f):void 0,bookingData:e.bookingData,skipPreviewModeOnExit:t.skipPreviewModeOnExit,data:o},h=l.h(p(),"photos");n(h?u.a.update(h,c):u.a.push(Object(r.a)({mode:"photos"},c)))}}}))}},showCustomPhotos:function(e){return function(t){0!==e.photos.length&&t(u.a.push({mode:"photos",meta:e.meta,data:e.photos,selectedId:e.selectedId,isShareDisabled:!0,isAddPhotosDisabled:!0,isPreviewMode:e.isPreviewMode,skipPreviewModeOnExit:e.skipPreviewModeOnExit}))}},setSelectedId:function(e){return function(t,n){var o=l.h(n(),"photos");o&&t(u.a.update(o,{selectedId:e||void 0,isPreviewMode:!e}))}},showAddPhotosForm:function(e){return{type:"DEEP_EXTEND",payload:{addPhotos:{isOpen:!0,businessId:e}}}},hideAddPhotosForm:function(){return{type:"DEEP_EXTEND",payload:{addPhotos:{isOpen:!1}}}},addReviewedOrganization:function(e){return function(t,n){var o=n().addPhotos,i=[].concat(o.reviewedOrganizations.filter(function(t){return e!==t}),[e]);t({type:"EXTEND",payload:{addPhotos:Object(r.a)(Object(r.a)({},o),{},{reviewedOrganizations:i})}})}}};t.default=p},1418:function(e,t,n){},1420:function(e,t,n){},1422:function(e,t,n){"use strict";var o=n(13),i=n(6),r=(n(1423),n(4)),a=n(7),s=n(9),c=n(169),u=n(8),l=n(705),d=n(405),p=n(357),h=n(358),f=n(11),m=n(22),v=n(43),g=n(1425),b=n.n(g),_=Object(a.a)("photos-feedback-view"),y={"organization-bad-quality":{comment:"Опишите, что вы считаете неприемлемым",label:"Неприемлемое содержание"},"organization-irrelevant":{comment:"Оставьте комментарий модератору",label:"На фото не эта организация"}},E=function(e){function t(t){var n;return(n=e.call(this,t)||this)._button=null,n._send=function(e,t){var o=n.props,i=o.config,r=o.photoId,a=o.businessId;c.a.sendPhotosFeedback({complaintType:e.replace(/-/g,"_"),imageUrns:r,company:a,comment:t,uid:i.authorization.uid},i).then(function(){return n.setState({submitStatus:"sent"})},function(){return n.setState({submitStatus:"fail"})}),n.setState({shownDialogType:"submitted"})},n._onItemClick=function(e){n.props.popupProps.onClose(),n.setState({shownDialogType:e})},n._closeDialog=function(){n.setState({shownDialogType:null})},n._onButtonClick=function(){n.props.checkAuthorization("feedback",function(){n.props.buttonProps.onClick()})},n._renderCommentDialog=function(){var e=n.state.shownDialogType;if(!e||"submitted"===e)return null;var t=y[e],o=t.label,i=t.comment;return r.createElement(p.a,{title:o,isOpen:!0,onClose:n._closeDialog},r.createElement(d.a,{commentLabel:i,hideContactFields:!0,onCancel:n._closeDialog,onSubmit:function(t){return n._send(e,t.comment)}}))},n._renderSubmittedDialog=function(){var e=n.state,t=e.shownDialogType,o=e.submitStatus;return r.createElement(p.a,{isOpen:"submitted"===t,onClose:n._closeDialog},r.createElement(h.a,{title:"Спасибо за сообщение!",message:"Оно поможет сделать Яндекс.Карты лучше.",onClose:n._closeDialog,submitStatus:o}))},n._renderFeedbackButton=function(e){return r.createElement(u.a,{name:"photos_feedback_control",useParentState:!0,logClick:!0},r.createElement("div",Object(o.a)({ref:function(e){return n._button=e},title:e?"Пожаловаться":""},n.props.buttonProps,{onClick:n._onButtonClick}),r.createElement(f.a,{url:b.a,className:_("icon")})))},n.state={shownDialogType:null},n}return Object(i.a)(t,e),t.prototype.render=function(){var e=this,t=this.props.popupProps,n=Boolean(this.props.config.authorization);return r.createElement("div",null,n?this._renderFeedbackButton(!0):r.createElement(v.a,{text:"Пожаловаться",position:"bottom-left",isAir:!0},this._renderFeedbackButton(!1)),r.createElement(m.a,Object(o.a)({showArrow:!1,position:"top",type:"transparent",offset:{main:10,side:-74},getTarget:function(){return e._button}},t,{isShown:n&&t.isShown}),r.createElement(u.a,{name:"photos_feedback_selector"},r.createElement(l.a,{type:"gallery",items:[{text:y["organization-bad-quality"].label,name:"organization-bad-quality",onClick:function(){return e._onItemClick("organization-bad-quality")}},{text:y["organization-irrelevant"].label,name:"organization-irrelevant",onClick:function(){return e._onItemClick("organization-irrelevant")}}]}))),this._renderCommentDialog(),this._renderSubmittedDialog())},t}(r.Component);t.a=Object(s.b)(E)},1423:function(e,t,n){},1425:function(e,t,n){e.exports=n.p+"_/5f37f59913e996aa83453844e5e9151e.svg"},1426:function(e,t,n){e.exports=n.p+"_/5818c4338f87064c8b4293f25368786d.svg"},1427:function(e,t,n){e.exports=n.p+"_/86ad5302bb28c142e07c50fbfb9aa658.svg"},1428:function(e,t,n){e.exports=n.p+"_/f5fb70072172fa62353e0ff3f72e576d.svg"},1429:function(e,t,n){e.exports=n.p+"_/d09e91cd57efdcffd5b06355d03e05eb.svg"},1430:function(e,t,n){e.exports=n.p+"_/11ec006445b36d08a5a77692e56d1b96.svg"},1431:function(e,t,n){e.exports=n.p+"_/a2e290774b93f61d708670c6c0489c94.svg"},1432:function(e,t,n){},1434:function(e,t,n){"use strict";var o=n(6),i=n(4),r=n(1012),a=n.n(r),s=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._masonry=null,t._ref=i.createRef(),t._reloadMasonry=function(){t._masonry.reloadItems(),t._masonry.layout()},t._onLayoutComplete=function(){t.props.onLayoutComplete&&t.props.onLayoutComplete(t._masonry)},t}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._masonry=new a.a(this._ref.current,this.props.options),this._masonry.on("layoutComplete",this._onLayoutComplete),this.props.reloadRef&&this.props.reloadRef(this._reloadMasonry)},n.componentDidUpdate=function(){this._masonry.layout()},n.componentWillUnmount=function(){this._masonry.off("layoutComplete",this._onLayoutComplete),this.props.reloadRef&&this.props.reloadRef(null),this._masonry.destroy()},n.render=function(){return i.createElement("div",{className:this.props.className,ref:this._ref},this.props.children)},t}(i.PureComponent);t.a=s},1435:function(e,t,n){var o,i;!function(r,a){"use strict";o=[n(1013),n(715),n(1436),n(1438)],void 0===(i=function(e,t,n,o){return function(e,t,n,o,i){var r=e.console,a=e.jQuery,s=function(){},c=0,u={};function l(e,t){var n=o.getQueryElement(e);if(n){this.element=n,a&&(this.$element=a(this.element)),this.options=o.extend({},this.constructor.defaults),this.option(t);var i=++c;this.element.outlayerGUID=i,u[i]=this,this._create(),this._getOption("initLayout")&&this.layout()}else r&&r.error("Bad element for "+this.constructor.namespace+": "+(n||e))}l.namespace="outlayer",l.Item=i,l.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var d=l.prototype;function p(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}o.extend(d,t.prototype),d.option=function(e){o.extend(this.options,e)},d._getOption=function(e){var t=this.constructor.compatOptions[e];return t&&void 0!==this.options[t]?this.options[t]:this.options[e]},l.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},d._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),o.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},d.reloadItems=function(){this.items=this._itemize(this.element.children)},d._itemize=function(e){for(var t=this._filterFindItemElements(e),n=this.constructor.Item,o=[],i=0;i<t.length;i++){var r=new n(t[i],this);o.push(r)}return o},d._filterFindItemElements=function(e){return o.filterFindElements(e,this.options.itemSelector)},d.getItemElements=function(){return this.items.map(function(e){return e.element})},d.layout=function(){this._resetLayout(),this._manageStamps();var e=this._getOption("layoutInstant"),t=void 0!==e?e:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},d._init=d.layout,d._resetLayout=function(){this.getSize()},d.getSize=function(){this.size=n(this.element)},d._getMeasurement=function(e,t){var o,i=this.options[e];i?("string"==typeof i?o=this.element.querySelector(i):i instanceof HTMLElement&&(o=i),this[e]=o?n(o)[t]:i):this[e]=0},d.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},d._getItemsForLayout=function(e){return e.filter(function(e){return!e.isIgnored})},d._layoutItems=function(e,t){if(this._emitCompleteOnItems("layout",e),e&&e.length){var n=[];e.forEach(function(e){var o=this._getItemLayoutPosition(e);o.item=e,o.isInstant=t||e.isLayoutInstant,n.push(o)},this),this._processLayoutQueue(n)}},d._getItemLayoutPosition=function(){return{x:0,y:0}},d._processLayoutQueue=function(e){this.updateStagger(),e.forEach(function(e,t){this._positionItem(e.item,e.x,e.y,e.isInstant,t)},this)},d.updateStagger=function(){var e=this.options.stagger;if(null!=e)return this.stagger=function(e){if("number"==typeof e)return e;var t=e.match(/(^\d*\.?\d*)(\w*)/),n=t&&t[1],o=t&&t[2];if(!n.length)return 0;n=parseFloat(n);var i=h[o]||1;return n*i}(e),this.stagger;this.stagger=0},d._positionItem=function(e,t,n,o,i){o?e.goTo(t,n):(e.stagger(i*this.stagger),e.moveTo(t,n))},d._postLayout=function(){this.resizeContainer()},d.resizeContainer=function(){if(this._getOption("resizeContainer")){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},d._getContainerSize=s,d._setContainerMeasure=function(e,t){if(void 0!==e){var n=this.size;n.isBorderBox&&(e+=t?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"}},d._emitCompleteOnItems=function(e,t){var n=this;function o(){n.dispatchEvent(e+"Complete",null,[t])}var i=t.length;if(t&&i){var r=0;t.forEach(function(t){t.once(e,a)})}else o();function a(){++r==i&&o()}},d.dispatchEvent=function(e,t,n){var o=t?[t].concat(n):n;if(this.emitEvent(e,o),a)if(this.$element=this.$element||a(this.element),t){var i=a.Event(t);i.type=e,this.$element.trigger(i,n)}else this.$element.trigger(e,n)},d.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},d.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},d.stamp=function(e){(e=this._find(e))&&(this.stamps=this.stamps.concat(e),e.forEach(this.ignore,this))},d.unstamp=function(e){(e=this._find(e))&&e.forEach(function(e){o.removeFrom(this.stamps,e),this.unignore(e)},this)},d._find=function(e){if(e)return"string"==typeof e&&(e=this.element.querySelectorAll(e)),e=o.makeArray(e)},d._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},d._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},d._manageStamp=s,d._getElementOffset=function(e){var t=e.getBoundingClientRect(),o=this._boundingRect,i=n(e);return{left:t.left-o.left-i.marginLeft,top:t.top-o.top-i.marginTop,right:o.right-t.right-i.marginRight,bottom:o.bottom-t.bottom-i.marginBottom}},d.handleEvent=o.handleEvent,d.bindResize=function(){e.addEventListener("resize",this),this.isResizeBound=!0},d.unbindResize=function(){e.removeEventListener("resize",this),this.isResizeBound=!1},d.onresize=function(){this.resize()},o.debounceMethod(l,"onresize",100),d.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},d.needsResizeLayout=function(){var e=n(this.element);return this.size&&e&&e.innerWidth!==this.size.innerWidth},d.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},d.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},d.prepended=function(e){var t=this._itemize(e);if(t.length){var n=this.items.slice(0);this.items=t.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(n)}},d.reveal=function(e){if(this._emitCompleteOnItems("reveal",e),e&&e.length){var t=this.updateStagger();e.forEach(function(e,n){e.stagger(n*t),e.reveal()})}},d.hide=function(e){if(this._emitCompleteOnItems("hide",e),e&&e.length){var t=this.updateStagger();e.forEach(function(e,n){e.stagger(n*t),e.hide()})}},d.revealItemElements=function(e){var t=this.getItems(e);this.reveal(t)},d.hideItemElements=function(e){var t=this.getItems(e);this.hide(t)},d.getItem=function(e){for(var t=0;t<this.items.length;t++){var n=this.items[t];if(n.element==e)return n}},d.getItems=function(e){e=o.makeArray(e);var t=[];return e.forEach(function(e){var n=this.getItem(e);n&&t.push(n)},this),t},d.remove=function(e){var t=this.getItems(e);this._emitCompleteOnItems("remove",t),t&&t.length&&t.forEach(function(e){e.remove(),o.removeFrom(this.items,e)},this)},d.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="",this.items.forEach(function(e){e.destroy()}),this.unbindResize();var t=this.element.outlayerGUID;delete u[t],delete this.element.outlayerGUID,a&&a.removeData(this.element,this.constructor.namespace)},l.data=function(e){var t=(e=o.getQueryElement(e))&&e.outlayerGUID;return t&&u[t]},l.create=function(e,t){var n=p(l);return n.defaults=o.extend({},l.defaults),o.extend(n.defaults,t),n.compatOptions=o.extend({},l.compatOptions),n.namespace=e,n.data=l.data,n.Item=p(i),o.htmlInit(n,e),a&&a.bridget&&a.bridget(e,n),n};var h={ms:1,s:1e3};return l.Item=i,l}(r,e,t,n,o)}.apply(t,o))||(e.exports=i)}(window)},1436:function(e,t,n){var o,i;!function(r,a){o=[n(1437)],void 0===(i=function(e){return function(e,t){"use strict";var n={extend:function(e,t){for(var n in t)e[n]=t[n];return e},modulo:function(e,t){return(e%t+t)%t}},o=Array.prototype.slice;n.makeArray=function(e){return Array.isArray(e)?e:null==e?[]:"object"==typeof e&&"number"==typeof e.length?o.call(e):[e]},n.removeFrom=function(e,t){var n=e.indexOf(t);-1!=n&&e.splice(n,1)},n.getParent=function(e,n){for(;e.parentNode&&e!=document.body;)if(e=e.parentNode,t(e,n))return e},n.getQueryElement=function(e){return"string"==typeof e?document.querySelector(e):e},n.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},n.filterFindElements=function(e,o){e=n.makeArray(e);var i=[];return e.forEach(function(e){if(e instanceof HTMLElement)if(o){t(e,o)&&i.push(e);for(var n=e.querySelectorAll(o),r=0;r<n.length;r++)i.push(n[r])}else i.push(e)}),i},n.debounceMethod=function(e,t,n){n=n||100;var o=e.prototype[t],i=t+"Timeout";e.prototype[t]=function(){var e=this[i];clearTimeout(e);var t=arguments,r=this;this[i]=setTimeout(function(){o.apply(r,t),delete r[i]},n)}},n.docReady=function(e){var t=document.readyState;"complete"==t||"interactive"==t?setTimeout(e):document.addEventListener("DOMContentLoaded",e)},n.toDashed=function(e){return e.replace(/(.)([A-Z])/g,function(e,t,n){return t+"-"+n}).toLowerCase()};var i=e.console;return n.htmlInit=function(t,o){n.docReady(function(){var r=n.toDashed(o),a="data-"+r,s=document.querySelectorAll("["+a+"]"),c=document.querySelectorAll(".js-"+r),u=n.makeArray(s).concat(n.makeArray(c)),l=a+"-options",d=e.jQuery;u.forEach(function(e){var n,r=e.getAttribute(a)||e.getAttribute(l);try{n=r&&JSON.parse(r)}catch(c){return void(i&&i.error("Error parsing "+a+" on "+e.className+": "+c))}var s=new t(e,n);d&&d.data(e,o,s)})})},n}(r,e)}.apply(t,o))||(e.exports=i)}(window)},1437:function(e,t,n){var o,i;!function(r,a){"use strict";void 0===(i="function"==typeof(o=a)?o.call(t,n,t,e):o)||(e.exports=i)}(window,function(){"use strict";var e=function(){var e=window.Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],n=0;n<t.length;n++){var o=t[n]+"MatchesSelector";if(e[o])return o}}();return function(t,n){return t[e](n)}})},1438:function(e,t,n){var o,i,r;window,i=[n(1013),n(715)],void 0===(r="function"==typeof(o=function(e,t){"use strict";var n=document.documentElement.style,o="string"==typeof n.transition?"transition":"WebkitTransition",i="string"==typeof n.transform?"transform":"WebkitTransform",r={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[o],a={transform:i,transition:o,transitionDuration:o+"Duration",transitionProperty:o+"Property",transitionDelay:o+"Delay"};function s(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}var c=s.prototype=Object.create(e.prototype);c.constructor=s,c._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},c.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},c.getSize=function(){this.size=t(this.element)},c.css=function(e){var t=this.element.style;for(var n in e)t[a[n]||n]=e[n]},c.getPosition=function(){var e=getComputedStyle(this.element),t=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),o=e[t?"left":"right"],i=e[n?"top":"bottom"],r=parseFloat(o),a=parseFloat(i),s=this.layout.size;-1!=o.indexOf("%")&&(r=r/100*s.width),-1!=i.indexOf("%")&&(a=a/100*s.height),r=isNaN(r)?0:r,a=isNaN(a)?0:a,r-=t?s.paddingLeft:s.paddingRight,a-=n?s.paddingTop:s.paddingBottom,this.position.x=r,this.position.y=a},c.layoutPosition=function(){var e=this.layout.size,t={},n=this.layout._getOption("originLeft"),o=this.layout._getOption("originTop"),i=n?"paddingLeft":"paddingRight",r=n?"left":"right",a=n?"right":"left",s=this.position.x+e[i];t[r]=this.getXValue(s),t[a]="";var c=o?"paddingTop":"paddingBottom",u=o?"top":"bottom",l=o?"bottom":"top",d=this.position.y+e[c];t[u]=this.getYValue(d),t[l]="",this.css(t),this.emitEvent("layout",[this])},c.getXValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!t?e/this.layout.size.width*100+"%":e+"px"},c.getYValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&t?e/this.layout.size.height*100+"%":e+"px"},c._transitionTo=function(e,t){this.getPosition();var n=this.position.x,o=this.position.y,i=e==this.position.x&&t==this.position.y;if(this.setPosition(e,t),!i||this.isTransitioning){var r=e-n,a=t-o,s={};s.transform=this.getTranslate(r,a),this.transition({to:s,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},c.getTranslate=function(e,t){return"translate3d("+(e=this.layout._getOption("originLeft")?e:-e)+"px, "+(t=this.layout._getOption("originTop")?t:-t)+"px, 0)"},c.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},c.moveTo=c._transitionTo,c.setPosition=function(e,t){this.position.x=parseFloat(e),this.position.y=parseFloat(t)},c._nonTransition=function(e){for(var t in this.css(e.to),e.isCleaning&&this._removeStyles(e.to),e.onTransitionEnd)e.onTransitionEnd[t].call(this)},c.transition=function(e){if(parseFloat(this.layout.options.transitionDuration)){var t=this._transn;for(var n in e.onTransitionEnd)t.onEnd[n]=e.onTransitionEnd[n];for(n in e.to)t.ingProperties[n]=!0,e.isCleaning&&(t.clean[n]=!0);e.from&&(this.css(e.from),this.element.offsetHeight),this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0}else this._nonTransition(e)};var u="opacity,"+i.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()});c.enableTransition=function(){if(!this.isTransitioning){var e=this.layout.options.transitionDuration;e="number"==typeof e?e+"ms":e,this.css({transitionProperty:u,transitionDuration:e,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(r,this,!1)}},c.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},c.onotransitionend=function(e){this.ontransitionend(e)};var l={"-webkit-transform":"transform"};c.ontransitionend=function(e){if(e.target===this.element){var t=this._transn,n=l[e.propertyName]||e.propertyName;delete t.ingProperties[n],function(e){for(var t in e)return!1;return!0}(t.ingProperties)&&this.disableTransition(),n in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[n]),n in t.onEnd&&(t.onEnd[n].call(this),delete t.onEnd[n]),this.emitEvent("transitionEnd",[this])}},c.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(r,this,!1),this.isTransitioning=!1},c._removeStyles=function(e){var t={};for(var n in e)t[n]="";this.css(t)};var d={transitionProperty:"",transitionDuration:"",transitionDelay:""};return c.removeTransitionStyles=function(){this.css(d)},c.stagger=function(e){e=isNaN(e)?0:e,this.staggerDelay=e+"ms"},c.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},c.remove=function(){o&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),this.hide()):this.removeElem()},c.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:t})},c.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},c.getHideRevealTransitionEndProperty=function(e){var t=this.layout.options[e];if(t.opacity)return"opacity";for(var n in t)return n},c.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},c.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},c.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},s})?o.apply(t,i):o)||(e.exports=r)},1439:function(e,t,n){},1441:function(e,t,n){e.exports=n(1442)()},1442:function(e,t,n){"use strict";var o=n(1443);function i(){}function r(){}r.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,r,a){if(a!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:i};return n.PropTypes=n,n}},1443:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},156:function(e,t,n){"use strict";var o=n(13),i=n(6),r=(n(186),n(4)),a=n(7),s=n(53),c=n(41),u=r.useLayoutEffect,l=function(e){var t=Object(r.useRef)(e);return u(function(){t.current=e}),t},d=function(e,t){"function"!=typeof e?e.current=t:e(t)},p=function(e,t){var n=Object(r.useRef)();return Object(r.useCallback)(function(o){e.current=o,n.current&&d(n.current,null),n.current=t,t&&d(t,o)},[t])},h={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},f=function(e){Object.keys(h).forEach(function(t){e.style.setProperty(t,h[t],"important")})},m=null,v=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize};var g=function(){},b=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width"],_=!!document.documentElement.currentStyle,y=function(e,t){var n=e.cacheMeasurements,i=e.maxRows,a=e.minRows,s=e.onChange,u=void 0===s?g:s,d=e.onHeightChange,h=void 0===d?g:d,y=Object(c.a)(e,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]);var E,w=void 0!==y.value,C=Object(r.useRef)(null),x=p(C,t),S=Object(r.useRef)(0),k=Object(r.useRef)(),P=function(){var e=C.current,t=n&&k.current?k.current:function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n,o=(n=t,b.reduce(function(e,t){return e[t]=n[t],e},{})),i=o.boxSizing;return""===i?null:(_&&"border-box"===i&&(o.width=parseFloat(o.width)+parseFloat(o.borderRightWidth)+parseFloat(o.borderLeftWidth)+parseFloat(o.paddingRight)+parseFloat(o.paddingLeft)+"px"),{sizingStyle:o,paddingSize:parseFloat(o.paddingBottom)+parseFloat(o.paddingTop),borderSize:parseFloat(o.borderBottomWidth)+parseFloat(o.borderTopWidth)})}(e);if(t){k.current=t;var o=function(e,t,n,o){void 0===n&&(n=1),void 0===o&&(o=1/0),m||((m=document.createElement("textarea")).setAttribute("tab-index","-1"),m.setAttribute("aria-hidden","true"),f(m)),null===m.parentNode&&document.body.appendChild(m);var i=e.paddingSize,r=e.borderSize,a=e.sizingStyle,s=a.boxSizing;Object.keys(a).forEach(function(e){var t=e;m.style[t]=a[t]}),f(m),m.value=t;var c=v(m,e);m.value="x";var u=m.scrollHeight-i,l=u*n;"border-box"===s&&(l=l+i+r),c=Math.max(l,c);var d=u*o;return"border-box"===s&&(d=d+i+r),[c=Math.min(d,c),u]}(t,e.value||e.placeholder||"x",a,i),r=o[0],s=o[1];S.current!==r&&(S.current=r,e.style.setProperty("height",r+"px","important"),h(r,{rowHeight:s}))}};return Object(r.useLayoutEffect)(P),E=l(P),Object(r.useLayoutEffect)(function(){var e=function(e){E.current(e)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[]),Object(r.createElement)("textarea",Object(o.a)({},y,{onChange:function(e){w||P(),u(e)},ref:x}))},E=Object(r.forwardRef)(y),w=Object(a.a)("textarea"),C=function(e){function t(t){var n;return(n=e.call(this,t)||this)._textarea=r.createRef(),n._onChange=function(e){n.props.onChange(e.currentTarget.value)},n._onClick=function(){n._textarea.current.focus()},n._onFocus=function(){var e=n.props;e.selectOnFocus&&n._textarea.current.select(),e.onFocus&&e.onFocus(),n.setState({focused:!0})},n._onBlur=function(){var e=n.props;e.onBlur&&e.onBlur(),n.setState({focused:!1})},n._onKeyDown=function(e){var t,o=n.props;null===(t=o.onKeyDown)||void 0===t||t.call(o,e),o.onEnterSubmit&&e.keyCode===s.a.ENTER&&!e.shiftKey&&(n._textarea.current.blur(),o.onEnterSubmit())},n.state={focused:!1},n}return Object(i.a)(t,e),t.prototype.render=function(){var e=this.props,t=w({disabled:e.disabled,focused:this.state.focused,size:e.size,invalid:e.invalid,view:e.view,filled:e.value.length>0}),n={className:w("control"),value:e.value,id:e.id,name:e.name,tabIndex:e.tabIndex,disabled:e.disabled,maxLength:e.maxLength,placeholder:e.placeholder,autoComplete:"off",autoCorrect:"off",autoFocus:e.autoFocus,rows:e.rows,onKeyDown:this._onKeyDown,onChange:this._onChange,onFocus:this._onFocus,onBlur:this._onBlur};return r.createElement("span",{className:t,onClick:this._onClick},e.autoHeight?r.createElement(E,Object(o.a)({ref:this._textarea},n,{maxRows:e.maxRows,minRows:e.rows,translate:"off",style:{resize:"none",overflow:e.maxRows?"auto":"hidden"}})):r.createElement("textarea",Object(o.a)({ref:this._textarea},n,{style:{maxHeight:e.maxHeight+"px",resize:e.resizeable?"vertical":"none"}})))},t}(r.PureComponent);t.a=C},158:function(e,t,n){"use strict";var o=n(6),i=n(4),r=n(9),a=n(18),s=n(25),c={getUrl:function(e,t){return Object(s.a)("shortenPath",{query:{path:e}},t).then(function(e){return"/-/"+e})}},u={},l=function(e){function t(t){var n;return(n=e.call(this,t)||this)._updateShortUrl=function(e){a.a.cancel(n._shortenAction),u[e]||(u[e]=c.getUrl(e,n.props.config)),n.setState({url:e,isShort:!1}),n._shortenAction=a.a.create(u[e],{success:function(e){n.setState({url:e,isShort:!0})}})},n.state={url:t.url,isShort:!1},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateShortUrl(this.state.url)},n.componentDidUpdate=function(e){this.props.url!==e.url&&this._updateShortUrl(this.props.url)},n.componentWillUnmount=function(){a.a.cancel(this._shortenAction)},n.render=function(){return this.props.children(this.state.url,this.state.isShort)},t}(i.PureComponent);t.a=Object(r.b)(l)},161:function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"f",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"e",function(){return d}),n.d(t,"a",function(){return p});var o=["X5L","X4L","XXXL","XXL","XL","L","M","S","XS"],i=["XL","L","M","S","XS"];function r(e,t){var n=null,o=!0;return 1===e.length?(o=!1,n=0):void 0!==t.isPreviewMode&&(o=t.isPreviewMode),t.selectedId&&(-1===(n=e.findIndex(function(e){return"id"in e&&e.id===t.selectedId}))?n=0:o=!1),{selectedIndex:n,isPreviewMode:o}}function a(e){return e.name+"["+e.size+"]@"+e.lastModified}var s=1048576;function c(e,t){if(e.hashes.some(function(e){return a(t)===e}))return Promise.resolve({state:"rejected",error:"Изображение уже загружено"});if(e.maxSize&&t.size/s>e.maxSize)return Promise.resolve({state:"rejected",error:"Фотография слишком большая, уменьшите её и попробуйте снова"});var n,o,i,r={state:"fulfilled",photo:{preview:window.URL.createObjectURL(t),file:t}};return e.resolutionRanges?(n=r.photo.preview,o=e.resolutionRanges,i=new window.Image,new Promise(function(e,t){i.onload=function(){!o||(!o.min||i.naturalWidth>=o.min[0]&&i.naturalHeight>=o.min[1])&&(!o.max||i.naturalWidth<=o.max[0]&&i.naturalHeight<=o.max[1])?e():t()},i.onerror=function(){t()},i.src=n})).then(function(){return r},function(){return{state:"rejected",error:"Разрешение фотографии не подходит, попробуйте загрузить другую"}}):Promise.resolve(r)}function u(e,t){return Promise.all(t.map(function(t){return c(e,t)})).then(function(e){return{valid:e.filter(function(e){return"fulfilled"===e.state}),invalid:e.filter(function(e){return"rejected"===e.state})}})}function l(e){return e.filter(function(e){return Boolean(e.preview&&!e.photoId)})}function d(e){return e.filter(function(e){return Boolean(e.photoId)})}function p(e,t){var n=(t?i:o).find(function(t){return Boolean(e[t])});return n?e[n]:void 0}},169:function(e,t,n){"use strict";var o=n(10),i=n(108),r=n.n(i),a=n(25),s=n(21),c=n(275),u="[maps]",l={auto:"auto",mt:"masstransit",pd:"pedestrian",bc:"bicycle"},d={sendFeedback:function(e,t){var n;return f({subject:e.subject,email:e.email,name:e.name,comment:e.comment,fields:{rating:e.rating}},t,((n={})["X-OTRS-maps"]="service_is_not_working",n))},sendDesignFeedback:function(e,t){var n;return f({isDesign:!0,subject:e.subject,email:e.email,name:e.name,comment:e.comment},t,((n={})["X-OTRS-maps"]="design",n))},sendRouteFeedback:function(e,t){return Object(a.a)("feedback/edit-route",{body:Object(o.a)(Object(o.a)({},e),{},{metadata:Object(o.a)({client_id:"desktop-maps",test_ids:Object(c.a)(t.experiments)},e.metadata)})},t)},sendRouteMasstransitFeedback:function(e,t){var n,i;return f({subject:e.subject,email:e.email,name:e.name,comment:e.comment,fields:{link:p(Object(o.a)(Object(o.a)({},e.urlParams),{},{rl:e.route,pt:null===(n=e.obstacle)||void 0===n?void 0:n.join(",")}),t),attachedPhotos:e.attachedPhotos}},t,((i={})["X-OTRS-route"]="masstransit",i))},sendRouteManeuverFeedback:function(e,t){var n,i;return f({subject:e.subject,email:e.email,name:e.name,comment:e.comment,fields:{link:p(Object(o.a)(Object(o.a)({},e.urlParams),{},{pt:e.maneuver.coords.join(",")}),t)}},t,((n={})["X-OTRS-route"]=(i=e.urlParams.rtt,l[i]||l.auto),n))},sendPanoramaFeedback:function(e,t){return f({subject:e.subject,email:e.email,name:e.name,comment:e.comment},t)},sendPhotosFeedback:function(e,t){return Object(a.a)("feedback/sendToPhotos",{body:e},t)},sendStopFeedback:function(e,t){var n;return f({subject:e.subject,email:e.email,name:e.name,comment:e.comment},t,((n={})["X-OTRS-maps"]="stop",n))},sendStopIncorrectPlaceFeedback:function(e,t){var n,o=e.coords.join(",");return f({subject:e.subject,email:e.email,name:e.name,comment:e.comment,fields:{link:p({pt:o,ll:o,z:e.zoom},t),coords:o}},t,((n={})["X-OTRS-maps"]="stop",n))},sendMrcFeedback:function(e,t){var n;return f({subject:e.subject,email:e.email,name:e.name,comment:e.comment,fields:{link:p({mrc:{id:e.id}},t),photo_id:e.id,mrc_link:h(e,t)}},t,((n={})["X-OTRS-maps"]="service_is_not_working",n))},updateCard:function(e,t){return Object(a.a)("feedback/edit-org",{body:Object(o.a)(Object(o.a)({},e),{},{metadata:Object(o.a)({client_id:"desktop-maps",test_ids:Object(c.a)(t.experiments)},e.metadata)})},t)},sendToponymFeedback:function(e,t){return Object(a.a)("feedback/toponym",{body:Object(o.a)(Object(o.a)({},e),{},{metadata:Object(o.a)({client_id:"desktop-maps",test_ids:Object(c.a)(t.experiments)},e.metadata)})},t)},sendToponymBatchFeedback:function(e,t,n){return Object(a.a)("feedback/toponym/batch",{body:Object(o.a)(Object(o.a)({},e),{},{customData:t,metadata:Object(o.a)({client_id:"desktop-maps",test_ids:Object(c.a)(n.experiments)},e.metadata)})},n)},getRubricSuggest:function(e,t){return Object(a.a)("feedback/rubrics-suggest",{query:{lang:t.lang,part:e.part,exclude:e.exclude}},t)},getFeatures:function(e,t){return Object(a.a)("feedback/features",{query:{lang:t.lang,rubricIds:e.rubricIds}},t)}};function p(e,t){return s.a("/?"+r.a.stringify(e),t)}function h(e,t){var n=e.id,o=e.uid,i=e.sourceId;return t.hosts.mrcPlanner+"publish-photo?photoId="+n+"&uid="+o+"&sourceId="+i}function f(e,t,n){return Object(a.a)("feedback/sendToMaps",{body:Object(o.a)(Object(o.a)({},e),{},{fields:Object(o.a)(Object(o.a)({},e.fields),{},{permalink:window.location.href}),additionalFields:{testBuckets:t.experiments.boxes},subject:u+" "+e.subject}),headers:n},t)}t.a=d},174:function(e,t,n){},185:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(2796),i=n(128),r=n(25),a=n(140),s={posts:"sprav-posts",stories:"maps_stories"},c={getByPoint:function(e,t){return Object(r.a)("photos/getAtPoint",{query:{lang:t.locale,ll:Object(o.a)(e)}},t)},getByBusinessId:function(e,t){return Object(r.a)("photos/getByBusinessId",{query:{id:e}},t)},getByPostId:function(e,t,n){return Object(r.a)("photos/getByPostId",{query:{oid:e,id:t}},n)},getById:function(e,t){return Object(r.a)("photos/getById",{query:{id:e}},t)},uploadBusinessPhoto:function(e){var t=e.config,n=new FormData;return n.append("address_source","ADRESA"),n.append("access","public"),n.append("pub_channel","html"),n.append("app_platform","web"),n.append("app_version","1"),n.append("address",e.businessId),n.append("ut","c"),n.append("ticket",t.xscriptCsrfToken),n.append("yandexuid",a.a.get("yandexuid",t)),n.append("image_source",e.photo,e.photo.name),Object(i.a)({url:t.hosts.photoUploadApi+"api/v1/ugc-photo",query:{appId:"maps-web"},headers:{accept:"application/json"},method:"POST",body:n,credentials:"include",parser:"string"}).then(function(e){var t=JSON.parse(e).response,n=t.status,o=t.image;return{success:"ok"===n,photoId:null==o?void 0:o.id}},function(){return{success:!1}})},uploadFeedbackPhoto:function(e){var t=e.config,n=new FormData;return n.append("ticket",t.xscriptCsrfToken),n.append("yandexuid",a.a.get("yandexuid",t)),n.append("file",e.photo,e.photo.name),Object(i.a)({url:t.hosts.photoUploadApi+"api/v1/feedback-photo",headers:{accept:"application/json"},method:"POST",body:n,credentials:"include",parser:"string"}).then(function(e){var t=JSON.parse(e).id;return{success:Boolean(t),photoId:t}},function(){return{success:!1}})},uploadPostPhoto:function(e,t){return u(e,s.posts,t).then(function(e){return{success:!0,photoId:e["group-id"]+"/"+e.imagename,size:{width:e.sizes.orig.width,height:e.sizes.orig.height}}},function(){return{success:!1}})},uploadStoryPhoto:function(e,t){return u(e,s.stories,t).then(function(e){return"https:"+t.extraHosts.avatarsMds.replace("{namespace}",s.stories).replace("{uid}",e["group-id"]+"/"+e.imagename).replace("{size}","%s")})},uploadUgcPhoto:function(e,t){return Object(i.a)({url:t.hosts.ugcPhotosProxy+"v1/photos/my/upload?filename="+e.name+"&format=json",headers:{"Content-Type":"image/jpeg"},method:"PUT",body:e,credentials:"include"}).then(function(e){return{success:Boolean(e.id),photoId:e.id}},function(){return{success:!1}})}};function u(e,t,n){var o=new FormData;return o.append("file",e,e.name),o.append("ticket",n.xscriptCsrfToken),o.append("yandexuid",a.a.get("yandexuid",n)),Object(i.a)({url:n.hosts.photoUploadApi+"api/v1/avatars",query:{namespace:t},headers:{accept:"application/json"},method:"POST",body:o,credentials:"include",parser:"json"})}t.b=c},186:function(e,t,n){},187:function(e,t,n){"use strict";var o=n(6),i=(n(202),n(4)),r=n(7),a=n(22),s=n(11),c=n(8),u=n(204),l=n.n(u),d=Object(r.a)("clipboard"),p=function(e){function t(t){var n;return(n=e.call(this,t)||this)._action=null,n._content=null,n._textarea=null,n._selectContent=function(){var e=window.getSelection();if(!e)return"";var t=window.document.createRange();return t.selectNodeContents(n._content),e.removeAllRanges(),e.addRange(t),e.toString().trim()},n._showHelp=function(e){n.setState({success:e}),n._hideTimer=window.setTimeout(function(){n.setState({success:null})},2e3),!e&&!n.props.text&&n.props.children&&n._textarea&&(n._textarea.blur(),n._selectContent())},n._copy=function(e){e.stopPropagation(),window.clearTimeout(n._hideTimer);var t=n.props.text;if(!t&&n.props.children&&(t=n._selectContent()),t&&n._textarea){n._textarea.value=t,n._textarea.select(),n._textarea.setSelectionRange(0,t.length);var o=!1;try{o=window.document.execCommand("copy")}catch(i){}n._showHelp(o),n._textarea.value="",n._textarea.blur()}},n._onMouseEnter=function(){n.setState({show:!0,success:null})},n._onMouseLeave=function(){n.setState({show:!1,success:null})},n._renderAction=function(){return i.createElement(c.a,{name:"clipboard",logClick:!0},i.createElement("div",{className:d("action-wrapper",{inline:!n.props.noIcon&&"input"!==n.props.view,view:n.props.view}),onClick:n._copy,ref:function(e){return n._action=e}},n.props.children,i.createElement("div",{className:d("action",{visible:n.props.visible,show:n.state.show})},n.props.noIcon?null:i.createElement("div",{className:d("icon")},i.createElement(s.a,{url:l.a})),i.createElement("textarea",{className:d("textarea"),ref:function(e){return n._textarea=e},readOnly:!0}))))},n._renderHelp=function(){var e=n.state.success;return i.createElement(a.a,{isShown:null!==e,getTarget:function(){return n._action},position:n.props.position||"top",restrictPosition:!0,type:e?"help":"error",onClose:function(){}},i.createElement("div",{className:d("help")},e?"Скопировано":"Ошибка! Скопируйте вручную"))},n.state={clipboardSupported:!0,show:!1,success:null},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.document.queryCommandSupported&&window.document.queryCommandSupported("copy")||this.setState({clipboardSupported:!1})},n.componentWillUnmount=function(){window.clearTimeout(this._hideTimer)},n.render=function(){var e=this,t=this.props.children||null;return this.state.clipboardSupported?i.createElement("div",{className:d(),onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},i.createElement("div",{className:d("content"),ref:function(t){return e._content=t}},this._renderAction()),this._renderHelp()):i.createElement("div",{className:d()},t)},t}(i.Component);t.a=p},1871:function(e,t,n){},199:function(e,t,n){"use strict";var o=n(6),i=(n(236),n(4)),r=n(7),a=n(40),s=n(8),c=n(39),u=n(9),l=(n(72),["allow-forms","allow-scripts","allow-same-origin","allow-modals","allow-popups","allow-popups-to-escape-sandbox"].join(" ")),d=Object(r.a)("iframe-dialog"),p=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onFrameLoad=function(){n.setState({isFrameLoading:!1})},n._onFrameError=function(){n.setState({isFrameLoading:!1,isFrameError:!0})},n._onClose=function(){n.props.onClose&&n.props.onClose()},n._renderTitle=function(){var e=n.props.text;return e?i.createElement("div",{className:d("title"),dangerouslySetInnerHTML:{__html:e}}):null},n.state={didMount:!1,isFrameLoading:!0,isFrameError:!1},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.setState({didMount:!0})},n.componentDidUpdate=function(e){e.isOpen&&!this.props.isOpen&&this.setState({isFrameLoading:!0,isFrameError:!1})},n.render=function(){var e=this.props,t=this.state,n=this._renderTitle();return i.createElement(a.default,{isOpen:e.isOpen,onClose:this._onClose,showCloseButton:!0},i.createElement(s.a,{name:"iframe",useParentState:!0},i.createElement("div",{className:d({view:e.fullView?"full":"padded"})},n,t.isFrameLoading?i.createElement("div",{className:d("spinner")},i.createElement(c.a,{view:"large"})):null,t.isFrameError?i.createElement("div",{className:d("error-message")},"Произошла ошибка.\nПовторите через пару минут."):i.createElement("iframe",{className:d("frame"),src:e.href.replace("http:","https:"),style:e.iframeStyle,sandbox:l,referrerPolicy:"origin",onLoad:this._onFrameLoad,onError:this._onFrameError}))))},t}(i.PureComponent);t.a=Object(u.b)(p)},200:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var o=n(77),i="[a-z0-9!#$%&'*\\.+/=?^_`{|}~-]+@([a-zёа-я0-9]([a-zёа-я0-9-]*[a-zёа-я0-9])?\\.)+[a-zёa-я]{2,}";function r(e){return new RegExp("^"+i+"$","i").test(e)}function a(e){var t=o.b(e);return Boolean(t&&e.length===t.countryCode.length+t.phoneFormat.length&&e.startsWith(t.countryCode))}},202:function(e,t,n){},204:function(e,t,n){e.exports=n.p+"_/e5e2c1a7a1e08d0ef752d275975c693a.svg"},205:function(e,t,n){"use strict";n.d(t,"f",function(){return r}),n.d(t,"b",function(){return l}),n.d(t,"e",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"c",function(){return u}),n.d(t,"a",function(){return d});var o=n(10),i=n(415);function r(e,t,n){return (function(params){return "Забронировать от "+params.price+" / "+params.count+" "+(params.count % 10 === 1 && params.count % 100 !== 11 ? "ночь" :(params.count % 10 > 1 && params.count % 10 < 5 && (params.count % 100 < 10 || params.count % 100 > 20) ? "ночи" : "ночей"));})({count:Object(i.a)(n,t),price:e})}function a(e){return"no-room"===e.type?"Не удалось найти предложения на выбранные даты":"При запросе цен произошла ошибка. Проверьте соединение с интернетом и обновите страницу"}function s(e){return Object(o.a)(Object(o.a)({},e.data&&"type"in e.data?{error:e.data.type}:e.data||{}),{},{dateFrom:e.dateFrom||void 0,dateTo:e.dateTo||void 0,personsAmount:e.personsAmount})}function c(e){return{id:e.toString(),text:(function(params){return params.count+" "+(params.count % 10 === 1 && params.count % 100 !== 11 ? "взрослый" :"взрослых");})({count:e})}}function u(){return[1,2,3,4,5].map(c)}function l(e){return e.getFullYear()+"-"+function(e,t){var n=(e.getMonth()+1).toString();return t?n.padStart(2,"0"):n}(e,!0)+"-"+function(e,t){var n=e.getDate().toString();return t?n.padStart(2,"0"):n}(e,!0)}function d(e){return Boolean(e.references&&e.references.some(function(e){return e.scope.startsWith("ytravel_")}))}},215:function(e,t,n){"use strict";var o=n(25),i={sendAnswer:function(e,t){return Object(o.a)("business/sendAnswer",{body:e},t)},fetchUserReview:function(e,t){return Object(o.a)("business/fetchUserReview",{query:e},t)},fetchUserReviews:function(e,t){return Object(o.a)("business/fetchUserReviews",{query:e},t)},fetchUserPhotos:function(e,t){return Object(o.a)("business/fetchUserPhotos",{query:e},t)},deleteBusinessPhotos:function(e,t){return Object(o.a)("business/deleteUserPhotos",{query:e},t)},sendUserReview:function(e,t){return Object(o.a)("business/sendUserReview",{body:e},t)},addUserReaction:function(e,t){return Object(o.a)("business/addUserReaction",{body:e},t)},fetchReviews:function(e,t){return Object(o.a)("business/fetchReviews",{query:e},t)},fetchServiceZone:function(e,t){return Object(o.a)("business/fetchServiceZone",{query:{businessId:e,lang:t.lang,locale:t.locale}},t)},fetchUserImpressions:function(e,t){return Object(o.a)("business/fetchUserImpressions",{query:e},t)},answerSbsQuestionImpression:function(e,t){return Object(o.a)("business/answerSbsQuestionImpression",{query:e},t)},skipImpression:function(e,t){return Object(o.a)("business/skipImpression",{query:e},t)}};t.a=i},236:function(e,t,n){},238:function(e,t,n){"use strict";n.d(t,"d",function(){return m}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return h}),n.d(t,"f",function(){return p}),n.d(t,"e",function(){return d}),n.d(t,"g",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"h",function(){return c});var o=n(32),i=n(200),r=n(107),a={hoursEmpty:function(e){return v(e).some(function(e){return""===e.startTime||""===e.endTime})},hoursBreaksEmpty:function(e){return v(e).some(function(e){return e.breaks.some(function(e){return Boolean(e.startTime&&!e.endTime||!e.startTime&&e.endTime)})})},hoursWrongFormat:s,hoursBreaksWrongFormat:function(e){return v(e).some(function(e){return e.breaks.some(function(e){return!(!e.startTime||!e.endTime)&&(null===o.j(e.startTime)||null===o.j(e.endTime))})})},hoursWrongFormatFilled:s};function s(e){return v(e).some(function(e){return!(!e.startTime||!e.endTime)&&(null===o.j(e.startTime)||null===o.j(e.endTime))})}function c(e){return""!==e.trim()}function u(e){return Boolean(e&&i.a(e))}function l(e,t){var n=/^\d{1,2}:\d{2}$/;return n.test(e)&&!o.j(e)||n.test(t)&&!o.j(t)}function d(e){return e.every(function(e){return l(e.startTime,e.endTime)})}function p(e,t){var n=a[t];return!!n&&n(e)}function h(e){return Object.keys(a).find(function(t){return(0,a[t])(e)})}function f(e){return v(e).length}function m(e){var t=v(e).map(function(e){return e.dayOfWeek});return r.a.filter(function(e){return!t.includes(e)})}function v(e){return e.reduce(function(e,t){return e.concat(t)},[])}},2657:function(e,t,n){},27:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(119),i=Object(o.a)("wideCard",!1,function(e){return{isWideCard:e}}),r=i.connect,a=i.Provider;t.b=r},272:function(e,t,n){"use strict";var o=n(10),i=n(71),r=n(6),a=(n(174),n(4)),s=n(117),c=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._input=null,t._preventEvent=function(e){e.preventDefault()},t._onDragOver=function(e){e.preventDefault(),e.stopPropagation(),t.props.onDragOver();try{e.dataTransfer.dropEffect="copy"}catch(n){}},t._onDragLeave=function(e){e.preventDefault(),t.props.onDragLeave()},t._onDrop=function(e){e.preventDefault();var n="dataTransfer"in e?e.dataTransfer.files:e.target.files,o=n?Array.from(n):[],i=t.props.accept.split(","),r=o.filter(function(e){return i.some(function(t){return e.type===t||e.name.endsWith(t)})});t.props.onChange(r),t.props.onDragLeave()},t._onClick=function(){t._input.value="",t._input.click()},t}return Object(r.a)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.children,o=t.accept;return a.createElement("div",{onClick:this._onClick,onDragEnter:this._preventEvent,onDragOver:this._onDragOver,onDragLeave:this._onDragLeave,onDrop:this._onDrop},n,a.createElement("input",{type:"file",accept:o,style:{display:"none"},ref:function(t){e._input=t},onChange:this._onDrop,multiple:!0}),a.createElement(s.a,{type:"dragover",listener:this._preventEvent,options:!1}),a.createElement(s.a,{type:"drop",listener:this._preventEvent,options:!1}))},t}(a.Component),u=n(7),l=n(8),d=n(161),p=n(22),h=n(11),f=n(18),m=n(9),v=n(293),g=n.n(v),b=(n(294),Object(u.a)("add-photos-view")),_=function(e){function t(t){var n,r;return(r=e.call(this,t)||this)._ref=a.createRef(),r._photosLoader=function(){var e=Object(i.a)(r),t=e.props,n=e.state;f.a.cancel(r._uploadAction);var a=d.b(n.photos);return new Promise(function(e){r._uploadAction=f.a.create(Promise.all(a.map(function(e){return t.photosLoaderProvider(e.file)})),{success:function(i){var s=n.photos.map(function(e){if(!("file"in e))return e;var t=a.findIndex(function(t){return d.c(t.file)===d.c(e.file)});return-1!==t?Object(o.a)(Object(o.a)({},e),{},{photoId:i[t].photoId,size:i[t].size}):e});r._setPhotos(t.removeUploaded?d.b(s):s),r.setState({error:i.some(function(e){return!e.success})?"Некоторые фотографии не удалось загрузить, попробуйте позже.":void 0});var c=s.map(function(e){return e.photoId||null}),u=c.filter(function(e){return null!==e});e({ids:u,allUploaded:c.length===u.length})}})})},r._onChange=function(e){var t=r.props;r._resetError(),f.a.cancel(r._changeAction),r._changeAction=f.a.create(d.f({hashes:r.state.photos.map(function(e){return"urlTemplate"in e?null:d.c(e.file)}).filter(function(e){return Boolean(e)}),maxSize:t.maxSize,resolutionRanges:t.resolutionRanges},e),{success:function(e){var n=[].concat(r.state.photos,e.valid.map(function(e){return e.photo})),o=t.maxCount;r._setPhotos(n.slice(0,o)),o&&n.length>o?r.setState({error:(function(params){return "Вы можете загрузить не более "+params.maxCount+" фотографий";})({maxCount:o})}):e.invalid[0]&&r.setState({error:e.invalid[0].error})}})},r._removePhoto=function(e){r._setPhotos(r.state.photos.filter(function(t){return t!==e}))},r._resetError=function(){r.setState({error:void 0})},r._setPhotos=function(e){r.setState({photos:e}),r.props.onChange(e)},r._renderPopup=function(){var e=r.state.error;return e?a.createElement(p.a,{type:"error",getTarget:function(){return r._ref.current},onClose:r._resetError,isShown:!0},a.createElement("div",{className:b("error-message")},e)):null},r._renderPhotosPreview=function(){var e=r.state.photos;return 0===e.length?null:a.createElement("div",{className:b("photos")},e.map(r._renderPhoto))},r._renderPhoto=function(e){var t="preview"in e?e.preview:e.urlTemplate.replace(/{?size}?/,"M");return a.createElement("div",{className:b("photo-wrapper"),key:t},a.createElement("img",{className:b("photo"),src:t}),a.createElement("div",{className:b("remove"),onClick:function(){return r._removePhoto(e)}},a.createElement(h.a,{url:g.a})))},r._renderDropzone=function(){var e=Object(i.a)(r),t=e.props,n=e.state;return t.maxCount&&n.photos.length>=t.maxCount?null:a.createElement(c,{accept:t.accept||"image/jpeg,image/png",onChange:r._onChange,onDragOver:function(){return r.setState({bordered:!0})},onDragLeave:function(){return r.setState({bordered:!1})}},a.createElement("div",{className:b("dropzone",{bordered:n.bordered}),ref:r._ref},a.createElement("div",{className:b("dropzone-content")},a.createElement("div",{className:b("dropzone-text")},"Перетащите сюда файлы или"),a.createElement("div",{className:b("select-link")},"выберите на компьютере"))))},r.state={bordered:!1,photos:(null===(n=t.photos)||void 0===n?void 0:n.slice(0,t.maxCount))||[]},r}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.setPhotosLoader(this._photosLoader)},n.componentDidUpdate=function(e){var t=this.props;t.photos!==e.photos&&t.photos&&this.setState({photos:t.photos.slice(0,t.maxCount)})},n.componentWillUnmount=function(){f.a.cancel(this._uploadAction),f.a.cancel(this._changeAction)},n.render=function(){return a.createElement(l.a,{name:"add_photos",nodeState:{amount:this.state.photos.length,hasError:Boolean(this.state.error)}},a.createElement("div",{className:b(),ref:this.state.photos.length===this.props.maxCount?this._ref:void 0},this._renderDropzone(),this._renderPhotosPreview(),this._renderPopup()))},t}(a.Component);t.a=Object(m.b)(_)},275:function(e,t,n){"use strict";function o(e){var t;return null===(t=e.boxes)||void 0===t?void 0:t.split(";").map(function(e){return e.split(",")[0]})}n.d(t,"a",function(){return o})},2758:function(e,t,n){"use strict";var o=n(6),i=(n(1439),n(4)),r=n.n(i),a=n(2765),s=n(7),c=n(8),u=n(412),l=n(117),d=!("undefined"==typeof window||!window.document||!window.document.createElement);var p=void 0;function h(){return void 0===p&&(p=function(){if(!d)return!1;if(!window.addEventListener||!window.removeEventListener||!Object.defineProperty)return!1;var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t)}catch(o){}return e}()),p}function f(e){e.handlers===e.nextHandlers&&(e.nextHandlers=e.handlers.slice())}function m(e){this.target=e,this.events={}}m.prototype.getEventHandlers=function(e,t){var n,o=String(e)+" "+String((n=t)?!0===n?100:(n.capture<<0)+(n.passive<<1)+(n.once<<2):0);return this.events[o]||(this.events[o]={handlers:[],handleEvent:void 0},this.events[o].nextHandlers=this.events[o].handlers),this.events[o]},m.prototype.handleEvent=function(e,t,n){var o=this.getEventHandlers(e,t);o.handlers=o.nextHandlers,o.handlers.forEach(function(e){e&&e(n)})},m.prototype.add=function(e,t,n){var o=this,i=this.getEventHandlers(e,n);f(i),0===i.nextHandlers.length&&(i.handleEvent=this.handleEvent.bind(this,e,n),this.target.addEventListener(e,i.handleEvent,n)),i.nextHandlers.push(t);var r=!0;return function(){if(r){r=!1,f(i);var a=i.nextHandlers.indexOf(t);i.nextHandlers.splice(a,1),0===i.nextHandlers.length&&(o.target&&o.target.removeEventListener(e,i.handleEvent,n),i.handleEvent=void 0)}}};var v="__consolidated_events_handlers__";function g(e,t,n,o){e[v]||(e[v]=new m(e));var i=function(e){if(e)return h()?e:!!e.capture}(o);return e[v].add(t,n,i)}var b=n(1441),_=n.n(b),y=n(585);function E(e,t){var n,o=(n=e,!isNaN(parseFloat(n))&&isFinite(n)?parseFloat(n):"px"===n.slice(-2)?parseFloat(n.slice(0,-2)):void 0);if("number"==typeof o)return o;var i=function(e){if("%"===e.slice(-1))return parseFloat(e.slice(0,-1))/100}(e);return"number"==typeof i?i*t:void 0}var w={above:"above",inside:"inside",below:"below",invisible:"invisible"};var C="<Waypoint> expected to receive a single React element child.\n\nSee https://goo.gl/LrBNgw for more info.";function x(e){if(e)try{r.a.Children.only(e)}catch(t){throw new Error(C)}}function S(e){return"string"==typeof e.type}var k="<Waypoint> needs a DOM element to compute boundaries. The child you passed is neither a DOM element (e.g. <div>) nor does it use the innerRef prop.\n\nSee https://goo.gl/LrBNgw for more info.";var P=void 0,I=[];function T(e){I.push(e),P||(P=setTimeout(function(){P=null;for(var e=void 0;e=I.shift();)e()},0));var t=!0;return function(){if(t){t=!1;var n=I.indexOf(e);-1!==n&&(I.splice(n,1),!I.length&&P&&(clearTimeout(P),P=null))}}}var O=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var R={topOffset:"0px",bottomOffset:"0px",horizontal:!1,onEnter:function(){},onLeave:function(){},onPositionChange:function(){},fireOnRapidScroll:!0},N=void 0!==r.a.PureComponent?r.a.PureComponent:r.a.Component,j=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refElement=function(e){return n._ref=e},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,N),O(t,[{key:"componentWillMount",value:function(){x(this.props.children)}},{key:"componentDidMount",value:function(){var e=this;t.getWindow()&&(this.cancelOnNextTick=T(function(){e.cancelOnNextTick=null,function(e,t){if(e&&!S(e)&&!t)throw new Error(k)}(e.props.children,e._ref),e._handleScroll=e._handleScroll.bind(e),e.scrollableAncestor=e._findScrollableAncestor(),e.scrollEventListenerUnsubscribe=g(e.scrollableAncestor,"scroll",e._handleScroll,{passive:!0}),e.resizeEventListenerUnsubscribe=g(window,"resize",e._handleScroll,{passive:!0}),e._handleScroll(null)}))}},{key:"componentWillReceiveProps",value:function(e){x(e.children)}},{key:"componentDidUpdate",value:function(){var e=this;t.getWindow()&&this.scrollableAncestor&&(this.cancelOnNextTick||(this.cancelOnNextTick=T(function(){e.cancelOnNextTick=null,e._handleScroll(null)})))}},{key:"componentWillUnmount",value:function(){t.getWindow()&&(this.scrollEventListenerUnsubscribe&&this.scrollEventListenerUnsubscribe(),this.resizeEventListenerUnsubscribe&&this.resizeEventListenerUnsubscribe(),this.cancelOnNextTick&&this.cancelOnNextTick())}},{key:"_findScrollableAncestor",value:function(){var e=this.props,t=e.horizontal,n=e.scrollableAncestor;if(n)return function(e){return"window"===e?Object({}).window:e}(n);for(var o=this._ref;o.parentNode;){if((o=o.parentNode)===document.body)return window;var i=window.getComputedStyle(o),r=(t?i.getPropertyValue("overflow-x"):i.getPropertyValue("overflow-y"))||i.getPropertyValue("overflow");if("auto"===r||"scroll"===r)return o}return window}},{key:"_handleScroll",value:function(e){if(this._ref){var t=this._getBounds(),n=function(e){return e.viewportBottom-e.viewportTop==0?w.invisible:e.viewportTop<=e.waypointTop&&e.waypointTop<=e.viewportBottom?w.inside:e.viewportTop<=e.waypointBottom&&e.waypointBottom<=e.viewportBottom?w.inside:e.waypointTop<=e.viewportTop&&e.viewportBottom<=e.waypointBottom?w.inside:e.viewportBottom<e.waypointTop?w.below:e.waypointTop<e.viewportTop?w.above:w.invisible}(t),o=this._previousPosition;if(this._previousPosition=n,o!==n){var i={currentPosition:n,previousPosition:o,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom};this.props.onPositionChange.call(this,i),n===w.inside?this.props.onEnter.call(this,i):o===w.inside&&this.props.onLeave.call(this,i);var r=o===w.below&&n===w.above,a=o===w.above&&n===w.below;this.props.fireOnRapidScroll&&(r||a)&&(this.props.onEnter.call(this,{currentPosition:w.inside,previousPosition:o,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom}),this.props.onLeave.call(this,{currentPosition:n,previousPosition:w.inside,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom}))}}}},{key:"_getBounds",value:function(){var e=this.props.horizontal,t=this._ref.getBoundingClientRect(),n=t.left,o=t.top,i=t.right,r=t.bottom,a=e?n:o,s=e?i:r,c=void 0,u=void 0;this.scrollableAncestor===window?(c=e?window.innerWidth:window.innerHeight,u=0):(c=e?this.scrollableAncestor.offsetWidth:this.scrollableAncestor.offsetHeight,u=e?this.scrollableAncestor.getBoundingClientRect().left:this.scrollableAncestor.getBoundingClientRect().top);var l=this.props,d=l.bottomOffset;return{waypointTop:a,waypointBottom:s,viewportTop:u+E(l.topOffset,c),viewportBottom:u+c-E(d,c)}}},{key:"render",value:function(){var e=this,t=this.props.children;if(!t)return r.a.createElement("span",{ref:this.refElement,style:{fontSize:0}});if(S(t)||Object(y.isForwardRef)(t.type)){var n=function(n){e.refElement(n),t.ref&&("function"==typeof t.ref?t.ref(n):t.ref.current=n)};return r.a.cloneElement(t,{ref:n})}return r.a.cloneElement(t,{innerRef:this.refElement})}}]),t}();j.propTypes={children:_.a.node,debug:_.a.bool,onEnter:_.a.func,onLeave:_.a.func,onPositionChange:_.a.func,fireOnRapidScroll:_.a.bool,scrollableAncestor:_.a.any,horizontal:_.a.bool,topOffset:_.a.oneOfType([_.a.string,_.a.number]),bottomOffset:_.a.oneOfType([_.a.string,_.a.number])},j.above=w.above,j.below=w.below,j.inside=w.inside,j.invisible=w.invisible,j.getWindow=function(){if("undefined"!=typeof window)return window},j.defaultProps=R,j.displayName="Waypoint";var z=j,L=Object(s.a)("photo-wrapper"),A=16/9,D=function(e){function t(t){var n;return(n=e.call(this,t)||this)._videoAnalyticsRef=i.createRef(),n._log5SecondsTimeout=0,n._onClick=function(){var e=n.props,t=e.index,o=e.parentAnalyticsNode,i=e.onClick;if(o){var r=o.createChild("image",{index:t},{useParentState:!0,ignoreDefaultEvents:!0});r.attach(),r.logEvent("click"),r.detach()}i()},n._onLoad=function(){var e=n.props,t=e.onLoad,o=e.index;n.setState({isLoaded:!0}),t(o)},n._onPhotoInViewport=function(){n.props.isPreviewMode&&!n.state.inViewport&&n.setState({inViewport:!0})},n._setIframeSize=function(){var e,t,o=window.innerHeight,i=window.innerWidth-40,r=o-2*(n.props.hasShare?112:72);i/r<A?(e=i,t=Math.ceil(i/A)):(t=r,e=Math.ceil(r*A)),n.setState({width:e,height:t})},n._isReady=function(e,t){return void 0===e&&(e=n.props),void 0===t&&(t=n.state),t.inViewport||!e.isFrozen&&!e.isPreviewMode},n._renderImage=function(e){var t=n.props,o=t.isPreviewMode,r=t.isSelected,a=t.index;if(!n.state.inViewport&&o)return null;var s=i.createElement("img",{className:L("photo"),src:e.url,draggable:!1,onLoad:n._onLoad,onClick:n._onClick});return o||r?i.createElement(c.a,{name:"image",nodeState:{index:a},useParentState:!0},s):s},n._renderContent=function(){var e=n.props.photo,t=n.state,o=t.width,r=t.height;return"videoUrl"in e?i.createElement(c.a,{name:"video",nodeRef:n._videoAnalyticsRef,useParentState:!0,logClick:!0},i.createElement("div",{className:L("photo",{type:"video"})},i.createElement("iframe",{width:o,height:r,src:e.videoUrl,frameBorder:"0",allowFullScreen:!0}))):n._renderImage(e)},n._renderWrapper=function(){return i.createElement("div",{className:L({loaded:n.state.isLoaded,mode:n.props.isPreviewMode?"preview":"tape","ratio-inversed":n.props.isRatioInversed,size:n.props.size})},n._isReady()?n._renderContent():null)},n.state={isLoaded:t.isLoaded||"videoUrl"in t.photo,inViewport:Boolean(t.isLoaded)},n._setIframeSizeDebounced=Object(a.a)(n._setIframeSize,400),n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){"videoUrl"in this.props.photo&&this._setIframeSize()},n.componentDidUpdate=function(e,t){var n=this;t.isLoaded||!e.isFrozen||this.props.isFrozen||this.setState({isLoaded:!0});var o="videoUrl"in this.props.photo&&this._isReady();o!==("videoUrl"in e.photo&&this._isReady(e,t))&&(window.clearTimeout(this._log5SecondsTimeout),o&&(this._log5SecondsTimeout=window.setTimeout(function(){n._videoAnalyticsRef.current&&n._videoAnalyticsRef.current.logEvent("5s")},5e3)))},n.componentWillUnmount=function(){"videoUrl"in this.props.photo&&this._setIframeSizeDebounced.cancel(),window.clearTimeout(this._log5SecondsTimeout)},n.render=function(){return"videoUrl"in this.props.photo?i.createElement(i.Fragment,null,this._renderWrapper(),i.createElement(l.a,{type:"resize",listener:this._setIframeSizeDebounced})):i.createElement(z,{onEnter:this._onPhotoInViewport},this._renderWrapper())},t}(i.PureComponent);t.a=Object(u.b)(D)},293:function(e,t,n){e.exports=n.p+"_/e2d7155575fee181d439283e90435fc2.svg"},294:function(e,t,n){e.exports=n.p+"_/5524143df43338502f48540a82073467.svg"},298:function(e,t,n){"use strict";function o(e){var t=Number(e);return[1,2,3,4,5].includes(t)?t:null}function i(e,t){var n;return null!==(n=e.reviews.businessReviews[t.id])&&void 0!==n?n:function(e,t){var n,o,i,r,a;return{count:t.ratingData.reviewCount,isLoading:!1,items:null!==(n=null===(o=t.reviewResults)||void 0===o?void 0:o.reviews)&&void 0!==n?n:[],selectedTag:null===(i=e.config.query.reviews)||void 0===i?void 0:i.tag,tags:null!==(r=null===(a=t.reviewResults)||void 0===a?void 0:a.tags)&&void 0!==r?r:[],userReview:e.config.authorization?void 0:null}}(e,t)}n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o})},325:function(e,t,n){"use strict";var o=n(6),i=(n(359),n(361),n(363),n(365),n(367),n(4)),r=n(7),a=n(36),s=n(9),c=n(8);function u(e,t){return{facebook:{popup:{width:800,height:500},title:"Facebook",shareUrl:"http://www.facebook.com/sharer.php?u={url}"},twitter:{popup:{width:650,height:520},title:"Twitter",shareUrl:"https://twitter.com/intent/tweet?url={url}"},moimir:{popup:{width:560,height:400},title:"Мой мир",shareUrl:"http://connect.mail.ru/share?url={url}"},vkontakte:{popup:{width:550,height:420},title:"Вконтакте",shareUrl:"https://vk.com/share.php?url={url}"},ok:{popup:{width:560,height:370},title:"Одноклассники",shareUrl:"https://connect.ok.ru/offer?url={url}"},telegram:{title:"Телеграм",shareUrl:"https://telegram.me/share/url?url={url}"},instagram:{title:"Instagram"},lj:{title:"LiveJournal",shareUrl:"https://www.livejournal.com/update.bml?event={url}"},youtube:{title:"Youtube"},whatsapp:{title:"Whatsapp",shareUrl:"https://api.whatsapp.com/send?text={url}"}}[e]}var l=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._getServiceUrl=function(e){var n=t.props,o=n.url,i=(n.config,u(e).shareUrl);if(i)return i.replace("{url}",encodeURIComponent(o))},t._onClick=function(e,n){var o=t.props,i=u(e,o.config).popup;if(i){n.preventDefault();var r=i.width,a=i.height,s=window.open(t._getServiceUrl(e),"yashare",["scrollbars","resizable","left="+(window.screen.width-r)/2,"top="+(window.screen.height-a)/2,"width="+r,"height="+a].join(","));s&&s.focus(),o.onClick&&o.onClick()}},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.config,o=t.services,s=t.view,l=t.metrikaGoal,d=t.useLabels,p=Object(r.a)("social-share-view"+(s?"_"+s:""));return i.createElement("div",{className:p()},(o||n.share.services).map(function(t){var n=u(t).title,o=s&&s.startsWith("gallery")?void 0:{backgroundImage:"url("+a.c(t)+")"};return i.createElement(c.a,{key:t,name:"social",nodeState:{service:t},metrikaGoal:l,logClick:!0},i.createElement("a",{className:p("link",{service:t}),style:o,href:e._getServiceUrl(t),target:"_blank",onClick:function(n){return e._onClick(t,n)},title:n},d?n:null))}))},t}(i.PureComponent);t.a=Object(s.b)(l)},352:function(e,t,n){"use strict";n.d(t,"a",function(){return B}),n.d(t,"b",function(){return M});var o=n(10),i=n(679),r=n.n(i),a=n(680),s=n.n(a),c=n(681),u=n.n(c),l=n(682),d=n.n(l),p=n(683),h=n.n(p),f=n(684),m=n.n(f),v=n(685),g=n.n(v),b=n(686),_=n.n(b),y=n(687),E=n.n(y),w=n(688),C=n.n(w),x=n(689),S=n.n(x),k=n(690),P=n.n(k),I=n(691),T=n.n(I),O=n(692),R=n.n(O),N=n(693),j=n.n(N),z=n(694),L=n.n(z),A=n(695),D=n.n(A),F=[{id:"delivery",text:"Заказать доставку",shortText:"Заказать доставку",expandedText:"Выберите службу доставки",icon:r.a,altIcon:s.a,type:"booking",links:{"#yandex-eda":{icon:r.a,altIcon:s.a,text:"Яндекс.Еда",viaText:"через Яндекс.Еду",urlExtension:"utm_source=ymaps&utm_medium=yp&utm_campaign=rest_card&utm_content=desktop"}}},{id:"exhibits",text:"Посмотреть экспонаты",shortText:"Посмотреть экспонаты",expandedText:"Посмотреть экспонаты",type:"booking",links:{"#goskatalog":{text:"ГОСКАТАЛОГ"}}},{id:"table",text:"Забронировать столик",shortText:"Забронировать",expandedText:"Выберите сервис",icon:m.a,type:"booking",links:{"#afisha-ru-eda":{icon:u.a,text:"Афиша-Рестораны",viaText:"через Афиша-Рестораны",iframe:{width:"620px",height:"680px"}},"#tomesto":{icon:d.a,text:"ТоМесто",viaText:"через ТоМесто"}}},{id:"menu",text:"Посмотреть меню",shortText:"Меню",expandedText:"Меню",icon:h.a,type:"menu",links:{}},{id:"appointment",text:"Записаться онлайн",shortText:"Записаться онлайн",expandedText:"Выберите сервис",icon:m.a,type:"booking",links:{"#yclients":{icon:g.a,text:"YCLIENTS",viaText:"через YCLIENTS",iframe:{width:"500px",height:"calc(100vh - 217px)"}},"#gbooking":{icon:_.a,text:"GBooking",viaText:"через GBooking",iframe:{width:"721px",height:"491px"}},"#bookform":{icon:m.a,text:"Bookform",viaText:"через Bookform",iframe:{width:"1024px",height:"491px"}},"#med_me":{icon:E.a,text:"Med.me",viaText:"через Med.me",iframe:{width:"721px",height:"520px"}},"#docdoc":{icon:C.a,text:"DocDoc",viaText:"через DocDoc"},"#dikidi":{icon:S.a,text:"Dikidi",viaText:"через Dikidi",iframe:{width:"721px",height:"520px"}},"#napopravku":{icon:P.a,text:"Napopravku.ru",viaText:"через Napopravku.ru",iframe:{width:"721px",height:"582px"}},"#universe_soft":{icon:R.a,text:"Universe-Запись",viaText:"через Universe-Запись",iframe:{width:"721px",height:"582px"}},"#fitness1c":{icon:T.a,text:"1С:Салон красоты",viaText:"через 1С:Салон красоты",iframe:{width:"721px",height:"582px"}},"#arnica":{icon:j.a,text:"Арника",viaText:"через Арнику",iframe:{width:"721px",height:"582px"}},"#denta":{icon:D.a,text:"1Дента",viaText:"через 1Дента",iframe:{width:"721px",height:"582px"}},"#klinikon":{icon:L.a,text:"Клиника Онлайн",viaText:"через Клинику Онлайн",iframe:{width:"721px",height:"582px"}}}}];function B(e,t){return"ru"!==t.lang?[]:F.reduce(function(t,n){var i=[];if(n.links&&Object.keys(n.links).length>0)i=Object.keys(n.links).reduce(function(t,i){var r=e.find(function(e){return e.aref===i&&e.type===n.type});return r&&t.push(Object(o.a)(Object(o.a)({},r),n.links[i])),t},[]);else{var r=e.find(function(e){return e.type===n.type});r&&i.push(Object(o.a)(Object(o.a)({},r),{},{icon:n.icon,altIcon:n.altIcon,text:n.text}))}return 0!==i.length&&t.push(Object(o.a)(Object(o.a)({},n),{},{links:i})),t},[])}function M(e,t){return B(e,t).map(function(e){var t=e.links[0];return{text:e.text,icon:e.icon,altIcon:e.altIcon,type:t.type,iframe:t.iframe,href:t.href,urlExtension:t.urlExtension}})}},357:function(e,t,n){"use strict";n(467);var o=n(4),i=n(7),r=n(40),a=Object(i.a)("feedback-dialog");t.a=function(e){var t=e.isOpen,n=e.onClose,i=e.title,s=e.notification,c=e.children;return o.createElement(r.default,{isOpen:t,onClose:n,showCloseButton:!0},o.createElement("div",{className:a()},i?o.createElement("div",{className:a("title")},i):null,s?o.createElement("div",{className:a("notification"),dangerouslySetInnerHTML:{__html:s}}):null,c))}},358:function(e,t,n){"use strict";n(469);var o=n(4),i=n(7),r=n(15),a=n(8),s=n(471),c=n.n(s),u=n(472),l=n.n(u),d={cat:c.a,"master-cat":l.a},p=Object(i.a)("feedback-message-view");t.a=function(e){var t=e.view,n=void 0===t?"cat":t,i=e.submitStatus,s=e.message,c=e.title,u=e.buttonText,l=e.onClose;return o.createElement(a.a,{name:"feedback_final_message"},o.createElement("div",{className:p()},i?o.createElement(a.a,{name:"submit_status",nodeState:{submitStatus:i}}):null,o.createElement("img",{className:p("logo",{view:n}),src:d[n]}),o.createElement("div",{className:p("title")},c),o.createElement("div",{className:p("message")},s),o.createElement("div",{className:p("button")},o.createElement(a.a,{name:"ok",logClick:!0},o.createElement(r.a,{view:"primary",size:"medium",onClick:l},u||"Продолжить")))))}},359:function(e,t,n){},361:function(e,t,n){},363:function(e,t,n){},365:function(e,t,n){},367:function(e,t,n){},392:function(e,t,n){"use strict";n(505);var o=n(4),i=n(7),r=n(8),a=n(11),s=n(17),c=n(27),u=n(9),l=n(507),d=n.n(l),p=n(508),h=n.n(p),f=Object(i.a)("business-rating-edit-view"),m=Object(s.a)(c.b,u.b);t.a=m(function(e){return o.createElement("div",{className:f()},[1,2,3,4,5].map(function(t){var n=t<=(e.rating||0);return o.createElement(r.a,{key:t,name:"star",nodeState:{score:t,selected:n},logClick:!0},o.createElement("div",{onClick:function(){return e.onRatingClick(t)},className:f("star",{selected:n,size:e.size||"s",wide:e.isWideCard})},o.createElement(a.a,{url:e.size&&"s"!==e.size?h.a:d.a})))}))})},40:function(e,t,n){"use strict";n.r(t);var o=n(6),i=(n(56),n(4)),r=n(7),a=n(28),s=n(80),c=n(9),u=n(53),l=n(31),d=n(52),p=n(8),h=Object(r.a)("dialog"),f=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._container=i.createRef(),t._ref=i.createRef(),t._focusContainer=function(){if(t._container.current&&(!window.document.activeElement||!t._container.current.contains(window.document.activeElement))){var e=t._ref.current.scrollTop;t._container.current.focus(),t._ref.current.scrollTop=e}},t._onClose=function(){t.props.onClose()},t._onMouseDown=function(e){var n=e.currentTarget,o=!!(n.scrollHeight>n.offsetHeight)&&n.offsetWidth===n.clientWidth?15:0;e.target===e.currentTarget&&e.clientX+o<e.currentTarget.clientWidth&&t._onClose()},t._onScroll=function(){var e=t._ref.current,n=e.clientHeight+e.scrollTop>=e.scrollHeight;t.props.onScrollToEnd&&n&&t.props.onScrollToEnd()},t._renderClose=function(){if(!t.props.showCloseButton)return null;var e=Boolean(!1);return i.createElement(p.a,{name:"close",useParentState:!0,logClick:!0},i.createElement(l.a,{onClick:t._onClose,offset:e?"small":"large",circle:!0,usePortal:!1}))},t._renderContainer=function(){var e=t.props,n=Boolean(!1);return i.createElement("div",{className:h("container"),ref:t._container,tabIndex:1},i.createElement(s.a,{handlers:{key:u.a.ESC,callback:t._onClose,allowInEditable:!0},stopPropagation:!0}),i.createElement("div",{className:h("content",{"with-title":n})},n?i.createElement(a.a,{selector:".body"},i.createElement("div",{className:h("title")},e.mobileTitle)):null,t._renderClose(),e.children))},t._renderDialog=function(){var e=t.props;return i.createElement(p.a,{name:"dialog",useParentState:!0,logClick:!0},i.createElement(i.Fragment,null,i.createElement("div",{className:h({transparent:e.transparent,fullscreen:e.fullscreen,"fit-mobile-content":e.fitMobileContent}),style:e.zIndex?{zIndex:e.zIndex}:void 0,ref:t._ref,onMouseDown:t._onMouseDown,onTouchMove:function(e){return e.preventDefault()},onScroll:t.props.onScrollToEnd?t._onScroll:void 0},t._renderContainer()),i.createElement("div",{className:h("paranja"),style:e.zIndex?{zIndex:e.zIndex-1}:void 0})))},t}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.isOpen&&this._focusContainer()},n.componentDidUpdate=function(e){!e.isOpen&&this.props.isOpen&&this._focusContainer()},n.render=function(){var e=this.props,t=e.isOpen?this._renderDialog():null;return e.inline?i.createElement(d.a,null,t):i.createElement(a.a,{selector:".body"},i.createElement(d.a,null,t))},t}(i.Component);t.default=Object(c.b)(f)},405:function(e,t,n){"use strict";var o=n(6),i=n(4),r=n(9),a=n(238),s=(n(461),n(7)),c=n(8),u=n(15),l=Object(s.a)("feedback-form"),d=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onSubmit=function(e){e.preventDefault();var n=t.props,o=n.isValid,i=n.onSubmit;o&&i(e)},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.label,n=e.children,o=e.isValid,r=e.onCancel;return i.createElement("form",{className:l(),onSubmit:this._onSubmit},t?i.createElement("div",{className:l("label")},t):null,n,i.createElement("div",{className:l("buttons")},i.createElement("div",{className:l("submit")},i.createElement(c.a,{name:"submit",logClick:!0},i.createElement(u.a,{disabled:!o,type:"submit",view:"primary",size:"small"},"Отправить"))),i.createElement("div",{className:l("cancel")},i.createElement(c.a,{name:"cancel",logClick:!0},i.createElement(u.a,{view:"secondary-blue",size:"small",onClick:r},"Отменить")))))},t}(i.Component),p=(n(463),n(156)),h=Object(s.a)("feedback-textarea-field"),f=function(e){var t=e.stateName,n=e.label,o=e.onChange,r=e.value,a=void 0===r?"":r,s=e.autoFocus,c=e.placeholder,u=e.labelPostfix,l=void 0===u?":":u,d=e.resizeable;return i.createElement("div",{className:h({name:t})},i.createElement("label",{className:h("label")},n,l),i.createElement(p.a,{size:"l",rows:3,onChange:o,value:a,autoFocus:s,placeholder:c,resizeable:d}))},m=(n(465),n(101)),v=Object(s.a)("feedback-input-field"),g=function(e){var t=e.label,n=e.stateName,o=e.value,r=void 0===o?"":o,a=e.onChange,s=e.autoFocus,c=e.placeholder,u=e.showClear,l=e.labelPostfix,d=void 0===l?":":l,p=e.type,h=e.autoComplete;return i.createElement("div",{className:v({name:n})},i.createElement("label",{className:v("label")},t,d),i.createElement(m.a,{view:"stroke",onChange:a,value:r,autoFocus:s,placeholder:c,showClear:u,type:p,autoComplete:h}))},b=function(e){function t(t){var n;(n=e.call(this,t)||this)._onSubmit=function(e){var t=n.props,o=t.hideContactFields,i=t.onSubmit;e.preventDefault(),i(o?{comment:n.state.comment}:n.state)},n._isFormValid=function(){var e=n.state,t=e.comment,o=e.email;return a.h(t)&&(n.props.hideContactFields||a.a(o))};var o=t.config.authorization||{},i=o.fullName,r=void 0===i?"":i,s=o.email,c=void 0===s?"":s;return n.state={comment:"",name:r,email:c},n}return Object(o.a)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.formLabel,o=void 0===n?"":n,r=t.commentLabel,a=t.autoFocus,s=t.onCancel,c=t.hideContactFields,u=this.state,l=u.comment,p=u.name,h=u.email;return i.createElement(d,{label:o,isValid:this._isFormValid(),onCancel:s,onSubmit:this._onSubmit},i.createElement(f,{onChange:function(t){return e.setState({comment:t})},label:r,value:l,autoFocus:a,stateName:"comment",resizeable:!0}),c?null:i.createElement(i.Fragment,null,i.createElement(g,{onChange:function(t){return e.setState({name:t})},label:"Ваше имя",value:p,stateName:"username"}),i.createElement(g,{onChange:function(t){return e.setState({email:t})},label:"Ваш e-mail (обязательно)",value:h,stateName:"email"})))},t}(i.Component);t.a=Object(r.b)(b)},415:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(316),i=n(98),r=864e5;function a(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var a=Object(i.a)(e,n),s=Object(i.a)(t,n),c=a.getTime()-Object(o.a)(a),u=s.getTime()-Object(o.a)(s);return Math.round((c-u)/r)}},42:function(e,t,n){"use strict";var o=n(6),i=(n(81),n(4)),r=n(7),a=n(116),s=n(97),c=n(46),u=1,l=Object(r.a)("sticky-wrapper"),d=function(e){function t(t){var n;return(n=e.call(this,t)||this)._containerRef=i.createRef(),n._isDisabled=function(e){return void 0===e&&(e=n.props),e.disabled||!e.scrollId},n._registerContainer=function(){var e,t=n.props,o=null!==(e=t.order)&&void 0!==e?e:u;if(n._containerRef.current){var i=t.scrollId;if(!i)return;t.registerStickyElement(i,o,n._containerRef,n._onPositionUpdate),t.updateStickyElement(i,o,n._containerRef.current.offsetHeight),n._unregisterContainer=function(){t.unregisterStickyElement(i,o)}}},n._onIntersectionChange=function(e){n.setState({fixed:!e})},n._onPositionUpdate=function(e){var t,o;n.setState({position:e}),null===(t=(o=n.props).onOffsetChange)||void 0===t||t.call(o,e)},n._onIntersectionParentBoundaries=function(e){n.setState({reachedParentBoundaries:!e})},n.state={fixed:!1,reachedParentBoundaries:!1,position:0},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._isDisabled()||this._registerContainer()},n.componentDidUpdate=function(e,t){var n=this.props,o=this.state,i=n.children!==e.children;(n.children&&i||this._isDisabled(e)&&!this._isDisabled())&&this._registerContainer(),n.onFixedChange&&t.fixed!==o.fixed&&n.onFixedChange(o.fixed)},n.componentWillUnmount=function(){var e;null===(e=this._unregisterContainer)||void 0===e||e.call(this)},n.render=function(){var e,t=this.props,n=this.state;return t.children?this._isDisabled()?t.children:i.createElement(i.Fragment,null,"top"===t.position?i.createElement(c.a,{threshold:0,style:n.position?{transform:"translateY(-"+n.position+"px)"}:void 0,className:l("observer-target"),onChange:this._onIntersectionChange},null):null,i.createElement("div",{className:l({position:t.position,fixed:n.fixed,header:t.header,border:null!==(e=t.border)&&void 0!==e?e:"auto",wide:t.wide,"reached-boundaries":n.reachedParentBoundaries}),style:{top:this.state.position,zIndex:t.zIndex},ref:this._containerRef},i.createElement(c.a,{threshold:0,style:n.position?{transform:"translateY(-"+n.position+"px)"}:void 0,className:l("observer-target",{absolute:!0}),onChange:this._onIntersectionParentBoundaries},null),t.children)):null},t}(i.Component);t.a=Object(s.b)(Object(a.b)(d))},459:function(e,t,n){"use strict";n.r(t);var o=n(6),i=n(1418),r=n.n(i),a=n(4),s=n.n(a),c=n(7),u=n(2799),l=n(111),d=n(86),p=n(47),h=n(53),f=n(21),m=n(411),v=n.n(m),g=n(8),b=n(9),_=n(80),y=n(38),E=n(1010),w=n(1011),C=n(164),x=n(117),S=n(581),k=n(716),P=n(20),I=n(325),T=n(118),O=Object(P.a)({resolved:{},chunkName:function(){return"promo"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("promo").then(n.bind(null,144))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var o=this.resolve(t);return n(o)},resolve:function e(){return 144}}),R=.55,N="all 0.25s ease-out",j=6,z=30,L=16,A=Object(c.a)("photos-player-view"),D=function(e){function t(t){var n;return(n=e.call(this,t)||this)._tapeRef=a.createRef(),n._photosAnalyticsRef=a.createRef(),n._ref=a.createRef(),n._tapeScrollPosition=0,n._touchStartPosition=0,n._touchScrollFrom=0,n._touchEndPosition=0,n._setTapePosition=function(e,t){var o=(void 0===t?{}:t).animated;n._tapeScrollPosition=e,n._tapeRef.current&&(n._tapeRef.current.style[Object(l.b)().styles.transform]="translate("+-e+"px, 0)",n._tapeRef.current.style[Object(l.b)().styles.transition]=o?N:"all 0s ease 0s")},n._setPositionByIndex=function(e,t){var o=(void 0===t?{}:t).animated,i=n._ref.current;n._setTapePosition(e*(i.offsetWidth+j),{animated:o})},n._showPhoto=function(e,t){var o=(void 0===t?{}:t).animated,i=n.props.onChangeSelectedPhoto;n._setPositionByIndex(e,{animated:o}),i&&i(e)},n._showPreviousPhoto=function(){var e=n.props.selectedIndex;null!==e&&e>0&&n._showPhoto(e-1,{animated:!0})},n._showNextPhoto=function(){var e=n.props,t=e.data,o=e.selectedIndex;null!==o&&o<t.length-1&&n._showPhoto(o+1,{animated:!0})},n._onPhotoClick=function(e){n.props.isPreviewMode&&n._showPhoto(e)},n._onTouchStart=function(e){n.props.isPreviewMode||(n._touchStartPosition=e.touches[0].pageX,n._touchEndPosition=n._touchStartPosition,n._touchScrollFrom=n._tapeScrollPosition,n.setState({isTransitionDisabled:!0}))},n._onTouchMove=function(e){if(!n.props.isPreviewMode){var t=e.touches[0].pageX,o=n._ref.current.offsetWidth,i=(n.props.data.length-1)*(o+j),r=n._touchScrollFrom-(t-n._touchStartPosition);r<0?r=-F(-r,R,o):r>i&&(r=i+F(r-i,R,o)),n._touchEndPosition=t,n._setTapePosition(r)}},n._onTouchEnd=function(){if(!n.props.isPreviewMode){var e=n.props.selectedIndex,t=n._touchEndPosition-n._touchStartPosition;if(n.setState({isTransitionDisabled:!1}),null!==e){var o=e;Math.abs(t)>z&&(t>0?o--:t<0&&o++),o=Math.min(Math.max(0,o),n.props.data.length-1),n._showPhoto(o)}}},n._onEscape=function(){n._photosAnalyticsRef.current&&n._photosAnalyticsRef.current.logEvent("keypress",{key:"esc"}),n._onClose()},n._onNext=function(e){n.state.isPopupOpened||(n._photosAnalyticsRef.current&&n._photosAnalyticsRef.current.logEvent("keypress",{key:e===h.a.SPACE?"space":"right"}),n._showNextPhoto())},n._onPrev=function(){n.state.isPopupOpened||(n._photosAnalyticsRef.current&&n._photosAnalyticsRef.current.logEvent("keypress",{key:"left"}),n._showPreviousPhoto())},n._onClose=function(){var e=n.props;n._setPositionByIndex(0),e.onClose()},n._onResize=function(){var e=n.props.selectedIndex;n.setState({isTransitionDisabled:!0},function(){null!==e&&(n._showPhoto(e),setTimeout(function(){return n.setState({isTransitionDisabled:!1})},0))})},n._onPopupVisibilityChange=function(e){n.setState({isPopupOpened:e})},n._onLeftClick=function(e){0===e.button&&!n.props.isPreviewMode&&(e.clientX<window.innerWidth/2?n._showPreviousPhoto():n._showNextPhoto())},n._renderKeyListeners=function(){return a.createElement(_.a,{handlers:[{key:h.a.ESC,callback:n._onEscape},{key:h.a.SPACE,callback:function(){return n._onNext(h.a.SPACE)}},{key:h.a.RIGHT,callback:function(){return n._onNext(h.a.RIGHT)}},{key:h.a.LEFT,callback:n._onPrev}],stopPropagation:!0})},n._renderUserIcon=function(e){return a.createElement(k.a,{seed:e,char:e[0]})},n._renderCopyright=function(e,t){var o=e.copyright;if(!o)return null;var i=n.props.config,r=o.updateTime?Object(p.a)(new Date(o.updateTime),i,{isShortDate:!1}):null,s=o.imageUrlTemplate?o.imageUrlTemplate.replace("%s","islands-"+(t.has.retinaDisplay?"retina-":"")+"middle"):null;return a.createElement("div",{className:A("copyright",{short:!r})},a.createElement("div",{className:A("copyright-avatar")},s?a.createElement(g.a,{name:"copyright_url_image",nodeState:{name:o.name},useParentState:!0,logClick:!0},a.createElement("a",{href:o.url,target:"_blank"},a.createElement("div",{className:A("icon"),style:{backgroundImage:"url("+s+")"}}))):o.hasUserIcon?n._renderUserIcon(o.name):null),a.createElement("div",{className:A("text-container",{short:!r,"no-image":!s})},o.url?a.createElement(g.a,{name:"copyright_url",nodeState:{name:o.name},useParentState:!0,logClick:!0},a.createElement("a",{className:A("link"),href:o.url,target:"_blank"},o.name)):a.createElement("div",{className:A("name")}," ",o.name),r?a.createElement("div",{className:A("date")},Object(u.a)(r)):null))},n._renderFooter=function(e,t){var o=n.props;if("videoUrl"in o.data[0])return null;var i=(function(params){return params.index+" из "+params.count;})({index:(o.selectedIndex||0)+1,count:o.data.length}),r=n._renderCopyright(e,t);return a.createElement("div",{className:A("footer")},a.createElement("div",{className:A("footer-content")},r,a.createElement("div",{className:A("index-text",{centered:null===r})},i)),n._renderPhotoAdvert())},n._renderControls=function(){var e=n.props,t=e.selectedIndex,o=e.data,i="number"==typeof t?o[t]:null;return a.createElement("div",{className:A("action-buttons-container")},a.createElement(E.a,{selectedIndex:t||0,currentPhotoId:i&&i.id||void 0,totalPhotoCount:o.length,businessId:"businessId"in e.meta?e.meta.businessId:void 0,isShareDisabled:e.isShareDisabled||"videoUrl"in o[0],isPreviewMode:e.isPreviewMode,businessLinks:n.props.businessLinks,bookingData:n.props.bookingData,checkAuthorization:n.props.checkAuthorization,theme:"dark",onClose:n._onClose,onPreviousAreaClick:n._showPreviousPhoto,onAddPhotosClick:e.onAddPhotosClick,onNextAreaClick:n._showNextPhoto,onPopupVisibilityChange:n._onPopupVisibilityChange,renderAdditionalControls:e.renderAdditionalControls,controlsContainerRef:function(e){return n.setState({controlsWidth:(null==e?void 0:e.getBoundingClientRect().width)||0})}}))},n._renderControlsContainer=function(){var e=n.props,t=e.meta,o=e.config,i=e.openOrgpage,r="businessId"in t&&t.businessId,s=a.createElement("div",{className:A("title",{size:t.textSize})},t.name||t.description);return a.createElement("div",{className:A("controls-container")},a.createElement("div",{className:A("information"),style:{width:window.innerWidth-n.state.controlsWidth-L}},r&&i?a.createElement(g.a,{name:"gallery_title_url",nodeState:{businessId:r},useParentState:!0,logClick:!0},a.createElement(y.a,{href:f.c({id:r},{},o),onLeftClick:function(){return i(r)}},a.createElement("div",{className:A("title-url")},s))):s,t.name&&t.description?a.createElement("div",{className:A("description",{size:t.textSize})},t.description):null),n._renderControls())},n._renderPhotoAdvert=function(){var e=n.props,t=e.config.banner;return!t||e.meta.skipAdvert?null:a.createElement(O,{className:A("footer-advert",{active:n.state.showPhotoAdvert}),skipFallback:!0,onRender:function(){return n.setState({showPhotoAdvert:!0})},onHide:function(){return n.setState({showPhotoAdvert:!1})},id:t.blockIds.galleryPhoto})},n._renderShare=function(e){n.props;return e?a.createElement("div",{className:A("share")},a.createElement(I.a,{url:e.url,view:"gallery-row",services:["telegram","facebook","vkontakte","ok","twitter"]}),e.subtitle?a.createElement("div",{className:A("share-description")},e.subtitle):null):null},n._renderPhotoList=function(){var e=n.props,t="number"==typeof e.selectedIndex?e.data[e.selectedIndex]:null,o=Boolean(t&&"share"in t&&!0);return a.createElement(w.a,{data:e.data,selectedIndex:e.selectedIndex,isPreviewMode:Boolean(e.isPreviewMode),onPhotoClick:n._onPhotoClick,skipAdvert:e.meta.skipAdvert,hasShare:o,itemGap:j,columnsCount:4})},n.state={isPopupOpened:!1,isTransitionDisabled:!0,showPhotoAdvert:!1,controlsWidth:0},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props.selectedIndex;null!==t&&v()(function(){e._showPhoto(t),setTimeout(function(){return e.setState({isTransitionDisabled:!1})},0)}),window.document.activeElement&&window.document.activeElement.blur()},n.componentDidUpdate=function(e){var t=e.selectedIndex,n=e.isPreviewMode,o=this.props,i=o.isPreviewMode,r=o.selectedIndex;i&&!n?this._setTapePosition(0):r&&r!==t&&this._setPositionByIndex(r)},n.render=function(){var e=this,t=this.state.isTransitionDisabled,n=this.props,o=n.data,i=n.meta,r=n.selectedIndex,s=n.isPreviewMode,c=n.searchText,u=s?"preview":"tape",l="number"==typeof r?o[r]:null,p=l&&"share"in l?l.share:void 0;return a.createElement(g.a,{name:"photos",nodeState:{mode:u,origin:i.origin,permalink:"businessId"in i?i.businessId:void 0,total:o.length},nodeRef:this._photosAnalyticsRef,logClick:!0},a.createElement("div",{className:A({mode:u,"disable-transition":t}),ref:this._ref},this._renderControlsContainer(),a.createElement("div",{className:A("tape-layout"),ref:this._tapeRef,onClick:this._onLeftClick,onTouchStart:this._onTouchStart,onTouchMove:this._onTouchMove,onTouchEnd:this._onTouchEnd},s?a.createElement(C.a,{native:!0,width:"dynamic",cacheKey:"photo-list"},this._renderPhotoList()):this._renderPhotoList()),s?a.createElement("div",{className:A("icon-watermark")},a.createElement(S.a,{searchText:c,isNegative:!0})):null,this._renderKeyListeners(),s||!l?null:a.createElement(d.a,null,function(t){return e._renderFooter(l,t)}),s?null:this._renderShare(p)),a.createElement(x.a,{type:"resize",listener:this._onResize}),a.createElement(T.a,{type:"photos_page"}))},t}(a.PureComponent);function F(e,t,n){return(1-1/(e*t/n+1))*n}t.default=Object(b.b)(D)},460:function(e,t,n){"use strict";var o=n(6),i=n(4),r=n(199),a=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getUrl=function(e){return e.urlExtension?e.href+(e.href.includes("?")?"&":"?")+(e.urlExtension||""):e.href},n._onClick=function(){var e=n.props.link;e.iframe?n.setState({showIframe:!0}):window.open(n._getUrl(e),"_blank")},n._onClose=function(){n.setState({showIframe:!1})},n._renderIframe=function(){var e=n.props.link;return e.iframe?i.createElement(r.a,{isOpen:n.state.showIframe,href:n._getUrl(e),text:e.text,iframeStyle:e.iframe,onClose:n._onClose}):null},n.state={showIframe:!1},n}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(i.Fragment,null,this._renderIframe(),e.children(this._onClick))},t}(i.Component);t.a=a},461:function(e,t,n){},463:function(e,t,n){},465:function(e,t,n){},467:function(e,t,n){},469:function(e,t,n){},471:function(e,t,n){e.exports=n.p+"_/3ba951336906edc2a90ef2894bac5e7a.svg"},472:function(e,t,n){e.exports=n.p+"_/22c1e477f40c183875e46adc6e379e76.svg"},501:function(e,t,n){"use strict";var o=n(6),i=(n(174),n(4)),r=n(272),a=n(9),s=n(185),c={min:[100,68],max:[5e3,5e3]},u=function(e){function t(){return e.apply(this,arguments)||this}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(r.a,{maxSize:10,photos:e.photos,accept:e.accept,removeUploaded:e.removeUploaded,resolutionRanges:c,photosLoaderProvider:function(t){return s.b.uploadBusinessPhoto({photo:t,businessId:e.businessId,config:e.config})},setPhotosLoader:e.setPhotosLoader,onChange:e.onChange})},t}(i.Component);t.a=Object(a.b)(u)},502:function(e,t,n){"use strict";n(503);var o=n(4),i=n(7),r=n(392),a=Object(i.a)("business-review-form-stars-view");t.a=function(e){var t=e.rating,n=e.onClick;return o.createElement("div",{className:a()},o.createElement("div",{className:a("label")},"Оцените это место"),o.createElement("div",{className:a("stars")},o.createElement(r.a,{rating:t,onRatingClick:n})))}},503:function(e,t,n){},505:function(e,t,n){},507:function(e,t,n){e.exports=n.p+"_/0a8c8bb5aac9a3e8d8d88f46c40359d1.svg"},508:function(e,t,n){e.exports=n.p+"_/1bf84e438bf2d18fcfde8123d95b1a08.svg"},509:function(e,t,n){"use strict";n(510);var o=n(4),i=n(9),r=n(7),a=n(156),s=Object(r.a)("business-review-form-comment-view");t.a=Object(i.b)(function(e){var t=e.description,n=(e.config,e.onChange);return o.createElement("div",{className:s()},o.createElement("div",{className:s("label")},"Комментарий"),o.createElement("span",{className:s("textarea")},o.createElement(a.a,{size:"m",value:t,rows:6,placeholder:"Поделитесь мнением про плюсы и минусы этого места",onChange:n})))})},510:function(e,t,n){},56:function(e,t,n){},679:function(e,t,n){e.exports=n.p+"_/959a45d99f74c40ea3f81d94ee17e4fd.svg"},680:function(e,t,n){e.exports=n.p+"_/9a9691e5372360c05ac11a4e8b8ebeb7.svg"},681:function(e,t,n){e.exports=n.p+"_/6e7236a4cc4e5311d3722dd5b1eea888.svg"},682:function(e,t,n){e.exports=n.p+"_/05c75ef6ccc8e531183c874ea3b0f685.svg"},683:function(e,t,n){e.exports=n.p+"_/35fe0e34f412475d940eff96e8abb21d.svg"},684:function(e,t,n){e.exports=n.p+"_/836e2081a5af14bd198c0a4482f53b86.svg"},685:function(e,t,n){e.exports=n.p+"_/1027b377ecd358a9fec4b360a3d86cd9.svg"},686:function(e,t,n){e.exports=n.p+"_/aafefa443ade5cd27c3f6aac82731caa.svg"},687:function(e,t,n){e.exports=n.p+"_/87305b47859bf349c870b8b54c60c112.svg"},688:function(e,t,n){e.exports=n.p+"_/e34933a2811df331657d8197434dae7d.svg"},689:function(e,t,n){e.exports=n.p+"_/fddab98eb8a46d4d54ad29f5a0f8f6da.svg"},690:function(e,t,n){e.exports=n.p+"_/33f075508d335a7695fd47c6c0d19d1e.svg"},691:function(e,t,n){e.exports=n.p+"_/00a6b379f433da92bac94a4bde562057.svg"},692:function(e,t,n){e.exports=n.p+"_/d491c97607305be8de04da939b618982.svg"},693:function(e,t,n){e.exports=n.p+"_/1c0a8bc8f11a9c9a7f17aab40eb2eaa0.svg"},694:function(e,t,n){e.exports=n.p+"_/630eb459a4d3e3796145f87ff2145cd2.svg"},695:function(e,t,n){e.exports=n.p+"_/d2c4543c554b7db48c2a082a440e3608.svg"},705:function(e,t,n){"use strict";var o=n(6),i=(n(706),n(708),n(4)),r=n(7),a=n(8),s=Object(r.a)("feedback-selector-view"),c=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._renderItem=function(e){var t=e.name,n=e.href,o=e.text,r=e.target,a=e.onClick,c=s("item",{name:t});return n?i.createElement("a",{className:c,href:n,target:r||"_blank",onClick:a},o):i.createElement("div",{className:c,onClick:a},o)},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.type,o=t.items;return i.createElement("div",{className:s({type:n})},o.map(function(t){return i.createElement(a.a,{key:t.name,name:"item",nodeState:{id:t.name},logClick:!0},e._renderItem(t))}))},t}(i.Component);t.a=c},706:function(e,t,n){},708:function(e,t,n){},710:function(e,t,n){},712:function(e,t,n){},714:function(e,t,n){e.exports=n.p+"_/68bd595d74a136f75d057c4706256540.svg"},715:function(e,t,n){var o,i;window,void 0===(i="function"==typeof(o=function(){"use strict";function e(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}var t="undefined"==typeof console?function(){}:function(e){console.error(e)},n=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],o=n.length;function i(e){var n=getComputedStyle(e);return n||t("Style returned "+n+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),n}var r,a=!1;function s(t){if(function(){if(!a){a=!0;var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style.boxSizing="border-box";var n=document.body||document.documentElement;n.appendChild(t);var o=i(t);r=200==Math.round(e(o.width)),s.isBoxSizeOuter=r,n.removeChild(t)}}(),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var c=i(t);if("none"==c.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<o;t++)e[n[t]]=0;return e}();var u={};u.width=t.offsetWidth,u.height=t.offsetHeight;for(var l=u.isBorderBox="border-box"==c.boxSizing,d=0;d<o;d++){var p=n[d],h=c[p],f=parseFloat(h);u[p]=isNaN(f)?0:f}var m=u.paddingLeft+u.paddingRight,v=u.paddingTop+u.paddingBottom,g=u.marginLeft+u.marginRight,b=u.marginTop+u.marginBottom,_=u.borderLeftWidth+u.borderRightWidth,y=u.borderTopWidth+u.borderBottomWidth,E=l&&r,w=e(c.width);!1!==w&&(u.width=w+(E?0:m+_));var C=e(c.height);return!1!==C&&(u.height=C+(E?0:v+y)),u.innerWidth=u.width-(m+_),u.innerHeight=u.height-(v+y),u.outerWidth=u.width+g,u.outerHeight=u.height+b,u}}return s})?o.call(t,n,t,e):o)||(e.exports=i)},716:function(e,t,n){"use strict";var o=n(13),i=(n(717),n(4)),r=n(7),a=n(8),s=Object(r.a)("user-icon-view");t.a=function(e){var t=e.backgroundImage,n=e.seed,r=e.char,c=e.url,u=t?void 0:function(e){return e.toString().split("").reduce(function(e,t){return e+t.charCodeAt(0)},0)%7+1}(n),l=!t&&r?r.toUpperCase():null,d={className:s({icon:u}),style:t?{backgroundImage:"url("+t+")"}:void 0};return c?i.createElement(a.a,{name:"user_icon",logClick:!0},i.createElement("a",Object(o.a)({target:"_blank",href:c},d),l)):i.createElement("div",d,l)}},717:function(e,t,n){},72:function(e,t,n){"use strict";n(103),n(105);var o=n(4),i=n(7),r=n(31),a=n(46),s=Object(i.a)("sidebar-panel-header-view"),c=o.memo(function(e){return o.createElement("div",{className:[s({bordered:e.showBorder,view:e.view}),e.className].filter(Boolean).join(" ")},o.createElement("div",{className:s("title",{big:e.big})},e.title||e.children),o.createElement(a.a,{onChange:e.onChangeVisibiltyTitle},null),o.createElement("div",{className:s("controls")},e.onClose?o.createElement(r.a,{onClick:function(t){t.stopPropagation(),e.onClose()},relative:!0,circle:!0}):null))});c.displayName="SidebarPanelHeaderView",t.a=c},77:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"f",function(){return u}),n.d(t,"e",function(){return c}),n.d(t,"g",function(){return d}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return a}),n.d(t,"d",function(){return p});var o=n(2779),i={fax:"факс",phone:"тел.","phone-fax":"тел./факс"},r={ru:{countryCode:"+7 ",phonePlaceholder:"+7 XXX XXX XX XX",phoneFormat:"923 456 78 90",phoneMask:"123 *** ** 00"},kz:{countryCode:"+7 ",phonePlaceholder:"+7 XXX XXX XX XX",phoneFormat:"923 456 78 90",phoneMask:"123 *** ** 00"},ua:{countryCode:"+380 ",phonePlaceholder:"+380 XX XXX XX XX",phoneFormat:"44 123 45 67",phoneMask:"12 *** ** 00"},tr:{countryCode:"+90 ",phonePlaceholder:"+90 XXX XXX XXXX",phoneFormat:"123 456 7890",phoneMask:"123 *** ** 00"},by:{countryCode:"+375 ",phonePlaceholder:"+375 XX XXX XXXX",phoneFormat:"29 456 7890",phoneMask:"123 *** ** 00"},uz:{countryCode:"+998 ",phonePlaceholder:"+998 XX XXX XXXX",phoneFormat:"35 111 2233",phoneMask:"35 *** ** 00"}};function a(e){return Object.values(r).find(function(t){return t&&e.startsWith(t.countryCode.replace(/\s/,""))})}function s(e){return r[e]}function c(e,t,n){var o=(void 0===n?{}:n).useRealty,i=void 0===o||o,r=e.phones||[],a=e.realty;return a&&a.company.phone&&i&&!e.advert&&(r=[{number:a.company.phone,counter:a.company.phoneCounter+"&source=map&crc="+t.xscriptCsrfToken,type:"phone",info:"Офис продаж"}]),r}function u(e){return i[e]||e}function l(e,t,n){void 0===n&&(n="");var o=e.slice(n.trim().length).replace(/\D/g,"").match(/\d/g)||[],i=t.split(/\d/);return n&&i.pop(),n+i.map(function(e,t){return o[t]&&e+o[t]}).join("")}function d(e,t,n){return void 0===n&&(n=""),n+e.slice(n.length).replace(/./g,function(e,n){return"*"===t[n]?"*":e})}function p(e,t){var n=e.info,i=e.type,r="fax"===i?"факс":"phone-fax"===i?"факс":void 0;return Object(o.a)(n?r?n+" ("+r+")":n:r)}},771:function(e,t,n){"use strict";var o=n(6),i=(n(772),n(4)),r=n(7),a=n(18),s=n(8),c=n(15),u=n(39),l=Object(r.a)("add-photos-form-view"),d=function(e){function t(t){var n;return(n=e.call(this,t)||this)._setPhotosLoader=function(e){n._photosLoader=e},n._onChange=function(e){n.setState({photosCount:e.length})},n._onCancel=function(){n.setState({isLoading:!1}),n.props.onClose()},n._onSubmit=function(){n._photosLoader&&(n.setState({isLoading:!0}),a.a.cancel(n._photoLoadAction),n._photoLoadAction=a.a.create(n._photosLoader(),{success:function(e){var t=e.ids;n.setState({isLoading:!1}),0!==t.length&&n.props.onSuccess(t.length)}}))},n._renderSpinner=function(){return n.state.isLoading?i.createElement("div",{className:l("spinner-wrapper")},i.createElement("div",{className:l("spinner")},i.createElement(u.a,{view:"large"}))):null},n.state={isLoading:!1,photosCount:0},n}Object(o.a)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){a.a.cancel(this._photoLoadAction)},n.render=function(){var e=this.state,t=e.isLoading,n=e.photosCount;return i.createElement("div",{className:l()},i.createElement("div",{className:l("title")},"Добавьте фотографии"),this.props.children({setPhotosLoader:this._setPhotosLoader,onChange:this._onChange}),n>0?i.createElement("div",{className:l("controls")},i.createElement("div",{className:l("controls-item")},i.createElement(s.a,{name:"submit",nodeState:{count:n},logClick:!0},i.createElement(c.a,{view:"primary",size:"small",disabled:t,onClick:this._onSubmit},"Отправить"))),i.createElement("div",{className:l("controls-item")},i.createElement(s.a,{name:"cancel",logClick:!0},i.createElement(c.a,{view:"secondary-blue",size:"small",onClick:this._onCancel},"Отменить")))):null,this._renderSpinner())},t}(i.Component);t.a=d},772:function(e,t,n){},81:function(e,t,n){},958:function(e,t,n){"use strict";var o=n(13),i=n(6),r=(n(710),n(4)),a=n(9),s=n(7),c=n(22),u=(n(712),n(12)),l=n(187),d=n(325),p=n(8),h=n(158),f=n(79),m=n(21),v=["telegram","twitter","ok","facebook","vkontakte"],g=Object(s.a)("gallery-share-view"),b=u.b(function(e){return{url:Object(f.a)(e),config:e.config}})(function(e){return r.createElement(p.a,{name:"share_view",useParentState:!0},r.createElement(h.a,{url:e.url},function(t){var n=m.a(t,e.config);return r.createElement("div",{className:g()},r.createElement(l.a,{noIcon:!0,text:n,position:"left",view:"primary"},r.createElement("div",{className:g("copy-url")},"Скопировать ссылку")),r.createElement(d.a,{services:v,view:"gallery",url:n,useLabels:!0,onClick:e.onClick}))}))}),_=n(11),y=n(714),E=n.n(y),w=Object(s.a)("photos-share-view"),C=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._share=null,t._togglePopup=function(){t.props.popupProps.isShown?t.props.popupProps.onClose():t.props.buttonProps.onClick()},t}return Object(i.a)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.popupProps,i=t.buttonProps;t.config;return r.createElement("div",null,r.createElement(p.a,{name:"share_control",useParentState:!0,logClick:!0},r.createElement("div",Object(o.a)({ref:function(t){return e._share=t},title:"Поделиться"},i),r.createElement(_.a,{className:w("icon"),url:E.a}))),r.createElement(c.a,Object(o.a)({type:"transparent",showArrow:!1,position:"top",offset:{main:10,side:-38},getTarget:function(){return e._share}},n),r.createElement(p.a,{name:"share_popup",useParentState:!0},r.createElement("div",{className:w("content")},r.createElement(b,{onClick:this._togglePopup})))))},t}(r.PureComponent);t.a=Object(a.b)(C)},98:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(24);function i(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(o.a)(e,t);return n.setHours(0,0,0,0),n}}}]);